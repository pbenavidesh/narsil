<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pablo Benavides">
<meta name="dcterms.date" content="2022-09-30">

<title>The Forecasting Workflow using fable – Time Series Forecasting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../docs/modules/forecasting.html" rel="prev">
<link href="../../logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-57476271c5f0467c372e20ff5d25630e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-391c4f7f0df7475a7487d1067a5e1fc7.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-3fb1021a273c36153f9d0e2740f2c596.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-a11c347329b2136720a8a9d626cdbb4d.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "classic"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="The Forecasting Workflow using fable – Time Series Forecasting">
<meta property="og:image" content="https://pbenavidesh.github.io/narsil/docs/modules/forecasting_workflow_files/figure-html/unnamed-chunk-10-1.png">
<meta property="og:site_name" content="Time Series Forecasting">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
<meta name="twitter:title" content="The Forecasting Workflow using fable – Time Series Forecasting">
<meta name="twitter:image" content="https://pbenavidesh.github.io/narsil/docs/modules/forecasting_workflow_files/figure-html/unnamed-chunk-10-1.png">
<meta name="twitter:creator" content="@PabsBenavides">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/iteso_logo_blanco.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Time Series Forecasting</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../docs/modules/module_1/01_intro/intro.html" aria-current="page"> 
<span class="menu-text">Modules</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../images/under_construction.jpg"> 
<span class="menu-text">More</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/pbenavidesh/narsil" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../docs/modules/module_1/01_intro/intro.html">Forecasting models based on decomposition methods</a></li><li class="breadcrumb-item"><a href="../../docs/modules/forecasting_workflow.html">The Forecasting Workflow</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
  <div id="quarto-announcement" data-announcement-id="355e7960d18772e034d1baaa3cb7c431" class="alert alert-primary hidden"><div class="quarto-announcement-content">
<p><strong>NEW</strong> - Module 1 is now live</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Forecasting models based on decomposition methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/modules/module_1/01_intro/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/modules/module_1/02_time_series/r_time_series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RStudio, R, and Time Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/modules/module_1/03_ts_dcmp/ts_dcmp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time Series Decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/modules/forecasting_workflow.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">The Forecasting Workflow</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Adding ETS and ARIMA filters</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
 <span class="menu-text">Exponential Smoothing</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Identifying Stationarity</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">ARIMA models</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Decomposition &amp; ETS/ARIMA</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Adding exogenous variables to the model</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
 <span class="menu-text">Identifying correlation and causation</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Build dynamic regressions</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Analyze the model's performance</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Choose the best variables for the model</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Forecasting at scale</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
 <span class="menu-text">Understanding the challenges and approaches when dealing with multiple time series</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Applying hierarchical and reconciliation models</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Efficient forecasting workflow</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Evaluation of the global performance</span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">0.1</span> Packages</a></li>
  </ul></li>
  <li><a href="#forecasting-workflow" id="toc-forecasting-workflow" class="nav-link" data-scroll-target="#forecasting-workflow"><span class="header-section-number">1</span> Forecasting Workflow</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">1.1</span> Data</a>
  <ul class="collapse">
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data"><span class="header-section-number">1.1.1</span> Import data</a></li>
  <li><a href="#wrangle-data" id="toc-wrangle-data" class="nav-link" data-scroll-target="#wrangle-data"><span class="header-section-number">1.1.2</span> Wrangle data</a></li>
  </ul></li>
  <li><a href="#traintest-split" id="toc-traintest-split" class="nav-link" data-scroll-target="#traintest-split"><span class="header-section-number">1.2</span> Train/Test Split</a></li>
  <li><a href="#visualization-and-eda" id="toc-visualization-and-eda" class="nav-link" data-scroll-target="#visualization-and-eda"><span class="header-section-number">1.3</span> Visualization and EDA</a>
  <ul class="collapse">
  <li><a href="#ts-decomposition" id="toc-ts-decomposition" class="nav-link" data-scroll-target="#ts-decomposition"><span class="header-section-number">1.3.1</span> TS Decomposition</a></li>
  </ul></li>
  <li><a href="#model-specification" id="toc-model-specification" class="nav-link" data-scroll-target="#model-specification"><span class="header-section-number">1.4</span> Model Specification</a></li>
  <li><a href="#residuals-diagnostics" id="toc-residuals-diagnostics" class="nav-link" data-scroll-target="#residuals-diagnostics"><span class="header-section-number">1.5</span> Residuals Diagnostics</a>
  <ul class="collapse">
  <li><a href="#visual-analysis" id="toc-visual-analysis" class="nav-link" data-scroll-target="#visual-analysis"><span class="header-section-number">1.5.1</span> Visual analysis</a></li>
  <li><a href="#portmanteau-tests-of-autocorrelation" id="toc-portmanteau-tests-of-autocorrelation" class="nav-link" data-scroll-target="#portmanteau-tests-of-autocorrelation"><span class="header-section-number">1.5.2</span> Portmanteau tests of autocorrelation</a></li>
  </ul></li>
  <li><a href="#modeling-using-decomposition" id="toc-modeling-using-decomposition" class="nav-link" data-scroll-target="#modeling-using-decomposition"><span class="header-section-number">1.6</span> Modeling using decomposition</a>
  <ul class="collapse">
  <li><a href="#residuals-diagnostics-1" id="toc-residuals-diagnostics-1" class="nav-link" data-scroll-target="#residuals-diagnostics-1"><span class="header-section-number">1.6.1</span> Residuals diagnostics</a></li>
  </ul></li>
  <li><a href="#forecasting-on-the-test-set" id="toc-forecasting-on-the-test-set" class="nav-link" data-scroll-target="#forecasting-on-the-test-set"><span class="header-section-number">1.7</span> Forecasting on the test set</a></li>
  <li><a href="#forecasting-the-future" id="toc-forecasting-the-future" class="nav-link" data-scroll-target="#forecasting-the-future"><span class="header-section-number">1.8</span> Forecasting the future</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/pbenavidesh/narsil/edit/main/docs/modules/forecasting_workflow.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/pbenavidesh/narsil/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="forecasting_wf_pres.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../docs/modules/module_1/01_intro/intro.html">Forecasting models based on decomposition methods</a></li><li class="breadcrumb-item"><a href="../../docs/modules/forecasting_workflow.html">The Forecasting Workflow</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">The Forecasting Workflow using <code>fable</code></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pablo Benavides </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 30, 2022</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">February 20, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://tidyverts.org/images/fable.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://tidyverts.org/images/fable.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<section id="packages" class="level2" data-number="0.1">
<h2 data-number="0.1" class="anchored" data-anchor-id="packages"><span class="header-section-number">0.1</span> Packages</h2>
<p>It is recommended to load all the packages at the beginning of your file. We will be using the <code>tidyverts</code> ecosystem for the whole forecasting workflow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fpp3)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do not load unnecesary packages into your environment. It could lead to conflicts between functions and unwanted results.</p>
</div>
</div>
</section>
</section>
<section id="forecasting-workflow" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Forecasting Workflow</h1>
<section id="data" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="data"><span class="header-section-number">1.1</span> Data</h2>
<p>We will work with the Real Gross Domestic Product (GDP) for Mexico. The data is downloaded from <a href="https://fred.stlouisfed.org/series/NGDPRNSAXDCMXQ">FRED</a>. The time series id is <code>NGDPRNSAXDCMXQ</code>.</p>
<section id="import-data" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="import-data"><span class="header-section-number">1.1.1</span> Import data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> tidyquant<span class="sc">::</span><span class="fu">tq_get</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x    =</span> <span class="st">"NGDPRNSAXDCMXQ"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">get  =</span> <span class="st">"economic.data"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="st">"1997-01-01"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>gdp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 111 × 3
   symbol         date          price
   &lt;chr&gt;          &lt;date&gt;        &lt;dbl&gt;
 1 NGDPRNSAXDCMXQ 1997-01-01 3702398.
 2 NGDPRNSAXDCMXQ 1997-04-01 3896084 
 3 NGDPRNSAXDCMXQ 1997-07-01 3906063 
 4 NGDPRNSAXDCMXQ 1997-10-01 4038358.
 5 NGDPRNSAXDCMXQ 1998-01-01 4084304.
 6 NGDPRNSAXDCMXQ 1998-04-01 4134900.
 7 NGDPRNSAXDCMXQ 1998-07-01 4138200.
 8 NGDPRNSAXDCMXQ 1998-10-01 4146842.
 9 NGDPRNSAXDCMXQ 1999-01-01 4176243.
10 NGDPRNSAXDCMXQ 1999-04-01 4232280.
# ℹ 101 more rows</code></pre>
</div>
</div>
</section>
<section id="wrangle-data" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="wrangle-data"><span class="header-section-number">1.1.2</span> Wrangle data</h3>
<p>There are some issues with our data:</p>
<ol type="1">
<li>It is loaded into a <code>tibble</code> object. We need to convert it to a <strong><code>tsibble</code></strong>.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can use <code>as_tsibble()</code> to do so.</p>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Our data is <strong>quarterly</strong>, but it is loaded in a <code>YYYY-MM-DD</code> format. We need to change it to a <code>YYYY QQ</code> format.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>There are some functions that help us achieve this, such as</p>
<ul>
<li><code>yearquarter()</code></li>
<li><code>yearmonth()</code></li>
<li><code>yearweek()</code></li>
<li><code>year()</code></li>
</ul>
<p>depending on the time series’ period.</p>
</div>
</div>
</div>
<p>We will overwrite our data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> gdp <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">yearquarter</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">index =</span> date,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">key   =</span> symbol</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>gdp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["qtr"],"align":["right"]},{"label":["price"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"1997 Q1","3":"3702398"},{"1":"NGDPRNSAXDCMXQ","2":"1997 Q2","3":"3896084"},{"1":"NGDPRNSAXDCMXQ","2":"1997 Q3","3":"3906063"},{"1":"NGDPRNSAXDCMXQ","2":"1997 Q4","3":"4038358"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q1","3":"4084304"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q2","3":"4134900"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q3","3":"4138200"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q4","3":"4146842"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q1","3":"4176243"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q2","3":"4232280"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q3","3":"4262620"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q4","3":"4287798"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q1","3":"4412426"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q2","3":"4465504"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q3","3":"4505221"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q4","3":"4428703"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q1","3":"4441058"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q2","3":"4468505"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q3","3":"4440265"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q4","3":"4381722"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q1","3":"4269784"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q2","3":"4504200"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q3","3":"4457001"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q4","3":"4458615"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q1","3":"4402402"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q2","3":"4520666"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q3","3":"4464787"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q4","3":"4511464"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q1","3":"4546254"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q2","3":"4692565"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q3","3":"4615345"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q4","3":"4683344"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q1","3":"4567922"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q2","3":"4804679"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q3","3":"4720818"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q4","3":"4835832"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q1","3":"4840642"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q2","3":"5029028"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q3","3":"4959002"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q4","3":"5010131"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q1","3":"4936400"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q2","3":"5127368"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q3","3":"5066709"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q4","3":"5120551"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q1","3":"4975730"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q2","3":"5249626"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q3","3":"5123968"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q4","3":"5092737"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q1","3":"4634315"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q2","3":"4706891"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q3","3":"4823052"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q4","3":"4990924"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q1","3":"4842968"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q2","3":"5045140"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q3","3":"5050200"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q4","3":"5169144"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q1","3":"5022838"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q2","3":"5170734"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q3","3":"5237546"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q4","3":"5368844"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q1","3":"5270945"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q2","3":"5380528"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q3","3":"5369752"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q4","3":"5517802"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q1","3":"5256450"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q2","3":"5473377"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q3","3":"5425704"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q4","3":"5567030"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q1","3":"5386946"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q2","3":"5580039"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q3","3":"5564547"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q4","3":"5734912"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q1","3":"5542388"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q2","3":"5710754"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q3","3":"5752936"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q4","3":"5862074"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q1","3":"5634258"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q2","3":"5839989"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q3","3":"5803636"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q4","3":"5995608"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q1","3":"5826518"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q2","3":"5927582"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q3","3":"5872816"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q4","3":"6082192"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q1","3":"5892097"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q2","3":"6098932"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q3","3":"6034322"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q4","3":"6151319"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q1","3":"5947650"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q2","3":"6038705"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q3","3":"6006225"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q4","3":"6089150"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q1","3":"5862506"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q2","3":"4813222"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q3","3":"5518064"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q4","3":"5876143"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q1","3":"5710210"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q2","3":"5905829"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q3","3":"5801183"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q4","3":"5987609"},{"1":"NGDPRNSAXDCMXQ","2":"2022 Q1","3":"5861010"},{"1":"NGDPRNSAXDCMXQ","2":"2022 Q2","3":"6077842"},{"1":"NGDPRNSAXDCMXQ","2":"2022 Q3","3":"6072366"},{"1":"NGDPRNSAXDCMXQ","2":"2022 Q4","3":"6262165"},{"1":"NGDPRNSAXDCMXQ","2":"2023 Q1","3":"6084749"},{"1":"NGDPRNSAXDCMXQ","2":"2023 Q2","3":"6286473"},{"1":"NGDPRNSAXDCMXQ","2":"2023 Q3","3":"6287328"},{"1":"NGDPRNSAXDCMXQ","2":"2023 Q4","3":"6414734"},{"1":"NGDPRNSAXDCMXQ","2":"2024 Q1","3":"6172962"},{"1":"NGDPRNSAXDCMXQ","2":"2024 Q2","3":"6427776"},{"1":"NGDPRNSAXDCMXQ","2":"2024 Q3","3":"6390892"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>We always need to specify the <code>index</code> argument, as it is our <strong>date</strong> variable.</p></li>
<li><p>The <code>key</code> argument is necessary whenever we have more than one time series in our data frame and is made up of <strong>one or more columns</strong> that uniquely identify each time series .</p></li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="traintest-split" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="traintest-split"><span class="header-section-number">1.2</span> Train/Test Split</h2>
<p>We will split our data in two sets: a training set, and a test set, in order to evaluate our forecasts’ accuracy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>gdp_train <span class="ot">&lt;-</span> gdp <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_index</span>(. <span class="sc">~</span> <span class="st">"2021 Q4"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>gdp_train</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["qtr"],"align":["right"]},{"label":["price"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"1997 Q1","3":"3702398"},{"1":"NGDPRNSAXDCMXQ","2":"1997 Q2","3":"3896084"},{"1":"NGDPRNSAXDCMXQ","2":"1997 Q3","3":"3906063"},{"1":"NGDPRNSAXDCMXQ","2":"1997 Q4","3":"4038358"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q1","3":"4084304"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q2","3":"4134900"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q3","3":"4138200"},{"1":"NGDPRNSAXDCMXQ","2":"1998 Q4","3":"4146842"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q1","3":"4176243"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q2","3":"4232280"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q3","3":"4262620"},{"1":"NGDPRNSAXDCMXQ","2":"1999 Q4","3":"4287798"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q1","3":"4412426"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q2","3":"4465504"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q3","3":"4505221"},{"1":"NGDPRNSAXDCMXQ","2":"2000 Q4","3":"4428703"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q1","3":"4441058"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q2","3":"4468505"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q3","3":"4440265"},{"1":"NGDPRNSAXDCMXQ","2":"2001 Q4","3":"4381722"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q1","3":"4269784"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q2","3":"4504200"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q3","3":"4457001"},{"1":"NGDPRNSAXDCMXQ","2":"2002 Q4","3":"4458615"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q1","3":"4402402"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q2","3":"4520666"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q3","3":"4464787"},{"1":"NGDPRNSAXDCMXQ","2":"2003 Q4","3":"4511464"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q1","3":"4546254"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q2","3":"4692565"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q3","3":"4615345"},{"1":"NGDPRNSAXDCMXQ","2":"2004 Q4","3":"4683344"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q1","3":"4567922"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q2","3":"4804679"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q3","3":"4720818"},{"1":"NGDPRNSAXDCMXQ","2":"2005 Q4","3":"4835832"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q1","3":"4840642"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q2","3":"5029028"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q3","3":"4959002"},{"1":"NGDPRNSAXDCMXQ","2":"2006 Q4","3":"5010131"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q1","3":"4936400"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q2","3":"5127368"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q3","3":"5066709"},{"1":"NGDPRNSAXDCMXQ","2":"2007 Q4","3":"5120551"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q1","3":"4975730"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q2","3":"5249626"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q3","3":"5123968"},{"1":"NGDPRNSAXDCMXQ","2":"2008 Q4","3":"5092737"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q1","3":"4634315"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q2","3":"4706891"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q3","3":"4823052"},{"1":"NGDPRNSAXDCMXQ","2":"2009 Q4","3":"4990924"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q1","3":"4842968"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q2","3":"5045140"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q3","3":"5050200"},{"1":"NGDPRNSAXDCMXQ","2":"2010 Q4","3":"5169144"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q1","3":"5022838"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q2","3":"5170734"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q3","3":"5237546"},{"1":"NGDPRNSAXDCMXQ","2":"2011 Q4","3":"5368844"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q1","3":"5270945"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q2","3":"5380528"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q3","3":"5369752"},{"1":"NGDPRNSAXDCMXQ","2":"2012 Q4","3":"5517802"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q1","3":"5256450"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q2","3":"5473377"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q3","3":"5425704"},{"1":"NGDPRNSAXDCMXQ","2":"2013 Q4","3":"5567030"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q1","3":"5386946"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q2","3":"5580039"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q3","3":"5564547"},{"1":"NGDPRNSAXDCMXQ","2":"2014 Q4","3":"5734912"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q1","3":"5542388"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q2","3":"5710754"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q3","3":"5752936"},{"1":"NGDPRNSAXDCMXQ","2":"2015 Q4","3":"5862074"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q1","3":"5634258"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q2","3":"5839989"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q3","3":"5803636"},{"1":"NGDPRNSAXDCMXQ","2":"2016 Q4","3":"5995608"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q1","3":"5826518"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q2","3":"5927582"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q3","3":"5872816"},{"1":"NGDPRNSAXDCMXQ","2":"2017 Q4","3":"6082192"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q1","3":"5892097"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q2","3":"6098932"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q3","3":"6034322"},{"1":"NGDPRNSAXDCMXQ","2":"2018 Q4","3":"6151319"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q1","3":"5947650"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q2","3":"6038705"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q3","3":"6006225"},{"1":"NGDPRNSAXDCMXQ","2":"2019 Q4","3":"6089150"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q1","3":"5862506"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q2","3":"4813222"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q3","3":"5518064"},{"1":"NGDPRNSAXDCMXQ","2":"2020 Q4","3":"5876143"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q1","3":"5710210"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q2","3":"5905829"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q3","3":"5801183"},{"1":"NGDPRNSAXDCMXQ","2":"2021 Q4","3":"5987609"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For all our variables, it is strongly recommended to follow the same notation process, and write our code using <a href="https://en.wikipedia.org/wiki/Snake_case"><strong>snake_case</strong></a>. Here, we called our data <code>gdp</code>, therefore, all the following variables will be called starting with <strong><code>gdp_</code></strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, such as <code>gdp_train</code> for our training set.</p>
</div>
</div>
</section>
<section id="visualization-and-eda" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="visualization-and-eda"><span class="header-section-number">1.3</span> Visualization and EDA</h2>
<p>When performing time series analysis/forecasting, one of the first things to do is to create a time series plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(price) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Time series plot of the Real GDP for Mexico"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"GDP"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">dynamicTicks =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rangeslider</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-cd2ab76fb50abd960ce6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-cd2ab76fb50abd960ce6">{"x":{"data":[{"x":["1997-01-01","1997-04-01","1997-07-01","1997-10-01","1998-01-01","1998-04-01","1998-07-01","1998-10-01","1999-01-01","1999-04-01","1999-07-01","1999-10-01","2000-01-01","2000-04-01","2000-07-01","2000-10-01","2001-01-01","2001-04-01","2001-07-01","2001-10-01","2002-01-01","2002-04-01","2002-07-01","2002-10-01","2003-01-01","2003-04-01","2003-07-01","2003-10-01","2004-01-01","2004-04-01","2004-07-01","2004-10-01","2005-01-01","2005-04-01","2005-07-01","2005-10-01","2006-01-01","2006-04-01","2006-07-01","2006-10-01","2007-01-01","2007-04-01","2007-07-01","2007-10-01","2008-01-01","2008-04-01","2008-07-01","2008-10-01","2009-01-01","2009-04-01","2009-07-01","2009-10-01","2010-01-01","2010-04-01","2010-07-01","2010-10-01","2011-01-01","2011-04-01","2011-07-01","2011-10-01","2012-01-01","2012-04-01","2012-07-01","2012-10-01","2013-01-01","2013-04-01","2013-07-01","2013-10-01","2014-01-01","2014-04-01","2014-07-01","2014-10-01","2015-01-01","2015-04-01","2015-07-01","2015-10-01","2016-01-01","2016-04-01","2016-07-01","2016-10-01","2017-01-01","2017-04-01","2017-07-01","2017-10-01","2018-01-01","2018-04-01","2018-07-01","2018-10-01","2019-01-01","2019-04-01","2019-07-01","2019-10-01","2020-01-01","2020-04-01","2020-07-01","2020-10-01","2021-01-01","2021-04-01","2021-07-01","2021-10-01"],"y":[3702397.75,3896084,3906063,4038358.5,4084303.5,4134899.5,4138199.75,4146841.5,4176243.25,4232279.5,4262620.5,4287797.5,4412426.5,4465504,4505221,4428703,4441058,4468505,4440265,4381722.5,4269784.5,4504199.5,4457001,4458615,4402401.5,4520666,4464787,4511463.5,4546254,4692565,4615345,4683343.5,4567922,4804679,4720817.5,4835832.5,4840642.5,5029028,4959002,5010131,4936399.5,5127368,5066709,5120551,4975730.5,5249626,5123968,5092737,4634315,4706891,4823052.5,4990924.5,4842967.5,5045140.5,5050199.5,5169143.5,5022838,5170733.5,5237545.5,5368843.5,5270945,5380528,5369752,5517801.5,5256450.5,5473377,5425704,5567030,5386945.5,5580039,5564547,5734911.5,5542388.5,5710754.5,5752936.5,5862074.5,5634258,5839989,5803635.5,5995608.5,5826517.5,5927581.5,5872816.5,6082192,5892097,6098932.5,6034322,6151319,5947650.5,6038705,6006225,6089150.5,5862506,4813221.5,5518064,5876143,5710210.5,5905829,5801183,5987609],"text":["date: 1997 Q1<br />price: 3702398","date: 1997 Q2<br />price: 3896084","date: 1997 Q3<br />price: 3906063","date: 1997 Q4<br />price: 4038358","date: 1998 Q1<br />price: 4084304","date: 1998 Q2<br />price: 4134900","date: 1998 Q3<br />price: 4138200","date: 1998 Q4<br />price: 4146842","date: 1999 Q1<br />price: 4176243","date: 1999 Q2<br />price: 4232280","date: 1999 Q3<br />price: 4262620","date: 1999 Q4<br />price: 4287798","date: 2000 Q1<br />price: 4412426","date: 2000 Q2<br />price: 4465504","date: 2000 Q3<br />price: 4505221","date: 2000 Q4<br />price: 4428703","date: 2001 Q1<br />price: 4441058","date: 2001 Q2<br />price: 4468505","date: 2001 Q3<br />price: 4440265","date: 2001 Q4<br />price: 4381722","date: 2002 Q1<br />price: 4269784","date: 2002 Q2<br />price: 4504200","date: 2002 Q3<br />price: 4457001","date: 2002 Q4<br />price: 4458615","date: 2003 Q1<br />price: 4402402","date: 2003 Q2<br />price: 4520666","date: 2003 Q3<br />price: 4464787","date: 2003 Q4<br />price: 4511464","date: 2004 Q1<br />price: 4546254","date: 2004 Q2<br />price: 4692565","date: 2004 Q3<br />price: 4615345","date: 2004 Q4<br />price: 4683344","date: 2005 Q1<br />price: 4567922","date: 2005 Q2<br />price: 4804679","date: 2005 Q3<br />price: 4720818","date: 2005 Q4<br />price: 4835832","date: 2006 Q1<br />price: 4840642","date: 2006 Q2<br />price: 5029028","date: 2006 Q3<br />price: 4959002","date: 2006 Q4<br />price: 5010131","date: 2007 Q1<br />price: 4936400","date: 2007 Q2<br />price: 5127368","date: 2007 Q3<br />price: 5066709","date: 2007 Q4<br />price: 5120551","date: 2008 Q1<br />price: 4975730","date: 2008 Q2<br />price: 5249626","date: 2008 Q3<br />price: 5123968","date: 2008 Q4<br />price: 5092737","date: 2009 Q1<br />price: 4634315","date: 2009 Q2<br />price: 4706891","date: 2009 Q3<br />price: 4823052","date: 2009 Q4<br />price: 4990924","date: 2010 Q1<br />price: 4842968","date: 2010 Q2<br />price: 5045140","date: 2010 Q3<br />price: 5050200","date: 2010 Q4<br />price: 5169144","date: 2011 Q1<br />price: 5022838","date: 2011 Q2<br />price: 5170734","date: 2011 Q3<br />price: 5237546","date: 2011 Q4<br />price: 5368844","date: 2012 Q1<br />price: 5270945","date: 2012 Q2<br />price: 5380528","date: 2012 Q3<br />price: 5369752","date: 2012 Q4<br />price: 5517802","date: 2013 Q1<br />price: 5256450","date: 2013 Q2<br />price: 5473377","date: 2013 Q3<br />price: 5425704","date: 2013 Q4<br />price: 5567030","date: 2014 Q1<br />price: 5386946","date: 2014 Q2<br />price: 5580039","date: 2014 Q3<br />price: 5564547","date: 2014 Q4<br />price: 5734912","date: 2015 Q1<br />price: 5542388","date: 2015 Q2<br />price: 5710754","date: 2015 Q3<br />price: 5752936","date: 2015 Q4<br />price: 5862074","date: 2016 Q1<br />price: 5634258","date: 2016 Q2<br />price: 5839989","date: 2016 Q3<br />price: 5803636","date: 2016 Q4<br />price: 5995608","date: 2017 Q1<br />price: 5826518","date: 2017 Q2<br />price: 5927582","date: 2017 Q3<br />price: 5872816","date: 2017 Q4<br />price: 6082192","date: 2018 Q1<br />price: 5892097","date: 2018 Q2<br />price: 6098932","date: 2018 Q3<br />price: 6034322","date: 2018 Q4<br />price: 6151319","date: 2019 Q1<br />price: 5947650","date: 2019 Q2<br />price: 6038705","date: 2019 Q3<br />price: 6006225","date: 2019 Q4<br />price: 6089150","date: 2020 Q1<br />price: 5862506","date: 2020 Q2<br />price: 4813222","date: 2020 Q3<br />price: 5518064","date: 2020 Q4<br />price: 5876143","date: 2021 Q1<br />price: 5710210","date: 2021 Q2<br />price: 5905829","date: 2021 Q3<br />price: 5801183","date: 2021 Q4<br />price: 5987609"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":66.484018264840202},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Time series plot of the Real GDP for Mexico","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"tickmode":"auto","ticktext":["2000 Q1","2005 Q1","2010 Q1","2015 Q1","2020 Q1"],"tickvals":[10957,12784,14610,16436,18262],"categoryorder":"array","categoryarray":["2000 Q1","2005 Q1","2010 Q1","2015 Q1","2020 Q1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"date [1Q]","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f","rangeslider":{"visible":true}},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[3579951.6875,6273765.0625],"tickmode":"auto","ticktext":["4000000","4500000","5000000","5500000","6000000"],"tickvals":[4000000,4500000,5000000,5500000,6000000],"categoryorder":"array","categoryarray":["4000000","4500000","5000000","5500000","6000000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"GDP","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1a6f413edfde":{"x":{},"y":{},"type":"scatter"}},"cur_data":"1a6f413edfde","visdat":{"1a6f413edfde":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Our data exhibits an upward <em>linear trend</em> (with some economic cycles), and strong <em>yearly seasonality</em>.</p>
</div>
</div>
</div>
<p>We will explore it further with a season plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_season</span>(price) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-fa843a56dc2e86db3295" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fa843a56dc2e86db3295">{"x":{"data":[{"x":[1096,1186,1277,1369],"y":[3702397.75,3896084,3906063,4038358.5],"text":["date: 1973 Q1<br />price: 3702398<br />unclass(id):  1<br />id: 1997","date: 1973 Q2<br />price: 3896084<br />unclass(id):  1<br />id: 1997","date: 1973 Q3<br />price: 3906063<br />unclass(id):  1<br />id: 1997","date: 1973 Q4<br />price: 4038358<br />unclass(id):  1<br />id: 1997"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4084303.5,4134899.5,4138199.75,4146841.5],"text":["date: 1973 Q1<br />price: 4084304<br />unclass(id):  2<br />id: 1998","date: 1973 Q2<br />price: 4134900<br />unclass(id):  2<br />id: 1998","date: 1973 Q3<br />price: 4138200<br />unclass(id):  2<br />id: 1998","date: 1973 Q4<br />price: 4146842<br />unclass(id):  2<br />id: 1998"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(237,129,83,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4176243.25,4232279.5,4262620.5,4287797.5],"text":["date: 1973 Q1<br />price: 4176243<br />unclass(id):  3<br />id: 1999","date: 1973 Q2<br />price: 4232280<br />unclass(id):  3<br />id: 1999","date: 1973 Q3<br />price: 4262620<br />unclass(id):  3<br />id: 1999","date: 1973 Q4<br />price: 4287798<br />unclass(id):  3<br />id: 1999"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(224,138,54,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4412426.5,4465504,4505221,4428703],"text":["date: 1973 Q1<br />price: 4412426<br />unclass(id):  4<br />id: 2000","date: 1973 Q2<br />price: 4465504<br />unclass(id):  4<br />id: 2000","date: 1973 Q3<br />price: 4505221<br />unclass(id):  4<br />id: 2000","date: 1973 Q4<br />price: 4428703<br />unclass(id):  4<br />id: 2000"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(211,146,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4441058,4468505,4440265,4381722.5],"text":["date: 1973 Q1<br />price: 4441058<br />unclass(id):  5<br />id: 2001","date: 1973 Q2<br />price: 4468505<br />unclass(id):  5<br />id: 2001","date: 1973 Q3<br />price: 4440265<br />unclass(id):  5<br />id: 2001","date: 1973 Q4<br />price: 4381722<br />unclass(id):  5<br />id: 2001"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(191,155,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4269784.5,4504199.5,4457001,4458615],"text":["date: 1973 Q1<br />price: 4269784<br />unclass(id):  6<br />id: 2002","date: 1973 Q2<br />price: 4504200<br />unclass(id):  6<br />id: 2002","date: 1973 Q3<br />price: 4457001<br />unclass(id):  6<br />id: 2002","date: 1973 Q4<br />price: 4458615<br />unclass(id):  6<br />id: 2002"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(170,163,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4402401.5,4520666,4464787,4511463.5],"text":["date: 1973 Q1<br />price: 4402402<br />unclass(id):  7<br />id: 2003","date: 1973 Q2<br />price: 4520666<br />unclass(id):  7<br />id: 2003","date: 1973 Q3<br />price: 4464787<br />unclass(id):  7<br />id: 2003","date: 1973 Q4<br />price: 4511464<br />unclass(id):  7<br />id: 2003"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(147,170,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4546254,4692565,4615345,4683343.5],"text":["date: 1973 Q1<br />price: 4546254<br />unclass(id):  8<br />id: 2004","date: 1973 Q2<br />price: 4692565<br />unclass(id):  8<br />id: 2004","date: 1973 Q3<br />price: 4615345<br />unclass(id):  8<br />id: 2004","date: 1973 Q4<br />price: 4683344<br />unclass(id):  8<br />id: 2004"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(120,176,27,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4567922,4804679,4720817.5,4835832.5],"text":["date: 1973 Q1<br />price: 4567922<br />unclass(id):  9<br />id: 2005","date: 1973 Q2<br />price: 4804679<br />unclass(id):  9<br />id: 2005","date: 1973 Q3<br />price: 4720818<br />unclass(id):  9<br />id: 2005","date: 1973 Q4<br />price: 4835832<br />unclass(id):  9<br />id: 2005"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(85,181,43,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4840642.5,5029028,4959002,5010131],"text":["date: 1973 Q1<br />price: 4840642<br />unclass(id): 10<br />id: 2006","date: 1973 Q2<br />price: 5029028<br />unclass(id): 10<br />id: 2006","date: 1973 Q3<br />price: 4959002<br />unclass(id): 10<br />id: 2006","date: 1973 Q4<br />price: 5010131<br />unclass(id): 10<br />id: 2006"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4936399.5,5127368,5066709,5120551],"text":["date: 1973 Q1<br />price: 4936400<br />unclass(id): 11<br />id: 2007","date: 1973 Q2<br />price: 5127368<br />unclass(id): 11<br />id: 2007","date: 1973 Q3<br />price: 5066709<br />unclass(id): 11<br />id: 2007","date: 1973 Q4<br />price: 5120551<br />unclass(id): 11<br />id: 2007"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(25,188,94,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4975730.5,5249626,5123968,5092737],"text":["date: 1973 Q1<br />price: 4975730<br />unclass(id): 12<br />id: 2008","date: 1973 Q2<br />price: 5249626<br />unclass(id): 12<br />id: 2008","date: 1973 Q3<br />price: 5123968<br />unclass(id): 12<br />id: 2008","date: 1973 Q4<br />price: 5092737<br />unclass(id): 12<br />id: 2008"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(26,191,127,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4634315,4706891,4823052.5,4990924.5],"text":["date: 1973 Q1<br />price: 4634315<br />unclass(id): 13<br />id: 2009","date: 1973 Q2<br />price: 4706891<br />unclass(id): 13<br />id: 2009","date: 1973 Q3<br />price: 4823052<br />unclass(id): 13<br />id: 2009","date: 1973 Q4<br />price: 4990924<br />unclass(id): 13<br />id: 2009"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,193,159,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[4842967.5,5045140.5,5050199.5,5169143.5],"text":["date: 1973 Q1<br />price: 4842968<br />unclass(id): 14<br />id: 2010","date: 1973 Q2<br />price: 5045140<br />unclass(id): 14<br />id: 2010","date: 1973 Q3<br />price: 5050200<br />unclass(id): 14<br />id: 2010","date: 1973 Q4<br />price: 5169144<br />unclass(id): 14<br />id: 2010"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(20,190,182,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5022838,5170733.5,5237545.5,5368843.5],"text":["date: 1973 Q1<br />price: 5022838<br />unclass(id): 15<br />id: 2011","date: 1973 Q2<br />price: 5170734<br />unclass(id): 15<br />id: 2011","date: 1973 Q3<br />price: 5237546<br />unclass(id): 15<br />id: 2011","date: 1973 Q4<br />price: 5368844<br />unclass(id): 15<br />id: 2011"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(20,188,204,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5270945,5380528,5369752,5517801.5],"text":["date: 1973 Q1<br />price: 5270945<br />unclass(id): 16<br />id: 2012","date: 1973 Q2<br />price: 5380528<br />unclass(id): 16<br />id: 2012","date: 1973 Q3<br />price: 5369752<br />unclass(id): 16<br />id: 2012","date: 1973 Q4<br />price: 5517802<br />unclass(id): 16<br />id: 2012"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,185,227,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5256450.5,5473377,5425704,5567030],"text":["date: 1973 Q1<br />price: 5256450<br />unclass(id): 17<br />id: 2013","date: 1973 Q2<br />price: 5473377<br />unclass(id): 17<br />id: 2013","date: 1973 Q3<br />price: 5425704<br />unclass(id): 17<br />id: 2013","date: 1973 Q4<br />price: 5567030<br />unclass(id): 17<br />id: 2013"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(58,176,236,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5386945.5,5580039,5564547,5734911.5],"text":["date: 1973 Q1<br />price: 5386946<br />unclass(id): 18<br />id: 2014","date: 1973 Q2<br />price: 5580039<br />unclass(id): 18<br />id: 2014","date: 1973 Q3<br />price: 5564547<br />unclass(id): 18<br />id: 2014","date: 1973 Q4<br />price: 5734912<br />unclass(id): 18<br />id: 2014"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(81,166,246,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5542388.5,5710754.5,5752936.5,5862074.5],"text":["date: 1973 Q1<br />price: 5542388<br />unclass(id): 19<br />id: 2015","date: 1973 Q2<br />price: 5710754<br />unclass(id): 19<br />id: 2015","date: 1973 Q3<br />price: 5752936<br />unclass(id): 19<br />id: 2015","date: 1973 Q4<br />price: 5862074<br />unclass(id): 19<br />id: 2015"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5634258,5839989,5803635.5,5995608.5],"text":["date: 1973 Q1<br />price: 5634258<br />unclass(id): 20<br />id: 2016","date: 1973 Q2<br />price: 5839989<br />unclass(id): 20<br />id: 2016","date: 1973 Q3<br />price: 5803636<br />unclass(id): 20<br />id: 2016","date: 1973 Q4<br />price: 5995608<br />unclass(id): 20<br />id: 2016"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(149,145,254,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5826517.5,5927581.5,5872816.5,6082192],"text":["date: 1973 Q1<br />price: 5826518<br />unclass(id): 21<br />id: 2017","date: 1973 Q2<br />price: 5927582<br />unclass(id): 21<br />id: 2017","date: 1973 Q3<br />price: 5872816<br />unclass(id): 21<br />id: 2017","date: 1973 Q4<br />price: 6082192<br />unclass(id): 21<br />id: 2017"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(187,131,252,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5892097,6098932.5,6034322,6151319],"text":["date: 1973 Q1<br />price: 5892097<br />unclass(id): 22<br />id: 2018","date: 1973 Q2<br />price: 6098932<br />unclass(id): 22<br />id: 2018","date: 1973 Q3<br />price: 6034322<br />unclass(id): 22<br />id: 2018","date: 1973 Q4<br />price: 6151319<br />unclass(id): 22<br />id: 2018"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(219,114,251,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5947650.5,6038705,6006225,6089150.5],"text":["date: 1973 Q1<br />price: 5947650<br />unclass(id): 23<br />id: 2019","date: 1973 Q2<br />price: 6038705<br />unclass(id): 23<br />id: 2019","date: 1973 Q3<br />price: 6006225<br />unclass(id): 23<br />id: 2019","date: 1973 Q4<br />price: 6089150<br />unclass(id): 23<br />id: 2019"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(233,109,232,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5862506,4813221.5,5518064,5876143],"text":["date: 1973 Q1<br />price: 5862506<br />unclass(id): 24<br />id: 2020","date: 1973 Q2<br />price: 4813222<br />unclass(id): 24<br />id: 2020","date: 1973 Q3<br />price: 5518064<br />unclass(id): 24<br />id: 2020","date: 1973 Q4<br />price: 5876143<br />unclass(id): 24<br />id: 2020"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(245,103,213,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1096,1186,1277,1369],"y":[5710210.5,5905829,5801183,5987609],"text":["date: 1973 Q1<br />price: 5710210<br />unclass(id): 25<br />id: 2021","date: 1973 Q2<br />price: 5905829<br />unclass(id): 25<br />id: 2021","date: 1973 Q3<br />price: 5801183<br />unclass(id): 25<br />id: 2021","date: 1973 Q4<br />price: 5987609<br />unclass(id): 25<br />id: 2021"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,97,195,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1369],"y":[4000000],"name":"adb7ce66e4f6bfd267e9c27907e172a2","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#F8766D"],[0.0033444816053511683,"#F7776B"],[0.0066889632107023367,"#F67869"],[0.010033444816053514,"#F57967"],[0.013377926421404682,"#F47A65"],[0.016722408026755852,"#F47A63"],[0.020066889632107027,"#F37B61"],[0.023411371237458196,"#F27C5F"],[0.026755852842809364,"#F17D5D"],[0.030100334448160532,"#F07E5B"],[0.033444816053511704,"#EF7F59"],[0.03678929765886288,"#EE7F56"],[0.040133779264214048,"#ED8054"],[0.043478260869565223,"#EC8152"],[0.046822742474916391,"#EB8250"],[0.05016722408026756,"#EA834E"],[0.053511705685618728,"#E9834C"],[0.056856187290969896,"#E88449"],[0.060200668896321065,"#E78547"],[0.06354515050167224,"#E68645"],[0.066889632107023408,"#E58642"],[0.070234113712374577,"#E48740"],[0.073578595317725759,"#E3883D"],[0.076923076923076927,"#E2883B"],[0.080267558528428096,"#E18938"],[0.083612040133779264,"#E08A36"],[0.086956521739130432,"#DF8B33"],[0.090301003344481601,"#DE8B30"],[0.093645484949832783,"#DD8C2D"],[0.096989966555183951,"#DC8D2A"],[0.10033444816053512,"#DB8D27"],[0.10367892976588629,"#DA8E24"],[0.10702341137123746,"#D98F20"],[0.11036789297658862,"#D88F1C"],[0.11371237458193979,"#D79017"],[0.11705685618729096,"#D69112"],[0.12040133779264213,"#D5910B"],[0.12374581939799333,"#D39203"],[0.12709030100334448,"#D29200"],[0.13043478260869565,"#D09300"],[0.13377926421404682,"#CF9400"],[0.13712374581939799,"#CD9500"],[0.14046822742474915,"#CC9600"],[0.14381270903010032,"#CA9600"],[0.14715719063545152,"#C99700"],[0.15050167224080269,"#C79800"],[0.15384615384615385,"#C59800"],[0.15719063545150502,"#C49900"],[0.16053511705685619,"#C29A00"],[0.16387959866220736,"#C19B00"],[0.16722408026755853,"#BF9B00"],[0.1705685618729097,"#BD9C00"],[0.17391304347826086,"#BC9D00"],[0.17725752508361203,"#BA9D00"],[0.1806020066889632,"#B89E00"],[0.18394648829431437,"#B79F00"],[0.18729096989966557,"#B59F00"],[0.19063545150501673,"#B3A000"],[0.1939799331103679,"#B2A000"],[0.19732441471571907,"#B0A100"],[0.20066889632107024,"#AEA200"],[0.20401337792642141,"#ACA200"],[0.20735785953177258,"#ABA300"],[0.21070234113712374,"#A9A300"],[0.21404682274247491,"#A7A400"],[0.21739130434782608,"#A5A500"],[0.22073578595317725,"#A4A500"],[0.22408026755852842,"#A2A600"],[0.22742474916387959,"#A0A600"],[0.23076923076923075,"#9EA700"],[0.23411371237458192,"#9CA700"],[0.23745819397993309,"#9AA800"],[0.24080267558528426,"#98A900"],[0.24414715719063548,"#96A900"],[0.24749163879598665,"#94AA00"],[0.25083612040133779,"#93AA01"],[0.25418060200668896,"#91AB03"],[0.25752508361204013,"#8EAB06"],[0.2608695652173913,"#8CAC09"],[0.26421404682274247,"#8AAC0C"],[0.26755852842809363,"#88AD0E"],[0.2709030100334448,"#86AD10"],[0.27424749163879597,"#84AE12"],[0.27759197324414714,"#82AE14"],[0.28093645484949831,"#80AE16"],[0.28428093645484948,"#7DAF18"],[0.28762541806020064,"#7BAF19"],[0.29096989966555181,"#79B01B"],[0.29431438127090304,"#76B01C"],[0.2976588628762542,"#74B11E"],[0.30100334448160537,"#71B11F"],[0.30434782608695654,"#6FB221"],[0.30769230769230771,"#6CB222"],[0.31103678929765888,"#69B223"],[0.31438127090301005,"#67B324"],[0.31772575250836121,"#64B326"],[0.32107023411371238,"#61B427"],[0.32441471571906355,"#5EB428"],[0.32775919732441472,"#5BB529"],[0.33110367892976589,"#57B52A"],[0.33444816053511706,"#54B52B"],[0.33779264214046822,"#50B62D"],[0.34113712374581939,"#4DB62E"],[0.34448160535117056,"#49B72F"],[0.34782608695652173,"#45B730"],[0.3511705685618729,"#40B731"],[0.35451505016722407,"#3BB832"],[0.35785953177257523,"#36B833"],[0.3612040133779264,"#30B834"],[0.36454849498327757,"#29B935"],[0.36789297658862874,"#21B936"],[0.37123745819397991,"#16BA37"],[0.37458193979933113,"#03BA38"],[0.3779264214046823,"#03BA3B"],[0.38127090301003347,"#07BA3E"],[0.38461538461538464,"#0ABB42"],[0.38795986622073581,"#0DBB45"],[0.39130434782608697,"#0FBB48"],[0.39464882943143814,"#11BB4B"],[0.39799331103678931,"#13BB4E"],[0.40133779264214048,"#14BB51"],[0.40468227424749165,"#16BC54"],[0.40802675585284282,"#17BC56"],[0.41137123745819398,"#18BC59"],[0.41471571906354515,"#19BC5C"],[0.41806020066889632,"#1ABC5F"],[0.42140468227424749,"#1ABD62"],[0.42474916387959866,"#1BBD64"],[0.42809364548494983,"#1BBD67"],[0.43143812709030099,"#1BBD6A"],[0.43478260869565216,"#1CBD6C"],[0.43812709030100333,"#1CBD6F"],[0.4414715719063545,"#1CBE72"],[0.44481605351170567,"#1CBE74"],[0.44816053511705684,"#1CBE77"],[0.451505016722408,"#1BBE7A"],[0.45484949832775917,"#1BBE7C"],[0.45819397993311034,"#1ABF7F"],[0.46153846153846151,"#1ABF81"],[0.46488294314381268,"#19BF84"],[0.46822742474916385,"#18BF87"],[0.47157190635451501,"#17BF89"],[0.47491638795986618,"#16C08C"],[0.47826086956521735,"#14C08E"],[0.48160535117056852,"#12C091"],[0.4849498327759198,"#10C093"],[0.48829431438127097,"#0EC096"],[0.49163879598662213,"#0AC199"],[0.4949832775919733,"#06C19B"],[0.49832775919732447,"#02C19E"],[0.50167224080267558,"#01C1A0"],[0.50501672240802675,"#04C1A2"],[0.50836120401337792,"#06C0A4"],[0.51170568561872909,"#09C0A5"],[0.51505016722408026,"#0BC0A7"],[0.51839464882943143,"#0DC0A9"],[0.52173913043478259,"#0EC0AB"],[0.52508361204013376,"#0FBFAD"],[0.52842809364548493,"#11BFAF"],[0.5317725752508361,"#12BFB0"],[0.53511705685618727,"#13BFB2"],[0.53846153846153844,"#13BFB4"],[0.5418060200668896,"#14BEB6"],[0.54515050167224077,"#15BEB8"],[0.54849498327759194,"#15BEB9"],[0.55183946488294311,"#15BEBB"],[0.55518394648829428,"#16BEBD"],[0.55852842809364545,"#16BDBF"],[0.56187290969899661,"#16BDC1"],[0.56521739130434778,"#16BDC2"],[0.56856187290969895,"#16BDC4"],[0.57190635451505012,"#16BCC6"],[0.57525083612040129,"#15BCC8"],[0.57859531772575246,"#15BCCA"],[0.58193979933110362,"#15BCCC"],[0.58528428093645479,"#14BCCD"],[0.58862876254180607,"#13BBCF"],[0.59197324414715724,"#13BBD1"],[0.59531772575250841,"#12BBD3"],[0.59866220735785958,"#11BBD5"],[0.60200668896321075,"#0FBBD6"],[0.60535117056856191,"#0EBAD8"],[0.60869565217391308,"#0CBADA"],[0.61204013377926425,"#0ABADC"],[0.61538461538461542,"#08BADE"],[0.61872909698996659,"#05B9E0"],[0.62207357859531776,"#03B9E1"],[0.62541806020066881,"#01B9E3"],[0.62876254180602009,"#0DB8E4"],[0.63210702341137137,"#15B7E5"],[0.63545150501672243,"#1BB7E5"],[0.63879598662207349,"#20B6E6"],[0.64214046822742477,"#24B5E7"],[0.64548494983277604,"#28B4E8"],[0.6488294314381271,"#2BB4E8"],[0.65217391304347816,"#2EB3E9"],[0.65551839464882944,"#31B2EA"],[0.65886287625418072,"#34B1EB"],[0.66220735785953178,"#37B1EB"],[0.66555183946488283,"#39B0EC"],[0.66889632107023411,"#3BAFED"],[0.67224080267558539,"#3EAEEE"],[0.67558528428093645,"#40AEEE"],[0.67892976588628773,"#42ADEF"],[0.68227424749163879,"#44ACF0"],[0.68561872909699006,"#46ABF1"],[0.68896321070234112,"#47ABF1"],[0.6923076923076924,"#49AAF2"],[0.69565217391304346,"#4BA9F3"],[0.69899665551839474,"#4CA8F4"],[0.7023411371237458,"#4EA8F4"],[0.70568561872909707,"#50A7F5"],[0.70903010033444813,"#51A6F6"],[0.71237458193979941,"#53A5F7"],[0.71571906354515047,"#54A4F7"],[0.71906354515050175,"#55A4F8"],[0.72240802675585281,"#57A3F9"],[0.72575250836120409,"#58A2FA"],[0.72909698996655514,"#59A1FA"],[0.73244147157190642,"#5BA0FB"],[0.73578595317725748,"#5CA0FC"],[0.73913043478260876,"#5D9FFD"],[0.74247491638795982,"#5E9EFD"],[0.7458193979933111,"#609DFE"],[0.74916387959866226,"#619CFF"],[0.75250836120401343,"#659BFF"],[0.7558528428093646,"#6A9BFF"],[0.75919732441471577,"#6F9AFF"],[0.76254180602006694,"#7399FF"],[0.76588628762541811,"#7798FE"],[0.76923076923076927,"#7C97FE"],[0.77257525083612044,"#8096FE"],[0.77591973244147161,"#8495FE"],[0.77926421404682278,"#8794FE"],[0.78260869565217395,"#8B94FE"],[0.78595317725752512,"#8F93FE"],[0.78929765886287628,"#9292FE"],[0.79264214046822745,"#9691FE"],[0.79598662207357862,"#9990FD"],[0.79933110367892979,"#9C8FFD"],[0.80267558528428096,"#9F8EFD"],[0.80602006688963213,"#A38DFD"],[0.80936454849498329,"#A68CFD"],[0.81270903010033446,"#A98AFD"],[0.81605351170568563,"#AC89FD"],[0.8193979933110368,"#AF88FD"],[0.82274247491638797,"#B287FD"],[0.82608695652173914,"#B486FD"],[0.8294314381270903,"#B785FC"],[0.83277591973244147,"#BA84FC"],[0.83612040133779264,"#BD82FC"],[0.83946488294314381,"#C081FC"],[0.84280936454849498,"#C280FC"],[0.84615384615384615,"#C57EFC"],[0.84949832775919731,"#C87DFC"],[0.85284280936454848,"#CA7CFC"],[0.85618729096989965,"#CD7AFC"],[0.85953177257525093,"#CF79FB"],[0.86287625418060199,"#D278FB"],[0.86622073578595327,"#D476FB"],[0.86956521739130432,"#D775FB"],[0.8729096989966556,"#D973FB"],[0.87625418060200666,"#DB72FA"],[0.87959866220735794,"#DD71F9"],[0.882943143812709,"#DE71F7"],[0.88628762541806028,"#DF71F6"],[0.88963210702341133,"#E070F4"],[0.89297658862876261,"#E170F3"],[0.89632107023411367,"#E26FF1"],[0.89966555183946495,"#E36FF0"],[0.90301003344481601,"#E56EEE"],[0.90635451505016729,"#E66EED"],[0.90969899665551834,"#E76DEB"],[0.91304347826086962,"#E86DEA"],[0.91638795986622068,"#E96DE8"],[0.91973244147157196,"#EA6CE7"],[0.92307692307692302,"#EB6CE5"],[0.9264214046822743,"#EC6BE4"],[0.92976588628762535,"#ED6BE2"],[0.93311036789297663,"#EE6AE1"],[0.93645484949832769,"#EF6ADF"],[0.93979933110367897,"#F069DE"],[0.94314381270903003,"#F169DC"],[0.94648829431438131,"#F168DB"],[0.94983277591973236,"#F268D9"],[0.95317725752508364,"#F368D8"],[0.9565217391304347,"#F467D6"],[0.95986622073578598,"#F567D5"],[0.96321070234113704,"#F666D3"],[0.96655518394648832,"#F766D2"],[0.9698996655518396,"#F865D0"],[0.97324414715719065,"#F965CF"],[0.97658862876254193,"#F964CD"],[0.97993311036789299,"#FA64CC"],[0.98327759197324427,"#FB63CA"],[0.98662207357859533,"#FC63C9"],[0.98996655518394661,"#FD62C7"],[0.99331103678929766,"#FD62C6"],[0.99665551839464894,"#FE61C4"],[1,"#FF61C3"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"thickness":23.039999999999996,"title":null,"titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["2001","2006","2011","2016","2021"],"tickvals":[0.16777777777777778,0.37541666666666662,0.58305555555555555,0.79069444444444437,0.99833333333333329],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":66.484018264840202},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1082.3499999999999,1382.6500000000001],"tickmode":"array","ticktext":["Q4","Q1","Q2","Q3"],"tickvals":[1369,1096,1186,1277],"categoryorder":"array","categoryarray":["Q4","Q1","Q2","Q3"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[3579951.6875,6273765.0625],"tickmode":"array","ticktext":["4000000","4500000","5000000","5500000","6000000"],"tickvals":[4000000,4500000,5000000,5500000,6000000],"categoryorder":"array","categoryarray":["4000000","4500000","5000000","5500000","6000000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"price","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1a6f396370f7":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"1a6f396370f7","visdat":{"1a6f396370f7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="ts-decomposition" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="ts-decomposition"><span class="header-section-number">1.3.1</span> TS Decomposition</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">stl =</span> <span class="fu">STL</span>(price, <span class="at">robust =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3043a3167c2d9f19720a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3043a3167c2d9f19720a">{"x":{"data":[{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[3702397.75,3896084,3906063,4038358.5,4084303.5,4134899.5,4138199.75,4146841.5,4176243.25,4232279.5,4262620.5,4287797.5,4412426.5,4465504,4505221,4428703,4441058,4468505,4440265,4381722.5,4269784.5,4504199.5,4457001,4458615,4402401.5,4520666,4464787,4511463.5,4546254,4692565,4615345,4683343.5,4567922,4804679,4720817.5,4835832.5,4840642.5,5029028,4959002,5010131,4936399.5,5127368,5066709,5120551,4975730.5,5249626,5123968,5092737,4634315,4706891,4823052.5,4990924.5,4842967.5,5045140.5,5050199.5,5169143.5,5022838,5170733.5,5237545.5,5368843.5,5270945,5380528,5369752,5517801.5,5256450.5,5473377,5425704,5567030,5386945.5,5580039,5564547,5734911.5,5542388.5,5710754.5,5752936.5,5862074.5,5634258,5839989,5803635.5,5995608.5,5826517.5,5927581.5,5872816.5,6082192,5892097,6098932.5,6034322,6151319,5947650.5,6038705,6006225,6089150.5,5862506,4813221.5,5518064,5876143,5710210.5,5905829,5801183,5987609],"text":["date: 1997 Q1<br />.val: 3702397.75000","date: 1997 Q2<br />.val: 3896084.00000","date: 1997 Q3<br />.val: 3906063.00000","date: 1997 Q4<br />.val: 4038358.50000","date: 1998 Q1<br />.val: 4084303.50000","date: 1998 Q2<br />.val: 4134899.50000","date: 1998 Q3<br />.val: 4138199.75000","date: 1998 Q4<br />.val: 4146841.50000","date: 1999 Q1<br />.val: 4176243.25000","date: 1999 Q2<br />.val: 4232279.50000","date: 1999 Q3<br />.val: 4262620.50000","date: 1999 Q4<br />.val: 4287797.50000","date: 2000 Q1<br />.val: 4412426.50000","date: 2000 Q2<br />.val: 4465504.00000","date: 2000 Q3<br />.val: 4505221.00000","date: 2000 Q4<br />.val: 4428703.00000","date: 2001 Q1<br />.val: 4441058.00000","date: 2001 Q2<br />.val: 4468505.00000","date: 2001 Q3<br />.val: 4440265.00000","date: 2001 Q4<br />.val: 4381722.50000","date: 2002 Q1<br />.val: 4269784.50000","date: 2002 Q2<br />.val: 4504199.50000","date: 2002 Q3<br />.val: 4457001.00000","date: 2002 Q4<br />.val: 4458615.00000","date: 2003 Q1<br />.val: 4402401.50000","date: 2003 Q2<br />.val: 4520666.00000","date: 2003 Q3<br />.val: 4464787.00000","date: 2003 Q4<br />.val: 4511463.50000","date: 2004 Q1<br />.val: 4546254.00000","date: 2004 Q2<br />.val: 4692565.00000","date: 2004 Q3<br />.val: 4615345.00000","date: 2004 Q4<br />.val: 4683343.50000","date: 2005 Q1<br />.val: 4567922.00000","date: 2005 Q2<br />.val: 4804679.00000","date: 2005 Q3<br />.val: 4720817.50000","date: 2005 Q4<br />.val: 4835832.50000","date: 2006 Q1<br />.val: 4840642.50000","date: 2006 Q2<br />.val: 5029028.00000","date: 2006 Q3<br />.val: 4959002.00000","date: 2006 Q4<br />.val: 5010131.00000","date: 2007 Q1<br />.val: 4936399.50000","date: 2007 Q2<br />.val: 5127368.00000","date: 2007 Q3<br />.val: 5066709.00000","date: 2007 Q4<br />.val: 5120551.00000","date: 2008 Q1<br />.val: 4975730.50000","date: 2008 Q2<br />.val: 5249626.00000","date: 2008 Q3<br />.val: 5123968.00000","date: 2008 Q4<br />.val: 5092737.00000","date: 2009 Q1<br />.val: 4634315.00000","date: 2009 Q2<br />.val: 4706891.00000","date: 2009 Q3<br />.val: 4823052.50000","date: 2009 Q4<br />.val: 4990924.50000","date: 2010 Q1<br />.val: 4842967.50000","date: 2010 Q2<br />.val: 5045140.50000","date: 2010 Q3<br />.val: 5050199.50000","date: 2010 Q4<br />.val: 5169143.50000","date: 2011 Q1<br />.val: 5022838.00000","date: 2011 Q2<br />.val: 5170733.50000","date: 2011 Q3<br />.val: 5237545.50000","date: 2011 Q4<br />.val: 5368843.50000","date: 2012 Q1<br />.val: 5270945.00000","date: 2012 Q2<br />.val: 5380528.00000","date: 2012 Q3<br />.val: 5369752.00000","date: 2012 Q4<br />.val: 5517801.50000","date: 2013 Q1<br />.val: 5256450.50000","date: 2013 Q2<br />.val: 5473377.00000","date: 2013 Q3<br />.val: 5425704.00000","date: 2013 Q4<br />.val: 5567030.00000","date: 2014 Q1<br />.val: 5386945.50000","date: 2014 Q2<br />.val: 5580039.00000","date: 2014 Q3<br />.val: 5564547.00000","date: 2014 Q4<br />.val: 5734911.50000","date: 2015 Q1<br />.val: 5542388.50000","date: 2015 Q2<br />.val: 5710754.50000","date: 2015 Q3<br />.val: 5752936.50000","date: 2015 Q4<br />.val: 5862074.50000","date: 2016 Q1<br />.val: 5634258.00000","date: 2016 Q2<br />.val: 5839989.00000","date: 2016 Q3<br />.val: 5803635.50000","date: 2016 Q4<br />.val: 5995608.50000","date: 2017 Q1<br />.val: 5826517.50000","date: 2017 Q2<br />.val: 5927581.50000","date: 2017 Q3<br />.val: 5872816.50000","date: 2017 Q4<br />.val: 6082192.00000","date: 2018 Q1<br />.val: 5892097.00000","date: 2018 Q2<br />.val: 6098932.50000","date: 2018 Q3<br />.val: 6034322.00000","date: 2018 Q4<br />.val: 6151319.00000","date: 2019 Q1<br />.val: 5947650.50000","date: 2019 Q2<br />.val: 6038705.00000","date: 2019 Q3<br />.val: 6006225.00000","date: 2019 Q4<br />.val: 6089150.50000","date: 2020 Q1<br />.val: 5862506.00000","date: 2020 Q2<br />.val: 4813221.50000","date: 2020 Q3<br />.val: 5518064.00000","date: 2020 Q4<br />.val: 5876143.00000","date: 2021 Q1<br />.val: 5710210.50000","date: 2021 Q2<br />.val: 5905829.00000","date: 2021 Q3<br />.val: 5801183.00000","date: 2021 Q4<br />.val: 5987609.00000"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[3750276.6410826906,3826573.9499094198,3898126.0011881981,3962838.1754337698,4021889.6945594042,4081390.3467057599,4127893.0648374045,4170641.2937565222,4204761.7433008235,4237909.9973442741,4270692.6964544337,4310157.8036956629,4357558.3747051461,4393591.3314919174,4427031.8772664256,4442210.699607552,4445935.8392819082,4438485.4641222926,4423109.5324320216,4424534.4943882814,4431647.5096600959,4442795.1508675441,4457841.7105320301,4458419.7261700109,4459603.9077576417,4466260.6666679159,4490723.8615311449,4531957.2166820448,4574043.1372180423,4613335.1243668441,4645508.6764677754,4673674.7073998107,4701324.9969905512,4732006.0710845059,4770992.2485098643,4829803.770795092,4889171.6550774099,4938870.0197964432,4971754.7325253785,4995662.1590526104,5021479.7831253,5048635.860569437,5067700.2369480459,5074975.0457646446,5066631.1783567397,5058318.1722162785,5049092.1374567347,5041251.7102666683,4971393.2836500723,4919992.3610907458,4838610.9021180738,4899873.9667685824,4954309.625186231,5003303.3849179465,5048501.7197036911,5092973.099370067,5137669.7917496646,5185874.9496466704,5233603.7743049124,5276462.8232587501,5311653.2265163912,5345844.1955651995,5377029.0320928572,5396192.7012175806,5414551.1803770736,5427191.8464829177,5447138.8767466675,5474894.7739522466,5507427.9246856878,5546152.9495167425,5585591.5902145971,5622190.2338953754,5654781.2117843488,5685411.6863736771,5712189.0371710826,5739581.9536221381,5770219.5969940349,5801297.55310049,5838987.100507387,5865223.9554484244,5883577.0373015115,5902126.1376178497,5924994.8415296227,5965409.8196671829,6007006.1249040253,6034069.6441528546,6049443.5551133743,6049778.3470116341,6038587.7531157266,6027113.9855177654,6007748.9483022243,5986995.4573099725,5822415.7065199642,5687739.0605559405,5541850.9165665312,5541850.9165665312,5683288.0671499707,5750829.3186155725,5818121.4650352784,5883823.3162017548],"text":["date: 1997 Q1<br />.val: 3750276.64108","date: 1997 Q2<br />.val: 3826573.94991","date: 1997 Q3<br />.val: 3898126.00119","date: 1997 Q4<br />.val: 3962838.17543","date: 1998 Q1<br />.val: 4021889.69456","date: 1998 Q2<br />.val: 4081390.34671","date: 1998 Q3<br />.val: 4127893.06484","date: 1998 Q4<br />.val: 4170641.29376","date: 1999 Q1<br />.val: 4204761.74330","date: 1999 Q2<br />.val: 4237909.99734","date: 1999 Q3<br />.val: 4270692.69645","date: 1999 Q4<br />.val: 4310157.80370","date: 2000 Q1<br />.val: 4357558.37471","date: 2000 Q2<br />.val: 4393591.33149","date: 2000 Q3<br />.val: 4427031.87727","date: 2000 Q4<br />.val: 4442210.69961","date: 2001 Q1<br />.val: 4445935.83928","date: 2001 Q2<br />.val: 4438485.46412","date: 2001 Q3<br />.val: 4423109.53243","date: 2001 Q4<br />.val: 4424534.49439","date: 2002 Q1<br />.val: 4431647.50966","date: 2002 Q2<br />.val: 4442795.15087","date: 2002 Q3<br />.val: 4457841.71053","date: 2002 Q4<br />.val: 4458419.72617","date: 2003 Q1<br />.val: 4459603.90776","date: 2003 Q2<br />.val: 4466260.66667","date: 2003 Q3<br />.val: 4490723.86153","date: 2003 Q4<br />.val: 4531957.21668","date: 2004 Q1<br />.val: 4574043.13722","date: 2004 Q2<br />.val: 4613335.12437","date: 2004 Q3<br />.val: 4645508.67647","date: 2004 Q4<br />.val: 4673674.70740","date: 2005 Q1<br />.val: 4701324.99699","date: 2005 Q2<br />.val: 4732006.07108","date: 2005 Q3<br />.val: 4770992.24851","date: 2005 Q4<br />.val: 4829803.77080","date: 2006 Q1<br />.val: 4889171.65508","date: 2006 Q2<br />.val: 4938870.01980","date: 2006 Q3<br />.val: 4971754.73253","date: 2006 Q4<br />.val: 4995662.15905","date: 2007 Q1<br />.val: 5021479.78313","date: 2007 Q2<br />.val: 5048635.86057","date: 2007 Q3<br />.val: 5067700.23695","date: 2007 Q4<br />.val: 5074975.04576","date: 2008 Q1<br />.val: 5066631.17836","date: 2008 Q2<br />.val: 5058318.17222","date: 2008 Q3<br />.val: 5049092.13746","date: 2008 Q4<br />.val: 5041251.71027","date: 2009 Q1<br />.val: 4971393.28365","date: 2009 Q2<br />.val: 4919992.36109","date: 2009 Q3<br />.val: 4838610.90212","date: 2009 Q4<br />.val: 4899873.96677","date: 2010 Q1<br />.val: 4954309.62519","date: 2010 Q2<br />.val: 5003303.38492","date: 2010 Q3<br />.val: 5048501.71970","date: 2010 Q4<br />.val: 5092973.09937","date: 2011 Q1<br />.val: 5137669.79175","date: 2011 Q2<br />.val: 5185874.94965","date: 2011 Q3<br />.val: 5233603.77430","date: 2011 Q4<br />.val: 5276462.82326","date: 2012 Q1<br />.val: 5311653.22652","date: 2012 Q2<br />.val: 5345844.19557","date: 2012 Q3<br />.val: 5377029.03209","date: 2012 Q4<br />.val: 5396192.70122","date: 2013 Q1<br />.val: 5414551.18038","date: 2013 Q2<br />.val: 5427191.84648","date: 2013 Q3<br />.val: 5447138.87675","date: 2013 Q4<br />.val: 5474894.77395","date: 2014 Q1<br />.val: 5507427.92469","date: 2014 Q2<br />.val: 5546152.94952","date: 2014 Q3<br />.val: 5585591.59021","date: 2014 Q4<br />.val: 5622190.23390","date: 2015 Q1<br />.val: 5654781.21178","date: 2015 Q2<br />.val: 5685411.68637","date: 2015 Q3<br />.val: 5712189.03717","date: 2015 Q4<br />.val: 5739581.95362","date: 2016 Q1<br />.val: 5770219.59699","date: 2016 Q2<br />.val: 5801297.55310","date: 2016 Q3<br />.val: 5838987.10051","date: 2016 Q4<br />.val: 5865223.95545","date: 2017 Q1<br />.val: 5883577.03730","date: 2017 Q2<br />.val: 5902126.13762","date: 2017 Q3<br />.val: 5924994.84153","date: 2017 Q4<br />.val: 5965409.81967","date: 2018 Q1<br />.val: 6007006.12490","date: 2018 Q2<br />.val: 6034069.64415","date: 2018 Q3<br />.val: 6049443.55511","date: 2018 Q4<br />.val: 6049778.34701","date: 2019 Q1<br />.val: 6038587.75312","date: 2019 Q2<br />.val: 6027113.98552","date: 2019 Q3<br />.val: 6007748.94830","date: 2019 Q4<br />.val: 5986995.45731","date: 2020 Q1<br />.val: 5822415.70652","date: 2020 Q2<br />.val: 5687739.06056","date: 2020 Q3<br />.val: 5541850.91657","date: 2020 Q4<br />.val: 5541850.91657","date: 2021 Q1<br />.val: 5683288.06715","date: 2021 Q2<br />.val: 5750829.31862","date: 2021 Q3<br />.val: 5818121.46504","date: 2021 Q4<br />.val: 5883823.31620"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[-35683.422476647029,58148.927552858739,-2911.7931488897534,-19485.221659677914,-35603.492549623086,58295.844681028488,-3764.6675151953459,-18846.657500831436,-35544.31356374266,58397.851350593468,-4678.3082566620733,-18257.956223283687,-34826.509738519635,58654.010320396985,-6965.9323499406246,-16989.182224221324,-33982.099495528331,59102.14645164457,-8968.9516755728109,-15383.315468290592,-36013.097119609462,61782.32702064851,-13341.853724902159,-10603.939866351924,-38236.870006636927,64623.306251798524,-17132.441596556058,-5043.8338682183003,-47829.968163942576,69047.541910486005,-18829.56184082375,4363.2361108458208,-58565.417870217694,72639.219355080306,-21001.832879951187,13472.704416521616,-68364.803928137175,72052.332848519814,-20073.46220200479,24804.416927908405,-78932.528481555535,71186.915910213866,-18755.008777372481,37167.735954066142,-89042.49183686632,62124.472598956891,-13703.420185907842,51485.289733331767,-99073.096448116252,52973.410266999643,-8623.9304168804483,66187.580709864444,-107972.32940110979,45300.709924278446,-7990.3266908326032,79558.393119689601,-115816.4844975544,37803.665624203284,-8192.5197931075454,91261.922417979818,-119702.32400492119,36064.688390588955,-11145.839793571164,98930.256992660448,-123514.47807806553,34401.13233500559,-14283.76527259051,106209.44925636744,-124218.42458051768,34373.739451317102,-19608.210662572263,110267.32891827324,-124165.01401354086,34706.085175549473,-25136.294151865182,113608.95548127613,-121253.50053766022,32933.524562310282,-25248.917762059304,112234.80812814977,-118303.47550962416,31445.811749986056,-24960.577411861344,111282.84510286259,-117436.83864390706,30972.818530993842,-24504.917159176912,110441.15890743057,-116553.41852506182,30506.324494189761,-24028.477409948595,109635.15146521965,-115894.1088302584,30208.784105868188,-23786.916566531458,109096.89199464035,-115253.38106801611,29899.373589902047,-23542.217733411515,108575.64399172674],"text":["date: 1997 Q1<br />.val:  -35683.42248","date: 1997 Q2<br />.val:   58148.92755","date: 1997 Q3<br />.val:   -2911.79315","date: 1997 Q4<br />.val:  -19485.22166","date: 1998 Q1<br />.val:  -35603.49255","date: 1998 Q2<br />.val:   58295.84468","date: 1998 Q3<br />.val:   -3764.66752","date: 1998 Q4<br />.val:  -18846.65750","date: 1999 Q1<br />.val:  -35544.31356","date: 1999 Q2<br />.val:   58397.85135","date: 1999 Q3<br />.val:   -4678.30826","date: 1999 Q4<br />.val:  -18257.95622","date: 2000 Q1<br />.val:  -34826.50974","date: 2000 Q2<br />.val:   58654.01032","date: 2000 Q3<br />.val:   -6965.93235","date: 2000 Q4<br />.val:  -16989.18222","date: 2001 Q1<br />.val:  -33982.09950","date: 2001 Q2<br />.val:   59102.14645","date: 2001 Q3<br />.val:   -8968.95168","date: 2001 Q4<br />.val:  -15383.31547","date: 2002 Q1<br />.val:  -36013.09712","date: 2002 Q2<br />.val:   61782.32702","date: 2002 Q3<br />.val:  -13341.85372","date: 2002 Q4<br />.val:  -10603.93987","date: 2003 Q1<br />.val:  -38236.87001","date: 2003 Q2<br />.val:   64623.30625","date: 2003 Q3<br />.val:  -17132.44160","date: 2003 Q4<br />.val:   -5043.83387","date: 2004 Q1<br />.val:  -47829.96816","date: 2004 Q2<br />.val:   69047.54191","date: 2004 Q3<br />.val:  -18829.56184","date: 2004 Q4<br />.val:    4363.23611","date: 2005 Q1<br />.val:  -58565.41787","date: 2005 Q2<br />.val:   72639.21936","date: 2005 Q3<br />.val:  -21001.83288","date: 2005 Q4<br />.val:   13472.70442","date: 2006 Q1<br />.val:  -68364.80393","date: 2006 Q2<br />.val:   72052.33285","date: 2006 Q3<br />.val:  -20073.46220","date: 2006 Q4<br />.val:   24804.41693","date: 2007 Q1<br />.val:  -78932.52848","date: 2007 Q2<br />.val:   71186.91591","date: 2007 Q3<br />.val:  -18755.00878","date: 2007 Q4<br />.val:   37167.73595","date: 2008 Q1<br />.val:  -89042.49184","date: 2008 Q2<br />.val:   62124.47260","date: 2008 Q3<br />.val:  -13703.42019","date: 2008 Q4<br />.val:   51485.28973","date: 2009 Q1<br />.val:  -99073.09645","date: 2009 Q2<br />.val:   52973.41027","date: 2009 Q3<br />.val:   -8623.93042","date: 2009 Q4<br />.val:   66187.58071","date: 2010 Q1<br />.val: -107972.32940","date: 2010 Q2<br />.val:   45300.70992","date: 2010 Q3<br />.val:   -7990.32669","date: 2010 Q4<br />.val:   79558.39312","date: 2011 Q1<br />.val: -115816.48450","date: 2011 Q2<br />.val:   37803.66562","date: 2011 Q3<br />.val:   -8192.51979","date: 2011 Q4<br />.val:   91261.92242","date: 2012 Q1<br />.val: -119702.32400","date: 2012 Q2<br />.val:   36064.68839","date: 2012 Q3<br />.val:  -11145.83979","date: 2012 Q4<br />.val:   98930.25699","date: 2013 Q1<br />.val: -123514.47808","date: 2013 Q2<br />.val:   34401.13234","date: 2013 Q3<br />.val:  -14283.76527","date: 2013 Q4<br />.val:  106209.44926","date: 2014 Q1<br />.val: -124218.42458","date: 2014 Q2<br />.val:   34373.73945","date: 2014 Q3<br />.val:  -19608.21066","date: 2014 Q4<br />.val:  110267.32892","date: 2015 Q1<br />.val: -124165.01401","date: 2015 Q2<br />.val:   34706.08518","date: 2015 Q3<br />.val:  -25136.29415","date: 2015 Q4<br />.val:  113608.95548","date: 2016 Q1<br />.val: -121253.50054","date: 2016 Q2<br />.val:   32933.52456","date: 2016 Q3<br />.val:  -25248.91776","date: 2016 Q4<br />.val:  112234.80813","date: 2017 Q1<br />.val: -118303.47551","date: 2017 Q2<br />.val:   31445.81175","date: 2017 Q3<br />.val:  -24960.57741","date: 2017 Q4<br />.val:  111282.84510","date: 2018 Q1<br />.val: -117436.83864","date: 2018 Q2<br />.val:   30972.81853","date: 2018 Q3<br />.val:  -24504.91716","date: 2018 Q4<br />.val:  110441.15891","date: 2019 Q1<br />.val: -116553.41853","date: 2019 Q2<br />.val:   30506.32449","date: 2019 Q3<br />.val:  -24028.47741","date: 2019 Q4<br />.val:  109635.15147","date: 2020 Q1<br />.val: -115894.10883","date: 2020 Q2<br />.val:   30208.78411","date: 2020 Q3<br />.val:  -23786.91657","date: 2020 Q4<br />.val:  109096.89199","date: 2021 Q1<br />.val: -115253.38107","date: 2021 Q2<br />.val:   29899.37359","date: 2021 Q3<br />.val:  -23542.21773","date: 2021 Q4<br />.val:  108575.64399"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[-12195.468606043607,11361.122537721414,10848.791960691568,95005.546225908212,98017.297990218736,-4786.6913867881522,14071.352677790914,-4953.136255690828,7025.8202629191801,-64028.348694867454,-3393.8881977712736,-4102.3474723789841,89694.635033373721,13258.658187685534,85155.055083515123,3481.4826166694984,29104.260213620029,-29082.610573937185,26124.419243550859,-27428.678919990547,-125849.91254048608,-377.97788819298148,12501.143192872405,10799.21369634103,-18965.537751005031,-10217.972919714637,-8804.4199345884845,-15449.882813826203,20040.830945900641,10182.333722669631,-11334.114626951516,5305.5564893437549,-74837.579120333306,33.709560413844883,-29172.915629913099,-7443.9752116138116,19835.648850726895,18105.64735503681,7320.7296766266227,-10335.575980518945,-6147.7546437447891,7545.2235203487799,17763.771829326637,8408.2182812895626,-1858.1865198733285,129183.3551847646,88579.282729173079,0,-238005.18720195629,-266074.77135774586,-6934.4717011936009,24862.952521553263,-3369.7957851216197,-3463.5948422253132,9688.1069871410728,-3387.9924897570163,984.69274789001793,-52945.115270873532,12134.245488194749,1118.7543232701719,78994.09748852998,-1380.8839557887986,3868.8077007140964,22678.54178975895,-34586.202299008146,11784.021182077006,-7151.1114740772173,-14074.223208613694,3735.9998948294669,-487.68896805960685,-1436.3795520244166,2453.937186351046,11772.302229192108,-9363.2715492267162,65883.756980782375,8883.5908965859562,-14708.096456374973,5757.9223371995613,-10102.682745327242,18149.736423425376,61243.938208112493,-5990.4493678361177,-27217.764117761515,5499.3352299546823,2527.713739881292,33890.037316151895,9383.3620458031073,-8900.5059190643951,25616.165409334935,-18915.310011954978,22504.529107724316,-7480.1087751919404,155984.4023102941,-904726.34466180857,0,225195.19143882859,142175.81391804572,125100.30779452529,6603.7526981327683,-4789.9601934812963],"text":["date: 1997 Q1<br />.val:  -12195.46861","date: 1997 Q2<br />.val:   11361.12254","date: 1997 Q3<br />.val:   10848.79196","date: 1997 Q4<br />.val:   95005.54623","date: 1998 Q1<br />.val:   98017.29799","date: 1998 Q2<br />.val:   -4786.69139","date: 1998 Q3<br />.val:   14071.35268","date: 1998 Q4<br />.val:   -4953.13626","date: 1999 Q1<br />.val:    7025.82026","date: 1999 Q2<br />.val:  -64028.34869","date: 1999 Q3<br />.val:   -3393.88820","date: 1999 Q4<br />.val:   -4102.34747","date: 2000 Q1<br />.val:   89694.63503","date: 2000 Q2<br />.val:   13258.65819","date: 2000 Q3<br />.val:   85155.05508","date: 2000 Q4<br />.val:    3481.48262","date: 2001 Q1<br />.val:   29104.26021","date: 2001 Q2<br />.val:  -29082.61057","date: 2001 Q3<br />.val:   26124.41924","date: 2001 Q4<br />.val:  -27428.67892","date: 2002 Q1<br />.val: -125849.91254","date: 2002 Q2<br />.val:    -377.97789","date: 2002 Q3<br />.val:   12501.14319","date: 2002 Q4<br />.val:   10799.21370","date: 2003 Q1<br />.val:  -18965.53775","date: 2003 Q2<br />.val:  -10217.97292","date: 2003 Q3<br />.val:   -8804.41993","date: 2003 Q4<br />.val:  -15449.88281","date: 2004 Q1<br />.val:   20040.83095","date: 2004 Q2<br />.val:   10182.33372","date: 2004 Q3<br />.val:  -11334.11463","date: 2004 Q4<br />.val:    5305.55649","date: 2005 Q1<br />.val:  -74837.57912","date: 2005 Q2<br />.val:      33.70956","date: 2005 Q3<br />.val:  -29172.91563","date: 2005 Q4<br />.val:   -7443.97521","date: 2006 Q1<br />.val:   19835.64885","date: 2006 Q2<br />.val:   18105.64736","date: 2006 Q3<br />.val:    7320.72968","date: 2006 Q4<br />.val:  -10335.57598","date: 2007 Q1<br />.val:   -6147.75464","date: 2007 Q2<br />.val:    7545.22352","date: 2007 Q3<br />.val:   17763.77183","date: 2007 Q4<br />.val:    8408.21828","date: 2008 Q1<br />.val:   -1858.18652","date: 2008 Q2<br />.val:  129183.35518","date: 2008 Q3<br />.val:   88579.28273","date: 2008 Q4<br />.val:       0.00000","date: 2009 Q1<br />.val: -238005.18720","date: 2009 Q2<br />.val: -266074.77136","date: 2009 Q3<br />.val:   -6934.47170","date: 2009 Q4<br />.val:   24862.95252","date: 2010 Q1<br />.val:   -3369.79579","date: 2010 Q2<br />.val:   -3463.59484","date: 2010 Q3<br />.val:    9688.10699","date: 2010 Q4<br />.val:   -3387.99249","date: 2011 Q1<br />.val:     984.69275","date: 2011 Q2<br />.val:  -52945.11527","date: 2011 Q3<br />.val:   12134.24549","date: 2011 Q4<br />.val:    1118.75432","date: 2012 Q1<br />.val:   78994.09749","date: 2012 Q2<br />.val:   -1380.88396","date: 2012 Q3<br />.val:    3868.80770","date: 2012 Q4<br />.val:   22678.54179","date: 2013 Q1<br />.val:  -34586.20230","date: 2013 Q2<br />.val:   11784.02118","date: 2013 Q3<br />.val:   -7151.11147","date: 2013 Q4<br />.val:  -14074.22321","date: 2014 Q1<br />.val:    3735.99989","date: 2014 Q2<br />.val:    -487.68897","date: 2014 Q3<br />.val:   -1436.37955","date: 2014 Q4<br />.val:    2453.93719","date: 2015 Q1<br />.val:   11772.30223","date: 2015 Q2<br />.val:   -9363.27155","date: 2015 Q3<br />.val:   65883.75698","date: 2015 Q4<br />.val:    8883.59090","date: 2016 Q1<br />.val:  -14708.09646","date: 2016 Q2<br />.val:    5757.92234","date: 2016 Q3<br />.val:  -10102.68275","date: 2016 Q4<br />.val:   18149.73642","date: 2017 Q1<br />.val:   61243.93821","date: 2017 Q2<br />.val:   -5990.44937","date: 2017 Q3<br />.val:  -27217.76412","date: 2017 Q4<br />.val:    5499.33523","date: 2018 Q1<br />.val:    2527.71374","date: 2018 Q2<br />.val:   33890.03732","date: 2018 Q3<br />.val:    9383.36205","date: 2018 Q4<br />.val:   -8900.50592","date: 2019 Q1<br />.val:   25616.16541","date: 2019 Q2<br />.val:  -18915.31001","date: 2019 Q3<br />.val:   22504.52911","date: 2019 Q4<br />.val:   -7480.10878","date: 2020 Q1<br />.val:  155984.40231","date: 2020 Q2<br />.val: -904726.34466","date: 2020 Q3<br />.val:       0.00000","date: 2020 Q4<br />.val:  225195.19144","date: 2021 Q1<br />.val:  142175.81392","date: 2021 Q2<br />.val:  125100.30779","date: 2021 Q3<br />.val:    6603.75270","date: 2021 Q4<br />.val:   -4789.96019"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[4807944.684969103,5045772.065030897,5045772.065030897,4807944.684969103,4807944.684969103],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[4781113.8040162651,5018941.1840780592,5018941.1840780592,4781113.8040162651,4781113.8040162651],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[-124218.42458051768,113608.95548127613,113608.95548127613,-124218.42458051768,-124218.42458051768],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[-458679.26664238691,-220851.88658059307,-220851.88658059307,-458679.26664238691,-458679.26664238691],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":18.99543378995434,"b":40.182648401826491,"l":51.872146118721474},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"STL decomposition","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[9025.75,19371.25],"tickmode":"array","ticktext":["2000 Q1","2010 Q1","2020 Q1"],"tickvals":[10957,14610,18262],"categoryorder":"array","categoryarray":["2000 Q1","2010 Q1","2020 Q1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y4","title":"","hoverformat":".2f"},"annotations":[{"text":"date","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-21.917808219178088},{"text":"price","x":1,"y":0.87785388127853881,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"trend","x":1,"y":0.625,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"season_year","x":1,"y":0.375,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"remainder","x":1,"y":0.12214611872146118,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"yaxis":{"domain":[0.75570776255707761,1],"automargin":true,"type":"linear","autorange":false,"range":[3579951.6875,6273765.0625],"tickmode":"array","ticktext":["4000000","4500000","5000000","5500000","6000000"],"tickvals":[4000000,4500000,5000000,5500000,6000000],"categoryorder":"array","categoryarray":["4000000","4500000","5000000","5500000","6000000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.75570776255707761,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.75570776255707761,"y1":1,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.50570776255707761,"y1":0.74429223744292239},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.50570776255707761,"y1":0.74429223744292239,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.25570776255707761,"y1":0.49429223744292239},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.25570776255707761,"y1":0.49429223744292239,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.24429223744292236},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0,"y1":0.24429223744292236,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[3635301.5557862432,6164753.4323080815],"tickmode":"array","ticktext":["4000000","4500000","5000000","5500000","6000000"],"tickvals":[4000000,4500000,5000000,5500000,6000000],"categoryorder":"array","categoryarray":["4000000","4500000","5000000","5500000","6000000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.50570776255707761,0.74429223744292239],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-136109.79358360736,125500.32448436582],"tickmode":"array","ticktext":["-1e+05","-5e+04","0e+00","5e+04","1e+05"],"tickvals":[-100000,-50000,0,50000,100000],"categoryorder":"array","categoryarray":["-1e+05","-5e+04","0e+00","5e+04","1e+05"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.25570776255707761,0.49429223744292239],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-961222.42146684043,281691.26824386045],"tickmode":"array","ticktext":["-9e+05","-6e+05","-3e+05","0e+00"],"tickvals":[-900000,-600000,-300000,0],"categoryorder":"array","categoryarray":["-9e+05","-6e+05","-3e+05","0e+00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.24429223744292236],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1a6f43208c6f":{"x":{},"y":{},"type":"scatter"},"1a6f2537f365":{"ymin":{},"ymax":{},"xmin":{},"xmax":{}}},"cur_data":"1a6f43208c6f","visdat":{"1a6f43208c6f":["function (y) ","x"],"1a6f2537f365":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>The STL decomposition shows that the variance of the seasonal component has been increasing. We could try using a <strong>log transformation</strong> to counter this.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="fu">log</span>(price)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Log of the Real GDP of Mexico"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">stl =</span> <span class="fu">STL</span>(<span class="fu">log</span>(price) <span class="sc">~</span> <span class="fu">season</span>(<span class="at">window =</span> <span class="st">"periodic"</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-db955671c4d56c999afe" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-db955671c4d56c999afe">{"x":{"data":[{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[15.124491208267395,15.175482504087086,15.178040519320948,15.211348855489106,15.222661769903164,15.234973581428724,15.235771408234696,15.237857518097812,15.244922656369248,15.258251294762877,15.265394669969048,15.271283755804216,15.29993532286116,15.311892643862031,15.320747504425112,15.303617322630203,15.306403194310551,15.312564458746674,15.306224617312033,15.292952469884462,15.26707391554716,15.320520741781639,15.309986676294834,15.31034873765271,15.29766074545087,15.32416988608693,15.311732066787545,15.322132159948412,15.329814155128975,15.36148989923818,15.344897179354668,15.359522835892069,15.334568954865718,15.385100792743918,15.36749254171704,15.391563854054116,15.392558017816471,15.4307372828459,15.416715068778307,15.426972620423793,15.412146777272772,15.450103025057565,15.438202052376647,15.448772608412876,15.420082751966603,15.473667393935015,15.449439696858262,15.443325965028173,15.348998957495022,15.36453816311494,15.388917584332939,15.423131721108316,15.393038210646351,15.433936060737858,15.434938305421738,15.458217565448855,15.429505670569641,15.458525112630031,15.471363530525631,15.496123080162587,15.477720221330239,15.498297068586369,15.496292282923259,15.52349005993363,15.474966547041289,15.51540635136414,15.506658218556707,15.532372256049992,15.499489084663285,15.53470632358038,15.531926137761241,15.562082876865947,15.527936102994651,15.557861709505373,15.565220978065064,15.584014109145263,15.544376019767201,15.580239471240992,15.573995089497922,15.60653784254389,15.577930038509352,15.595126846299971,15.585844889337492,15.620875715284143,15.589122519429823,15.623624313829254,15.612974061546463,15.632177088331682,15.598506825588984,15.61370014294967,15.608306989361171,15.622019138987508,15.584087715190305,15.386877168418907,15.523537632097327,15.586411152262968,15.557766446101551,15.591450387260339,15.573572420235751,15.605202725128509],"text":["date: 1997 Q1<br />.val: 15.1244912083","date: 1997 Q2<br />.val: 15.1754825041","date: 1997 Q3<br />.val: 15.1780405193","date: 1997 Q4<br />.val: 15.2113488555","date: 1998 Q1<br />.val: 15.2226617699","date: 1998 Q2<br />.val: 15.2349735814","date: 1998 Q3<br />.val: 15.2357714082","date: 1998 Q4<br />.val: 15.2378575181","date: 1999 Q1<br />.val: 15.2449226564","date: 1999 Q2<br />.val: 15.2582512948","date: 1999 Q3<br />.val: 15.2653946700","date: 1999 Q4<br />.val: 15.2712837558","date: 2000 Q1<br />.val: 15.2999353229","date: 2000 Q2<br />.val: 15.3118926439","date: 2000 Q3<br />.val: 15.3207475044","date: 2000 Q4<br />.val: 15.3036173226","date: 2001 Q1<br />.val: 15.3064031943","date: 2001 Q2<br />.val: 15.3125644587","date: 2001 Q3<br />.val: 15.3062246173","date: 2001 Q4<br />.val: 15.2929524699","date: 2002 Q1<br />.val: 15.2670739155","date: 2002 Q2<br />.val: 15.3205207418","date: 2002 Q3<br />.val: 15.3099866763","date: 2002 Q4<br />.val: 15.3103487377","date: 2003 Q1<br />.val: 15.2976607455","date: 2003 Q2<br />.val: 15.3241698861","date: 2003 Q3<br />.val: 15.3117320668","date: 2003 Q4<br />.val: 15.3221321599","date: 2004 Q1<br />.val: 15.3298141551","date: 2004 Q2<br />.val: 15.3614898992","date: 2004 Q3<br />.val: 15.3448971794","date: 2004 Q4<br />.val: 15.3595228359","date: 2005 Q1<br />.val: 15.3345689549","date: 2005 Q2<br />.val: 15.3851007927","date: 2005 Q3<br />.val: 15.3674925417","date: 2005 Q4<br />.val: 15.3915638541","date: 2006 Q1<br />.val: 15.3925580178","date: 2006 Q2<br />.val: 15.4307372828","date: 2006 Q3<br />.val: 15.4167150688","date: 2006 Q4<br />.val: 15.4269726204","date: 2007 Q1<br />.val: 15.4121467773","date: 2007 Q2<br />.val: 15.4501030251","date: 2007 Q3<br />.val: 15.4382020524","date: 2007 Q4<br />.val: 15.4487726084","date: 2008 Q1<br />.val: 15.4200827520","date: 2008 Q2<br />.val: 15.4736673939","date: 2008 Q3<br />.val: 15.4494396969","date: 2008 Q4<br />.val: 15.4433259650","date: 2009 Q1<br />.val: 15.3489989575","date: 2009 Q2<br />.val: 15.3645381631","date: 2009 Q3<br />.val: 15.3889175843","date: 2009 Q4<br />.val: 15.4231317211","date: 2010 Q1<br />.val: 15.3930382106","date: 2010 Q2<br />.val: 15.4339360607","date: 2010 Q3<br />.val: 15.4349383054","date: 2010 Q4<br />.val: 15.4582175654","date: 2011 Q1<br />.val: 15.4295056706","date: 2011 Q2<br />.val: 15.4585251126","date: 2011 Q3<br />.val: 15.4713635305","date: 2011 Q4<br />.val: 15.4961230802","date: 2012 Q1<br />.val: 15.4777202213","date: 2012 Q2<br />.val: 15.4982970686","date: 2012 Q3<br />.val: 15.4962922829","date: 2012 Q4<br />.val: 15.5234900599","date: 2013 Q1<br />.val: 15.4749665470","date: 2013 Q2<br />.val: 15.5154063514","date: 2013 Q3<br />.val: 15.5066582186","date: 2013 Q4<br />.val: 15.5323722560","date: 2014 Q1<br />.val: 15.4994890847","date: 2014 Q2<br />.val: 15.5347063236","date: 2014 Q3<br />.val: 15.5319261378","date: 2014 Q4<br />.val: 15.5620828769","date: 2015 Q1<br />.val: 15.5279361030","date: 2015 Q2<br />.val: 15.5578617095","date: 2015 Q3<br />.val: 15.5652209781","date: 2015 Q4<br />.val: 15.5840141091","date: 2016 Q1<br />.val: 15.5443760198","date: 2016 Q2<br />.val: 15.5802394712","date: 2016 Q3<br />.val: 15.5739950895","date: 2016 Q4<br />.val: 15.6065378425","date: 2017 Q1<br />.val: 15.5779300385","date: 2017 Q2<br />.val: 15.5951268463","date: 2017 Q3<br />.val: 15.5858448893","date: 2017 Q4<br />.val: 15.6208757153","date: 2018 Q1<br />.val: 15.5891225194","date: 2018 Q2<br />.val: 15.6236243138","date: 2018 Q3<br />.val: 15.6129740615","date: 2018 Q4<br />.val: 15.6321770883","date: 2019 Q1<br />.val: 15.5985068256","date: 2019 Q2<br />.val: 15.6137001429","date: 2019 Q3<br />.val: 15.6083069894","date: 2019 Q4<br />.val: 15.6220191390","date: 2020 Q1<br />.val: 15.5840877152","date: 2020 Q2<br />.val: 15.3868771684","date: 2020 Q3<br />.val: 15.5235376321","date: 2020 Q4<br />.val: 15.5864111523","date: 2021 Q1<br />.val: 15.5577664461","date: 2021 Q2<br />.val: 15.5914503873","date: 2021 Q3<br />.val: 15.5735724202","date: 2021 Q4<br />.val: 15.6052027251"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[15.144059090147202,15.16299921623974,15.181750447658478,15.199553247990915,15.213789581733248,15.225718007400612,15.233235122836575,15.24079072209576,15.247392845955057,15.255526080751476,15.260531994906369,15.271994476438648,15.286023377252627,15.29958671168032,15.308837967757743,15.31096169458243,15.309414238682493,15.306995620415606,15.299507254899424,15.295251948914736,15.296633945953287,15.300845452429389,15.306622698371712,15.309909977932628,15.311048644388817,15.313127580096614,15.317423635737676,15.326714645155471,15.336469790483511,15.345618352263857,15.349371241185256,15.352155047615842,15.358509788256923,15.365742874707408,15.376202297892238,15.388981914530458,15.40225551920363,15.413226484104428,15.419123843271747,15.423479205506613,15.429242877850589,15.435141113991332,15.438567329601705,15.440736810398038,15.444950151543473,15.446187425356824,15.44534467940942,15.433612754184031,15.419466244379016,15.409350647806191,15.393376684885103,15.404872847594149,15.415331149906798,15.425264719817566,15.434934212381227,15.442733428823011,15.449689551687976,15.458729720360495,15.470164601776887,15.481910371291972,15.489353628436557,15.494862244892174,15.498421279993678,15.500503819497112,15.503355894200386,15.50544292107687,15.510662794682997,15.516027103456594,15.521312379330412,15.527579715581425,15.535519950269677,15.542323942736115,15.548729360105854,15.555303562929879,15.561399810963021,15.566247650804007,15.569247803563623,15.572556094236853,15.580243643705206,15.587059253268698,15.590408975449725,15.592256381798148,15.595743854549148,15.601482750976988,15.608505538214112,15.612835481147403,15.615793970134147,15.616131919986426,15.613983825744512,15.611512257568176,15.608929462048218,15.607342157609892,15.603445277372739,15.593615192578444,15.585912619348608,15.57544857081295,15.577384605033764,15.580427141374773,15.584782207178385,15.589225417103226],"text":["date: 1997 Q1<br />.val: 15.1440590901","date: 1997 Q2<br />.val: 15.1629992162","date: 1997 Q3<br />.val: 15.1817504477","date: 1997 Q4<br />.val: 15.1995532480","date: 1998 Q1<br />.val: 15.2137895817","date: 1998 Q2<br />.val: 15.2257180074","date: 1998 Q3<br />.val: 15.2332351228","date: 1998 Q4<br />.val: 15.2407907221","date: 1999 Q1<br />.val: 15.2473928460","date: 1999 Q2<br />.val: 15.2555260808","date: 1999 Q3<br />.val: 15.2605319949","date: 1999 Q4<br />.val: 15.2719944764","date: 2000 Q1<br />.val: 15.2860233773","date: 2000 Q2<br />.val: 15.2995867117","date: 2000 Q3<br />.val: 15.3088379678","date: 2000 Q4<br />.val: 15.3109616946","date: 2001 Q1<br />.val: 15.3094142387","date: 2001 Q2<br />.val: 15.3069956204","date: 2001 Q3<br />.val: 15.2995072549","date: 2001 Q4<br />.val: 15.2952519489","date: 2002 Q1<br />.val: 15.2966339460","date: 2002 Q2<br />.val: 15.3008454524","date: 2002 Q3<br />.val: 15.3066226984","date: 2002 Q4<br />.val: 15.3099099779","date: 2003 Q1<br />.val: 15.3110486444","date: 2003 Q2<br />.val: 15.3131275801","date: 2003 Q3<br />.val: 15.3174236357","date: 2003 Q4<br />.val: 15.3267146452","date: 2004 Q1<br />.val: 15.3364697905","date: 2004 Q2<br />.val: 15.3456183523","date: 2004 Q3<br />.val: 15.3493712412","date: 2004 Q4<br />.val: 15.3521550476","date: 2005 Q1<br />.val: 15.3585097883","date: 2005 Q2<br />.val: 15.3657428747","date: 2005 Q3<br />.val: 15.3762022979","date: 2005 Q4<br />.val: 15.3889819145","date: 2006 Q1<br />.val: 15.4022555192","date: 2006 Q2<br />.val: 15.4132264841","date: 2006 Q3<br />.val: 15.4191238433","date: 2006 Q4<br />.val: 15.4234792055","date: 2007 Q1<br />.val: 15.4292428779","date: 2007 Q2<br />.val: 15.4351411140","date: 2007 Q3<br />.val: 15.4385673296","date: 2007 Q4<br />.val: 15.4407368104","date: 2008 Q1<br />.val: 15.4449501515","date: 2008 Q2<br />.val: 15.4461874254","date: 2008 Q3<br />.val: 15.4453446794","date: 2008 Q4<br />.val: 15.4336127542","date: 2009 Q1<br />.val: 15.4194662444","date: 2009 Q2<br />.val: 15.4093506478","date: 2009 Q3<br />.val: 15.3933766849","date: 2009 Q4<br />.val: 15.4048728476","date: 2010 Q1<br />.val: 15.4153311499","date: 2010 Q2<br />.val: 15.4252647198","date: 2010 Q3<br />.val: 15.4349342124","date: 2010 Q4<br />.val: 15.4427334288","date: 2011 Q1<br />.val: 15.4496895517","date: 2011 Q2<br />.val: 15.4587297204","date: 2011 Q3<br />.val: 15.4701646018","date: 2011 Q4<br />.val: 15.4819103713","date: 2012 Q1<br />.val: 15.4893536284","date: 2012 Q2<br />.val: 15.4948622449","date: 2012 Q3<br />.val: 15.4984212800","date: 2012 Q4<br />.val: 15.5005038195","date: 2013 Q1<br />.val: 15.5033558942","date: 2013 Q2<br />.val: 15.5054429211","date: 2013 Q3<br />.val: 15.5106627947","date: 2013 Q4<br />.val: 15.5160271035","date: 2014 Q1<br />.val: 15.5213123793","date: 2014 Q2<br />.val: 15.5275797156","date: 2014 Q3<br />.val: 15.5355199503","date: 2014 Q4<br />.val: 15.5423239427","date: 2015 Q1<br />.val: 15.5487293601","date: 2015 Q2<br />.val: 15.5553035629","date: 2015 Q3<br />.val: 15.5613998110","date: 2015 Q4<br />.val: 15.5662476508","date: 2016 Q1<br />.val: 15.5692478036","date: 2016 Q2<br />.val: 15.5725560942","date: 2016 Q3<br />.val: 15.5802436437","date: 2016 Q4<br />.val: 15.5870592533","date: 2017 Q1<br />.val: 15.5904089754","date: 2017 Q2<br />.val: 15.5922563818","date: 2017 Q3<br />.val: 15.5957438545","date: 2017 Q4<br />.val: 15.6014827510","date: 2018 Q1<br />.val: 15.6085055382","date: 2018 Q2<br />.val: 15.6128354811","date: 2018 Q3<br />.val: 15.6157939701","date: 2018 Q4<br />.val: 15.6161319200","date: 2019 Q1<br />.val: 15.6139838257","date: 2019 Q2<br />.val: 15.6115122576","date: 2019 Q3<br />.val: 15.6089294620","date: 2019 Q4<br />.val: 15.6073421576","date: 2020 Q1<br />.val: 15.6034452774","date: 2020 Q2<br />.val: 15.5936151926","date: 2020 Q3<br />.val: 15.5859126193","date: 2020 Q4<br />.val: 15.5754485708","date: 2021 Q1<br />.val: 15.5773846050","date: 2021 Q2<br />.val: 15.5804271414","date: 2021 Q3<br />.val: 15.5847822072","date: 2021 Q4<br />.val: 15.5892254171"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211,-0.017991638528009012,0.0095441504898322212,-0.0017225729317782519,0.010170081673036211],"text":["date: 1997 Q1<br />.val: -0.0179916385","date: 1997 Q2<br />.val:  0.0095441505","date: 1997 Q3<br />.val: -0.0017225729","date: 1997 Q4<br />.val:  0.0101700817","date: 1998 Q1<br />.val: -0.0179916385","date: 1998 Q2<br />.val:  0.0095441505","date: 1998 Q3<br />.val: -0.0017225729","date: 1998 Q4<br />.val:  0.0101700817","date: 1999 Q1<br />.val: -0.0179916385","date: 1999 Q2<br />.val:  0.0095441505","date: 1999 Q3<br />.val: -0.0017225729","date: 1999 Q4<br />.val:  0.0101700817","date: 2000 Q1<br />.val: -0.0179916385","date: 2000 Q2<br />.val:  0.0095441505","date: 2000 Q3<br />.val: -0.0017225729","date: 2000 Q4<br />.val:  0.0101700817","date: 2001 Q1<br />.val: -0.0179916385","date: 2001 Q2<br />.val:  0.0095441505","date: 2001 Q3<br />.val: -0.0017225729","date: 2001 Q4<br />.val:  0.0101700817","date: 2002 Q1<br />.val: -0.0179916385","date: 2002 Q2<br />.val:  0.0095441505","date: 2002 Q3<br />.val: -0.0017225729","date: 2002 Q4<br />.val:  0.0101700817","date: 2003 Q1<br />.val: -0.0179916385","date: 2003 Q2<br />.val:  0.0095441505","date: 2003 Q3<br />.val: -0.0017225729","date: 2003 Q4<br />.val:  0.0101700817","date: 2004 Q1<br />.val: -0.0179916385","date: 2004 Q2<br />.val:  0.0095441505","date: 2004 Q3<br />.val: -0.0017225729","date: 2004 Q4<br />.val:  0.0101700817","date: 2005 Q1<br />.val: -0.0179916385","date: 2005 Q2<br />.val:  0.0095441505","date: 2005 Q3<br />.val: -0.0017225729","date: 2005 Q4<br />.val:  0.0101700817","date: 2006 Q1<br />.val: -0.0179916385","date: 2006 Q2<br />.val:  0.0095441505","date: 2006 Q3<br />.val: -0.0017225729","date: 2006 Q4<br />.val:  0.0101700817","date: 2007 Q1<br />.val: -0.0179916385","date: 2007 Q2<br />.val:  0.0095441505","date: 2007 Q3<br />.val: -0.0017225729","date: 2007 Q4<br />.val:  0.0101700817","date: 2008 Q1<br />.val: -0.0179916385","date: 2008 Q2<br />.val:  0.0095441505","date: 2008 Q3<br />.val: -0.0017225729","date: 2008 Q4<br />.val:  0.0101700817","date: 2009 Q1<br />.val: -0.0179916385","date: 2009 Q2<br />.val:  0.0095441505","date: 2009 Q3<br />.val: -0.0017225729","date: 2009 Q4<br />.val:  0.0101700817","date: 2010 Q1<br />.val: -0.0179916385","date: 2010 Q2<br />.val:  0.0095441505","date: 2010 Q3<br />.val: -0.0017225729","date: 2010 Q4<br />.val:  0.0101700817","date: 2011 Q1<br />.val: -0.0179916385","date: 2011 Q2<br />.val:  0.0095441505","date: 2011 Q3<br />.val: -0.0017225729","date: 2011 Q4<br />.val:  0.0101700817","date: 2012 Q1<br />.val: -0.0179916385","date: 2012 Q2<br />.val:  0.0095441505","date: 2012 Q3<br />.val: -0.0017225729","date: 2012 Q4<br />.val:  0.0101700817","date: 2013 Q1<br />.val: -0.0179916385","date: 2013 Q2<br />.val:  0.0095441505","date: 2013 Q3<br />.val: -0.0017225729","date: 2013 Q4<br />.val:  0.0101700817","date: 2014 Q1<br />.val: -0.0179916385","date: 2014 Q2<br />.val:  0.0095441505","date: 2014 Q3<br />.val: -0.0017225729","date: 2014 Q4<br />.val:  0.0101700817","date: 2015 Q1<br />.val: -0.0179916385","date: 2015 Q2<br />.val:  0.0095441505","date: 2015 Q3<br />.val: -0.0017225729","date: 2015 Q4<br />.val:  0.0101700817","date: 2016 Q1<br />.val: -0.0179916385","date: 2016 Q2<br />.val:  0.0095441505","date: 2016 Q3<br />.val: -0.0017225729","date: 2016 Q4<br />.val:  0.0101700817","date: 2017 Q1<br />.val: -0.0179916385","date: 2017 Q2<br />.val:  0.0095441505","date: 2017 Q3<br />.val: -0.0017225729","date: 2017 Q4<br />.val:  0.0101700817","date: 2018 Q1<br />.val: -0.0179916385","date: 2018 Q2<br />.val:  0.0095441505","date: 2018 Q3<br />.val: -0.0017225729","date: 2018 Q4<br />.val:  0.0101700817","date: 2019 Q1<br />.val: -0.0179916385","date: 2019 Q2<br />.val:  0.0095441505","date: 2019 Q3<br />.val: -0.0017225729","date: 2019 Q4<br />.val:  0.0101700817","date: 2020 Q1<br />.val: -0.0179916385","date: 2020 Q2<br />.val:  0.0095441505","date: 2020 Q3<br />.val: -0.0017225729","date: 2020 Q4<br />.val:  0.0101700817","date: 2021 Q1<br />.val: -0.0179916385","date: 2021 Q2<br />.val:  0.0095441505","date: 2021 Q3<br />.val: -0.0017225729","date: 2021 Q4<br />.val:  0.0101700817"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536,18628,18718,18809,18901],"y":[-0.0015762433517974017,0.0029391373575133883,-0.0019873554057525666,0.0016255258251547389,0.026863826697924864,-0.0002885764617204245,0.0042588583298979188,-0.013103285670984732,0.015521448942200422,-0.0068189364784316808,0.0065852479944563669,-0.010880802307468684,0.031903584136541596,0.0027617816918787952,0.013632109599146958,-0.017514453625263826,0.014980594156067895,-0.0039753121587633444,0.0084399353443860292,-0.012469560703310734,-0.011568391878117978,0.010131138862417899,0.0050865508548998406,-0.0097313219529553407,0.0046037395900615508,0.001498155500483378,-0.0039689960183526551,-0.014752566880096296,0.011336003173473941,0.0063273964844903219,-0.0027514888988111608,-0.0028022933968099295,-0.0059491948631951175,0.0098137675466780649,-0.006987183243420958,-0.0075881421493786405,0.0082941371408509212,0.0079666482516405068,-0.000686201561661548,-0.0066766667558564308,0.0008955379501927041,0.0054177605764014203,0.001357295706720052,-0.0021342836581990099,-0.0068757610488603405,0.017935818088359312,0.005817590380619464,-0.0004568708288950063,-0.052475648355985172,-0.054356635181083135,-0.0027365276203870081,0.0080887918411303161,-0.0043013007324379515,-0.00087280956953961208,0.0017266659722885436,0.0053140549528070125,-0.0021922425903255771,-0.0097487582202955281,0.0029215016805217431,0.0040426271975775308,0.0063582314216912295,-0.0061093267956362496,-0.00040642413864233617,0.012816158763481411,-0.010397708631087355,0.00041927979743761057,-0.0022820031945123276,0.006175070920361847,-0.003831656139118067,-0.0024175424908765564,-0.0018712395766584677,0.0095888524567957489,-0.0028016185831933882,-0.0069860039143385677,0.0055437400338202991,0.0075963766682196621,-0.0068801452684130737,-0.0018607734856939118,-0.0045259812755062967,0.0093085076021548474,0.0055127015876372809,-0.0066736859880087707,-0.0081763922798785416,0.0092228826341180792,-0.0013913802562797173,0.0012446821920182316,-0.0010973356559063063,0.0058750866722192541,0.0025146383724816701,-0.0073562651083385333,0.0011001002447308394,0.0045068997045785153,-0.0013659236544238951,-0.21628217464936839,-0.060652414319504189,0.00079249977698125917,-0.0016265204042031911,0.0014790953957337649,-0.0094872140108570591,0.0058072263522461753],"text":["date: 1997 Q1<br />.val: -0.0015762434","date: 1997 Q2<br />.val:  0.0029391374","date: 1997 Q3<br />.val: -0.0019873554","date: 1997 Q4<br />.val:  0.0016255258","date: 1998 Q1<br />.val:  0.0268638267","date: 1998 Q2<br />.val: -0.0002885765","date: 1998 Q3<br />.val:  0.0042588583","date: 1998 Q4<br />.val: -0.0131032857","date: 1999 Q1<br />.val:  0.0155214489","date: 1999 Q2<br />.val: -0.0068189365","date: 1999 Q3<br />.val:  0.0065852480","date: 1999 Q4<br />.val: -0.0108808023","date: 2000 Q1<br />.val:  0.0319035841","date: 2000 Q2<br />.val:  0.0027617817","date: 2000 Q3<br />.val:  0.0136321096","date: 2000 Q4<br />.val: -0.0175144536","date: 2001 Q1<br />.val:  0.0149805942","date: 2001 Q2<br />.val: -0.0039753122","date: 2001 Q3<br />.val:  0.0084399353","date: 2001 Q4<br />.val: -0.0124695607","date: 2002 Q1<br />.val: -0.0115683919","date: 2002 Q2<br />.val:  0.0101311389","date: 2002 Q3<br />.val:  0.0050865509","date: 2002 Q4<br />.val: -0.0097313220","date: 2003 Q1<br />.val:  0.0046037396","date: 2003 Q2<br />.val:  0.0014981555","date: 2003 Q3<br />.val: -0.0039689960","date: 2003 Q4<br />.val: -0.0147525669","date: 2004 Q1<br />.val:  0.0113360032","date: 2004 Q2<br />.val:  0.0063273965","date: 2004 Q3<br />.val: -0.0027514889","date: 2004 Q4<br />.val: -0.0028022934","date: 2005 Q1<br />.val: -0.0059491949","date: 2005 Q2<br />.val:  0.0098137675","date: 2005 Q3<br />.val: -0.0069871832","date: 2005 Q4<br />.val: -0.0075881421","date: 2006 Q1<br />.val:  0.0082941371","date: 2006 Q2<br />.val:  0.0079666483","date: 2006 Q3<br />.val: -0.0006862016","date: 2006 Q4<br />.val: -0.0066766668","date: 2007 Q1<br />.val:  0.0008955380","date: 2007 Q2<br />.val:  0.0054177606","date: 2007 Q3<br />.val:  0.0013572957","date: 2007 Q4<br />.val: -0.0021342837","date: 2008 Q1<br />.val: -0.0068757610","date: 2008 Q2<br />.val:  0.0179358181","date: 2008 Q3<br />.val:  0.0058175904","date: 2008 Q4<br />.val: -0.0004568708","date: 2009 Q1<br />.val: -0.0524756484","date: 2009 Q2<br />.val: -0.0543566352","date: 2009 Q3<br />.val: -0.0027365276","date: 2009 Q4<br />.val:  0.0080887918","date: 2010 Q1<br />.val: -0.0043013007","date: 2010 Q2<br />.val: -0.0008728096","date: 2010 Q3<br />.val:  0.0017266660","date: 2010 Q4<br />.val:  0.0053140550","date: 2011 Q1<br />.val: -0.0021922426","date: 2011 Q2<br />.val: -0.0097487582","date: 2011 Q3<br />.val:  0.0029215017","date: 2011 Q4<br />.val:  0.0040426272","date: 2012 Q1<br />.val:  0.0063582314","date: 2012 Q2<br />.val: -0.0061093268","date: 2012 Q3<br />.val: -0.0004064241","date: 2012 Q4<br />.val:  0.0128161588","date: 2013 Q1<br />.val: -0.0103977086","date: 2013 Q2<br />.val:  0.0004192798","date: 2013 Q3<br />.val: -0.0022820032","date: 2013 Q4<br />.val:  0.0061750709","date: 2014 Q1<br />.val: -0.0038316561","date: 2014 Q2<br />.val: -0.0024175425","date: 2014 Q3<br />.val: -0.0018712396","date: 2014 Q4<br />.val:  0.0095888525","date: 2015 Q1<br />.val: -0.0028016186","date: 2015 Q2<br />.val: -0.0069860039","date: 2015 Q3<br />.val:  0.0055437400","date: 2015 Q4<br />.val:  0.0075963767","date: 2016 Q1<br />.val: -0.0068801453","date: 2016 Q2<br />.val: -0.0018607735","date: 2016 Q3<br />.val: -0.0045259813","date: 2016 Q4<br />.val:  0.0093085076","date: 2017 Q1<br />.val:  0.0055127016","date: 2017 Q2<br />.val: -0.0066736860","date: 2017 Q3<br />.val: -0.0081763923","date: 2017 Q4<br />.val:  0.0092228826","date: 2018 Q1<br />.val: -0.0013913803","date: 2018 Q2<br />.val:  0.0012446822","date: 2018 Q3<br />.val: -0.0010973357","date: 2018 Q4<br />.val:  0.0058750867","date: 2019 Q1<br />.val:  0.0025146384","date: 2019 Q2<br />.val: -0.0073562651","date: 2019 Q3<br />.val:  0.0011001002","date: 2019 Q4<br />.val:  0.0045068997","date: 2020 Q1<br />.val: -0.0013659237","date: 2020 Q2<br />.val: -0.2162821746","date: 2020 Q3<br />.val: -0.0606524143","date: 2020 Q4<br />.val:  0.0007924998","date: 2021 Q1<br />.val: -0.0016265204","date: 2021 Q2<br />.val:  0.0014790954","date: 2021 Q3<br />.val: -0.0094872140","date: 2021 Q4<br />.val:  0.0058072264"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[15.364253288199016,15.392415008400061,15.392415008400061,15.364253288199016,15.364253288199016],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[15.366014644966292,15.394176365167336,15.394176365167336,15.366014644966292,15.366014644966292],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[-0.017991638528009012,0.010170081673036211,0.010170081673036211,-0.017991638528009012,-0.017991638528009012],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[9496,9496,9678,9678,9496],"y":[-0.10627015535693601,-0.078108435155890776,-0.078108435155890776,-0.10627015535693601,-0.10627015535693601],"text":"","type":"scatter","mode":"lines","line":{"width":1.2598425196850394,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(191,191,191,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":18.99543378995434,"b":40.182648401826491,"l":34.337899543379002},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"STL decomposition","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[9025.75,19371.25],"tickmode":"array","ticktext":["2000 Q1","2010 Q1","2020 Q1"],"tickvals":[10957,14610,18262],"categoryorder":"array","categoryarray":["2000 Q1","2010 Q1","2020 Q1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y4","title":"","hoverformat":".2f"},"annotations":[{"text":"date","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-21.917808219178088},{"text":"log(price)","x":1,"y":0.87785388127853881,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"trend","x":1,"y":0.625,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"season_year","x":1,"y":0.375,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"remainder","x":1,"y":0.12214611872146118,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"yaxis":{"domain":[0.75570776255707761,1],"automargin":true,"type":"linear","autorange":false,"range":[15.099106914264182,15.657561382334896],"tickmode":"array","ticktext":["15.1","15.2","15.3","15.4","15.5","15.6"],"tickvals":[15.100000000000001,15.200000000000001,15.300000000000001,15.400000000000002,15.500000000000002,15.600000000000001],"categoryorder":"array","categoryarray":["15.1","15.2","15.3","15.4","15.5","15.6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.75570776255707761,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.75570776255707761,"y1":1,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.50570776255707761,"y1":0.74429223744292239},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.50570776255707761,"y1":0.74429223744292239,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.25570776255707761,"y1":0.49429223744292239},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.25570776255707761,"y1":0.49429223744292239,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.24429223744292236},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0,"y1":0.24429223744292236,"x0":0,"x1":23.37899543378996,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[15.120455448655241,15.639735561478387],"tickmode":"array","ticktext":["15.2","15.3","15.4","15.5","15.6"],"tickvals":[15.200000000000001,15.300000000000001,15.400000000000002,15.500000000000002,15.600000000000001],"categoryorder":"array","categoryarray":["15.2","15.3","15.4","15.5","15.6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.50570776255707761,0.74429223744292239],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-0.019399724538061273,0.011578167683088472],"tickmode":"array","ticktext":["-0.01","0.00","0.01"],"tickvals":[-0.01,0,0.0099999999999999985],"categoryorder":"array","categoryarray":["-0.01","0.00","0.01"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.25570776255707761,0.49429223744292239],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-0.22869146258866388,0.044312872075837097],"tickmode":"array","ticktext":["-0.20","-0.15","-0.10","-0.05","0.00"],"tickvals":[-0.20000000000000001,-0.15000000000000002,-0.10000000000000001,-0.049999999999999989,0],"categoryorder":"array","categoryarray":["-0.20","-0.15","-0.10","-0.05","0.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.24429223744292236],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1a6f2f74f86c":{"x":{},"y":{},"type":"scatter"},"1a6f104e8820":{"ymin":{},"ymax":{},"xmin":{},"xmax":{}}},"cur_data":"1a6f2f74f86c","visdat":{"1a6f2f74f86c":["function (y) ","x"],"1a6f104e8820":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="model-specification" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="model-specification"><span class="header-section-number">1.4</span> Model Specification</h2>
<p>We will <strong>fit</strong> two models to our time series: <em>Seasonal Naïve</em>, and the <em>Drift</em> model. We will also use the log transformation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="ot">&lt;-</span> gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">snaive =</span> <span class="fu">SNAIVE</span>(<span class="fu">log</span>(price)),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">drift  =</span> <span class="fu">RW</span>(<span class="fu">log</span>(price) <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Benchmark models
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We have four different benchmark models that we’ll use to compare against the rest of the more complex models:</p>
<ul>
<li>Mean (<code>MEAN( &lt;.y&gt; )</code>)</li>
<li>Naïve (<code>NAIVE( &lt;.y&gt; )</code>)</li>
<li>Seasonal Naïve (<code>SNAIVE( &lt;.y&gt; )</code>)</li>
<li>Drift (<code>RW( &lt;.y&gt; ~ drift())</code>)</li>
</ul>
<p>where <code>&lt;.y&gt;</code> is just a placeholder for the variable to model.</p>
<p>Choose wisely which of these to use in each case, according to the exploratory analysis performed.</p>
</div>
</div>
</div>
</section>
<section id="residuals-diagnostics" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="residuals-diagnostics"><span class="header-section-number">1.5</span> Residuals Diagnostics</h2>
<section id="visual-analysis" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="visual-analysis"><span class="header-section-number">1.5.1</span> Visual analysis</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(snaive) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>() <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Residuals Diagnostics for the Seasonal Naïve Model"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(drift) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>() <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Residuals Diagnostics for the Drift Model"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-13-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Here we expect to see:</p>
<ul>
<li>A time series with no apparent patterns (no trend and/or seasonality), with a mean close to zero.</li>
<li>In the <strong>ACF</strong>, we’d expect no lags with significant autocorrelation.</li>
<li>Normally distributed residuals.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="portmanteau-tests-of-autocorrelation" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="portmanteau-tests-of-autocorrelation"><span class="header-section-number">1.5.2</span> Portmanteau tests of autocorrelation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">24</span>, <span class="at">dof =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":["lb_stat"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["lb_pvalue"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"126.97287","4":"5.551115e-16"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"45.91285","4":"4.534977e-03"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Residuals interpretation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Both models produce sub optimal residuals:</p>
<ul>
<li><p>The SNAIVE correctly detects the seasonality, however, its residuals are still autocorrelated. Moreover, the residuals are not normally distributed.</p></li>
<li><p>The drift model doesn’t account for the seasonality, and their distribution is a little bit skewed.</p></li>
</ul>
<p>Hence, we will perform our forecasts using the <strong>bootstrapping</strong> method.</p>
</div>
</div>
<p>We can compute some error metrics on the training set using the <code>accuracy()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>gdp_train_accu <span class="ot">&lt;-</span> <span class="fu">accuracy</span>(gdp_fit) <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(MAPE)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>gdp_train_accu <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(symbol<span class="sc">:</span>.type, MAPE, RMSE, MAE, MASE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".type"],"name":[3],"type":["chr"],"align":["left"]},{"label":["MAPE"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["RMSE"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MAE"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MASE"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"Training","4":"2.466175","5":"188183.3","6":"127480.0","7":"0.7787072"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"Training","4":"3.244605","5":"239048.8","6":"163707.2","7":"1.0000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The <code>accuracy()</code> function
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>accuracy()</code> function can be used to compute error metrics in the training data, or in the test set. What differs is the data that is given to it:</p>
<ul>
<li><p>For the training metrics, you need to use the <strong><code>mable</code></strong> (the table of models, that we usually store in <code>_fit</code>).</p></li>
<li><p>For the forecasting error metrics, we need the <strong><code>fable</code></strong> (the forecasts table, usually stored as <code>_fc</code> or <code>_fcst</code>), and the <strong>complete set of data</strong> (both the training and test set together).</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://media.tenor.com/dp_hQBGT0rIAAAAM/think-smart.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="https://media.tenor.com/dp_hQBGT0rIAAAAM/think-smart.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>For this analysis, we are focusing on the <strong>MAPE</strong><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> metric. The drift model <strong>(2.47%)</strong> seems to have a better fit with the training set than the snaive model <strong>(3.24%)</strong>.</p>
</div>
</div>
</div>
</section>
</section>
<section id="modeling-using-decomposition" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="modeling-using-decomposition"><span class="header-section-number">1.6</span> Modeling using decomposition</h2>
<p>We will perform a forecast using decomposition, to see if we can improve our results so far.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>gdp_fit_dcmp <span class="ot">&lt;-</span> gdp_train <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">model</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">STL</span>(<span class="fu">log</span>(price) <span class="sc">~</span> <span class="fu">season</span>(<span class="at">window =</span> <span class="st">"periodic"</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">RW</span>(season_adjust <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>gdp_fit_dcmp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":["stlf"],"name":[2],"type":["lst_mdl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"<lst_mdl>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note on <code>decomposition_model()</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Remember, when using decomposition models, we need to do the following:</p>
<ol type="1">
<li><p>Specify what type of decomposition we want to use and customize it as needed.</p></li>
<li><p>Fit a model for the seasonally adjusted data; <code>season_adjust</code>.</p></li>
<li><p>Fit a model for the seasonal component. <strong>R</strong> uses a <code>SNAIVE()</code> model by default to model the seasonality. If you wish to model it using a different model, you have specify it.</p></li>
</ol>
<ul>
<li>The name of the seasonal component depends on the type of seasonality present in the time series. If it has a yearly seasonality, the component is called <code>season_year</code>. It could also be called <code>season_week</code>, <code>season_day</code>, and so on.</li>
</ul>
</div>
</div>
</div>
<p>We can join this new model with the models we trained before. This way we can have them all in the same <code>mable</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="ot">&lt;-</span> gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gdp_fit_dcmp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(symbol)`</code></pre>
</div>
</div>
<section id="residuals-diagnostics-1" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="residuals-diagnostics-1"><span class="header-section-number">1.6.1</span> Residuals diagnostics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">accuracy</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(symbol<span class="sc">:</span>.type, MAPE, RMSE, MAE, MASE) <span class="sc">|&gt;</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".type"],"name":[3],"type":["chr"],"align":["left"]},{"label":["MAPE"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["RMSE"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MAE"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MASE"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"Training","4":"1.658921","5":"169265.7","6":"82544.43","7":"0.5042199"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"Training","4":"2.466175","5":"188183.3","6":"127479.98","7":"0.7787072"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"Training","4":"3.244605","5":"239048.8","6":"163707.21","7":"1.0000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stlf) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-20-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">features</span>(.innov, ljung_box)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":["lb_stat"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["lb_pvalue"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"13.601511","4":"2.260035e-04"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"23.897801","4":"1.015878e-06"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"7.650751","4":"5.674869e-03"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>The MAPE seems to improve with this decomposition model. Also, the residual diagnostics do not show any seasonality present in them. However, the residuals are still autocorrelated, as the <em>Ljung-Box</em> test suggests.</p>
</div>
</div>
</div>
</section>
</section>
<section id="forecasting-on-the-test-set" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="forecasting-on-the-test-set"><span class="header-section-number">1.7</span> Forecasting on the test set</h2>
<p>Once we have our models, we can produce forecasts. We will forecast our test data and check our forecasts’ performance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>gdp_fc <span class="ot">&lt;-</span> gdp_fit <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> gdp_h_fc) </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>gdp_fc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":["date"],"name":[3],"type":["qtr"],"align":["right"]},{"label":["price"],"name":[4],"type":["dist"],"align":["right"]},{"label":[".mean"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2022 Q1","4":"<dist>","5":"5716455"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2022 Q2","4":"<dist>","5":"5912288"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2022 Q3","4":"<dist>","5":"5807527"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2022 Q4","4":"<dist>","5":"5994157"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2023 Q1","4":"<dist>","5":"5722700"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2023 Q2","4":"<dist>","5":"5918747"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2023 Q3","4":"<dist>","5":"5813872"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2023 Q4","4":"<dist>","5":"6000705"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2024 Q1","4":"<dist>","5":"5728945"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2024 Q2","4":"<dist>","5":"5925205"},{"1":"NGDPRNSAXDCMXQ","2":"snaive","3":"2024 Q3","4":"<dist>","5":"5820216"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2022 Q1","4":"<dist>","5":"6020699"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2022 Q2","4":"<dist>","5":"6054049"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2022 Q3","4":"<dist>","5":"6087660"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2022 Q4","4":"<dist>","5":"6121535"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2023 Q1","4":"<dist>","5":"6155676"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2023 Q2","4":"<dist>","5":"6190086"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2023 Q3","4":"<dist>","5":"6224766"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2023 Q4","4":"<dist>","5":"6259718"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2024 Q1","4":"<dist>","5":"6294945"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2024 Q2","4":"<dist>","5":"6330449"},{"1":"NGDPRNSAXDCMXQ","2":"drift","3":"2024 Q3","4":"<dist>","5":"6366233"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2022 Q1","4":"<dist>","5":"5851091"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2022 Q2","4":"<dist>","5":"6045244"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2022 Q3","4":"<dist>","5":"6008189"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2022 Q4","4":"<dist>","5":"6111329"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2023 Q1","4":"<dist>","5":"5972235"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2023 Q2","4":"<dist>","5":"6170659"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2023 Q3","4":"<dist>","5":"6133085"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2023 Q4","4":"<dist>","5":"6238623"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2024 Q1","4":"<dist>","5":"6096879"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2024 Q2","4":"<dist>","5":"6299700"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2024 Q3","4":"<dist>","5":"6261593"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>gdp_fc <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(gdp) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>.model, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-23-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>gdp_fc <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.model <span class="sc">==</span> <span class="st">"stlf"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(gdp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-23-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>We now estimate the forecast errors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>gdp_fc <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">accuracy</span>(gdp) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model<span class="sc">:</span>.type, MAPE, RMSE, MAE, MASE) <span class="sc">|&gt;</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".model"],"name":[1],"type":["chr"],"align":["left"]},{"label":["symbol"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".type"],"name":[3],"type":["chr"],"align":["left"]},{"label":["MAPE"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["RMSE"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MAE"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MASE"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"drift","2":"NGDPRNSAXDCMXQ","3":"Test","4":"1.418204","5":"101490.2","6":"88024.3","7":"0.5376935"},{"1":"stlf","2":"NGDPRNSAXDCMXQ","3":"Test","4":"1.664491","5":"115923.0","6":"104515.4","7":"0.6384288"},{"1":"snaive","2":"NGDPRNSAXDCMXQ","3":"Test","4":"5.777899","5":"384655.0","6":"361589.0","7":"2.2087544"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="forecasting-the-future" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="forecasting-the-future"><span class="header-section-number">1.8</span> Forecasting the future</h2>
<p>We now refit our model using the whole dataset. We will only model the STL decomposition model, because the other two didn’t get a strong fit.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>gdp_fit2 <span class="ot">&lt;-</span> gdp <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">STL</span>(<span class="fu">log</span>(price) <span class="sc">~</span> <span class="fu">season</span>(<span class="at">window =</span> <span class="st">"periodic"</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">RW</span>(season_adjust <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>gdp_fit2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":["stlf"],"name":[2],"type":["lst_mdl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"<lst_mdl>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>gdp_fc_fut <span class="ot">&lt;-</span> gdp_fit2 <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> gdp_h_fc)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>gdp_fc_fut</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["symbol"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":["date"],"name":[3],"type":["qtr"],"align":["right"]},{"label":["price"],"name":[4],"type":["dist"],"align":["right"]},{"label":[".mean"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2024 Q4","4":"<dist>","5":"6516112"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2025 Q1","4":"<dist>","5":"6346930"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2025 Q2","4":"<dist>","5":"6559748"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2025 Q3","4":"<dist>","5":"6527613"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2025 Q4","4":"<dist>","5":"6655733"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2026 Q1","4":"<dist>","5":"6483142"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2026 Q2","4":"<dist>","5":"6700749"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2026 Q3","4":"<dist>","5":"6668145"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2026 Q4","4":"<dist>","5":"6799248"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2027 Q1","4":"<dist>","5":"6623154"},{"1":"NGDPRNSAXDCMXQ","2":"stlf","3":"2027 Q2","4":"<dist>","5":"6845686"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>gdp_fc_fut <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(gdp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="forecasting_workflow_files/figure-html/unnamed-chunk-26-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="forecasting_workflow_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save(gdp_fc_fut, file = "equipo1.RData")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This will make it very convenient when calling your variables. RStudio will display all the options starting with <code>gdp_</code>. We will usually use the following suffixes:</p>
<ul>
<li><code>_train</code>: training set</li>
<li><code>_fit</code>: the <code>mable</code> (table of models)</li>
<li><code>_aug</code>: the augmented table with fitted values and residuals</li>
<li><code>_dcmp</code>: for the <code>dable</code> (decomposition table), containing the components and the seasonally adjusted series of a TS decomposition.</li>
<li><code>_fc</code> or <code>_fcst</code>: for the <code>fable</code> (forecasts table) that has our forecasts. <img src="https://c.tenor.com/qjBICGJwxgIAAAAC/convenient-thats-convenient.gif" class="img-fluid" data-fig-aling="center"></li>
</ul>
<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></li>
<li id="fn2"><p>The Mean Absolute Percentage Error is a percentage error metric widely used in professional environments.</p>
<p>Let</p>
<p><span class="math display">\[
e_t = y_t - \hat{y}_t
\]</span></p>
<p>be the error or residual.</p>
<p>Then the MAPE would be computed as</p>
<p><span class="math display">\[
MAPE = \frac{1}{T}\sum_{t=1}^T|\frac{e_t}{y_t}|
\]</span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://media.tenor.com/tqERWt8lBYEAAAAM/calculating-puzzled.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="https://media.tenor.com/tqERWt8lBYEAAAAM/calculating-puzzled.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/pbenavidesh\.github\.io\/narsil\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../docs/modules/forecasting.html" class="pagination-link" aria-label="Forecasting principles">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Forecasting principles</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/pbenavidesh/narsil/edit/main/docs/modules/forecasting_workflow.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/pbenavidesh/narsil/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>