{
  "hash": "9ce06eea997c6ccac1065b2f52ce2326",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The Forecasting Workflow using `fable`\"\nauthor: \"Pablo Benavides\"\ndate: 2022-09-30\ndate-modified: last-modified\nformat: \n  html: default\n  revealjs:\n    output-file: forecasting_wf_pres.html\n  # pdf: default\n---\n\n\n![](https://tidyverts.org/images/fable.png){fig-align=\"center\"}\n\n# Introduction {.unnumbered}\n\n## Packages\n\nIt is recommended to load all the packages at the beginning of your file. We will be using the `tidyverts` ecosystem for the whole forecasting workflow.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tsibble)\nlibrary(feasts)\nlibrary(fable)\nlibrary(tsibbledata)\nlibrary(fpp3)\nlibrary(plotly)\n```\n:::\n\n\n:::{.callout-warning}\nDo not load unnecesary packages into your environment. It could lead to conflicts between functions and unwanted results.\n:::\n\n\n# Forecasting Workflow\n\n## Data\n\nWe will work with the Real Gross Domestic Product (GDP) for Mexico. The data is downloaded from [FRED](https://fred.stlouisfed.org/series/NGDPRNSAXDCMXQ). The time series id is `NGDPRNSAXDCMXQ`.\n\n### Import data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp <- tidyquant::tq_get(\n  x    = \"NGDPRNSAXDCMXQ\",\n  get  = \"economic.data\",\n  from = \"1997-01-01\"\n)\n\ngdp\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"date\"],\"name\":[2],\"type\":[\"date\"],\"align\":[\"right\"]},{\"label\":[\"price\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997-01-01\",\"3\":\"3702400\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997-04-01\",\"3\":\"3896080\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997-07-01\",\"3\":\"3906060\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997-10-01\",\"3\":\"4038363\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998-01-01\",\"3\":\"4084285\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998-04-01\",\"3\":\"4134897\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998-07-01\",\"3\":\"4138206\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998-10-01\",\"3\":\"4146856\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999-01-01\",\"3\":\"4176247\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999-04-01\",\"3\":\"4232282\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999-07-01\",\"3\":\"4262620\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999-10-01\",\"3\":\"4287793\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000-01-01\",\"3\":\"4412429\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000-04-01\",\"3\":\"4465501\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000-07-01\",\"3\":\"4505219\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000-10-01\",\"3\":\"4428705\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001-01-01\",\"3\":\"4441057\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001-04-01\",\"3\":\"4468504\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001-07-01\",\"3\":\"4440266\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001-10-01\",\"3\":\"4381724\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002-01-01\",\"3\":\"4269794\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002-04-01\",\"3\":\"4504205\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002-07-01\",\"3\":\"4457000\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002-10-01\",\"3\":\"4458601\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003-01-01\",\"3\":\"4402394\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003-04-01\",\"3\":\"4520659\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003-07-01\",\"3\":\"4464786\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003-10-01\",\"3\":\"4511479\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004-01-01\",\"3\":\"4546248\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004-04-01\",\"3\":\"4692565\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004-07-01\",\"3\":\"4615346\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004-10-01\",\"3\":\"4683348\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005-01-01\",\"3\":\"4567925\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005-04-01\",\"3\":\"4804673\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005-07-01\",\"3\":\"4720814\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005-10-01\",\"3\":\"4835839\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006-01-01\",\"3\":\"4840633\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006-04-01\",\"3\":\"5029030\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006-07-01\",\"3\":\"4959009\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006-10-01\",\"3\":\"5010132\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007-01-01\",\"3\":\"4936403\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007-04-01\",\"3\":\"5127366\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007-07-01\",\"3\":\"5066705\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007-10-01\",\"3\":\"5120553\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008-01-01\",\"3\":\"4975733\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008-04-01\",\"3\":\"5249629\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008-07-01\",\"3\":\"5123969\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008-10-01\",\"3\":\"5092731\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009-01-01\",\"3\":\"4634308\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009-04-01\",\"3\":\"4706883\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009-07-01\",\"3\":\"4823053\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009-10-01\",\"3\":\"4990939\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010-01-01\",\"3\":\"4843005\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010-04-01\",\"3\":\"5045173\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010-07-01\",\"3\":\"5050197\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010-10-01\",\"3\":\"5169076\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011-01-01\",\"3\":\"5022871\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011-04-01\",\"3\":\"5170735\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011-07-01\",\"3\":\"5237527\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011-10-01\",\"3\":\"5368829\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012-01-01\",\"3\":\"5270922\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012-04-01\",\"3\":\"5380525\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012-07-01\",\"3\":\"5369764\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012-10-01\",\"3\":\"5517818\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013-01-01\",\"3\":\"5256457\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013-04-01\",\"3\":\"5473382\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013-07-01\",\"3\":\"5425704\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013-10-01\",\"3\":\"5567019\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014-01-01\",\"3\":\"5386913\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014-04-01\",\"3\":\"5580023\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014-07-01\",\"3\":\"5564552\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014-10-01\",\"3\":\"5734954\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015-01-01\",\"3\":\"5542520\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015-04-01\",\"3\":\"5710796\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015-07-01\",\"3\":\"5752905\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015-10-01\",\"3\":\"5861933\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016-01-01\",\"3\":\"5633944\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016-04-01\",\"3\":\"5839716\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016-07-01\",\"3\":\"5803647\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016-10-01\",\"3\":\"5996184\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017-01-01\",\"3\":\"5827675\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017-04-01\",\"3\":\"5928554\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017-07-01\",\"3\":\"5872812\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017-10-01\",\"3\":\"6080066\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018-01-01\",\"3\":\"5887853\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018-04-01\",\"3\":\"6095452\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018-07-01\",\"3\":\"6034709\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018-10-01\",\"3\":\"6158657\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019-01-01\",\"3\":\"5953614\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019-04-01\",\"3\":\"6053136\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019-07-01\",\"3\":\"6013545\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019-10-01\",\"3\":\"6095612\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020-01-01\",\"3\":\"5860987\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020-04-01\",\"3\":\"4800279\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020-07-01\",\"3\":\"5507597\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020-10-01\",\"3\":\"5867153\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021-01-01\",\"3\":\"5684685\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021-04-01\",\"3\":\"5850119\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021-07-01\",\"3\":\"5790280\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021-10-01\",\"3\":\"5975624\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022-01-01\",\"3\":\"5856104\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022-04-01\",\"3\":\"6042603\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022-07-01\",\"3\":\"6078457\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022-10-01\",\"3\":\"6243690\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023-01-01\",\"3\":\"6062930\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023-04-01\",\"3\":\"6249325\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023-07-01\",\"3\":\"6279558\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023-10-01\",\"3\":\"6391666\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n### Wrangle data\n\nThere are some issues with our data:\n\n1. It is loaded into a `tibble` object. We need to convert it to a **`tsibble`**.\n\n:::{.callout-tip collapse=\"true\"}\nWe can use `as_tsibble()` to do so.\n:::\n\n2. Our data is **quarterly**, but it is loaded in a `YYYY-MM-DD` format. We need to change it to a `YYYY QQ` format.\n\n:::{.callout-tip collapse=\"true\"}\nThere are some functions that help us achieve this, such as\n\n* `yearquarter()`\n* `yearmonth()`\n* `yearweek()`\n* `year()`\n\ndepending on the time series' period.\n:::\n\nWe will overwrite our data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp <- gdp |> \n  mutate(date = yearquarter(date)) |> \n  as_tsibble(\n    index = date,\n    key   = symbol\n  )\n\ngdp\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"date\"],\"name\":[2],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"price\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q1\",\"3\":\"3702400\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q2\",\"3\":\"3896080\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q3\",\"3\":\"3906060\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q4\",\"3\":\"4038363\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q1\",\"3\":\"4084285\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q2\",\"3\":\"4134897\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q3\",\"3\":\"4138206\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q4\",\"3\":\"4146856\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q1\",\"3\":\"4176247\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q2\",\"3\":\"4232282\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q3\",\"3\":\"4262620\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q4\",\"3\":\"4287793\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q1\",\"3\":\"4412429\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q2\",\"3\":\"4465501\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q3\",\"3\":\"4505219\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q4\",\"3\":\"4428705\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q1\",\"3\":\"4441057\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q2\",\"3\":\"4468504\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q3\",\"3\":\"4440266\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q4\",\"3\":\"4381724\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q1\",\"3\":\"4269794\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q2\",\"3\":\"4504205\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q3\",\"3\":\"4457000\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q4\",\"3\":\"4458601\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q1\",\"3\":\"4402394\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q2\",\"3\":\"4520659\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q3\",\"3\":\"4464786\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q4\",\"3\":\"4511479\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q1\",\"3\":\"4546248\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q2\",\"3\":\"4692565\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q3\",\"3\":\"4615346\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q4\",\"3\":\"4683348\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q1\",\"3\":\"4567925\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q2\",\"3\":\"4804673\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q3\",\"3\":\"4720814\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q4\",\"3\":\"4835839\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q1\",\"3\":\"4840633\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q2\",\"3\":\"5029030\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q3\",\"3\":\"4959009\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q4\",\"3\":\"5010132\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q1\",\"3\":\"4936403\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q2\",\"3\":\"5127366\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q3\",\"3\":\"5066705\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q4\",\"3\":\"5120553\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q1\",\"3\":\"4975733\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q2\",\"3\":\"5249629\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q3\",\"3\":\"5123969\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q4\",\"3\":\"5092731\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q1\",\"3\":\"4634308\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q2\",\"3\":\"4706883\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q3\",\"3\":\"4823053\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q4\",\"3\":\"4990939\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q1\",\"3\":\"4843005\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q2\",\"3\":\"5045173\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q3\",\"3\":\"5050197\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q4\",\"3\":\"5169076\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q1\",\"3\":\"5022871\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q2\",\"3\":\"5170735\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q3\",\"3\":\"5237527\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q4\",\"3\":\"5368829\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q1\",\"3\":\"5270922\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q2\",\"3\":\"5380525\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q3\",\"3\":\"5369764\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q4\",\"3\":\"5517818\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q1\",\"3\":\"5256457\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q2\",\"3\":\"5473382\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q3\",\"3\":\"5425704\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q4\",\"3\":\"5567019\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q1\",\"3\":\"5386913\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q2\",\"3\":\"5580023\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q3\",\"3\":\"5564552\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q4\",\"3\":\"5734954\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q1\",\"3\":\"5542520\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q2\",\"3\":\"5710796\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q3\",\"3\":\"5752905\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q4\",\"3\":\"5861933\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q1\",\"3\":\"5633944\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q2\",\"3\":\"5839716\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q3\",\"3\":\"5803647\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q4\",\"3\":\"5996184\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q1\",\"3\":\"5827675\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q2\",\"3\":\"5928554\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q3\",\"3\":\"5872812\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q4\",\"3\":\"6080066\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q1\",\"3\":\"5887853\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q2\",\"3\":\"6095452\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q3\",\"3\":\"6034709\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q4\",\"3\":\"6158657\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q1\",\"3\":\"5953614\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q2\",\"3\":\"6053136\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q3\",\"3\":\"6013545\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q4\",\"3\":\"6095612\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q1\",\"3\":\"5860987\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q2\",\"3\":\"4800279\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q3\",\"3\":\"5507597\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q4\",\"3\":\"5867153\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021 Q1\",\"3\":\"5684685\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021 Q2\",\"3\":\"5850119\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021 Q3\",\"3\":\"5790280\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2021 Q4\",\"3\":\"5975624\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022 Q1\",\"3\":\"5856104\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022 Q2\",\"3\":\"6042603\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022 Q3\",\"3\":\"6078457\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2022 Q4\",\"3\":\"6243690\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023 Q1\",\"3\":\"6062930\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023 Q2\",\"3\":\"6249325\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023 Q3\",\"3\":\"6279558\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2023 Q4\",\"3\":\"6391666\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n:::{.callout-tip collapse=\"true\"}\n* We always need to specify the `index` argument, as it is our **date** variable. \n\n* The `key` argument is necessary whenever we have more than one time series in our data frame and is made up of **one or more columns** that uniquely identify each time series        .\n:::\n\n## Train/Test Split\n\nWe will split our data in two sets: a training set, and a test set, in order to evaluate our forecasts' accuracy.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_train <- gdp |> \n  filter_index(. ~ \"2020 Q4\")\n\ngdp_train\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"date\"],\"name\":[2],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"price\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q1\",\"3\":\"3702400\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q2\",\"3\":\"3896080\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q3\",\"3\":\"3906060\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1997 Q4\",\"3\":\"4038363\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q1\",\"3\":\"4084285\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q2\",\"3\":\"4134897\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q3\",\"3\":\"4138206\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1998 Q4\",\"3\":\"4146856\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q1\",\"3\":\"4176247\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q2\",\"3\":\"4232282\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q3\",\"3\":\"4262620\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"1999 Q4\",\"3\":\"4287793\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q1\",\"3\":\"4412429\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q2\",\"3\":\"4465501\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q3\",\"3\":\"4505219\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2000 Q4\",\"3\":\"4428705\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q1\",\"3\":\"4441057\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q2\",\"3\":\"4468504\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q3\",\"3\":\"4440266\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2001 Q4\",\"3\":\"4381724\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q1\",\"3\":\"4269794\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q2\",\"3\":\"4504205\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q3\",\"3\":\"4457000\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2002 Q4\",\"3\":\"4458601\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q1\",\"3\":\"4402394\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q2\",\"3\":\"4520659\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q3\",\"3\":\"4464786\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2003 Q4\",\"3\":\"4511479\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q1\",\"3\":\"4546248\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q2\",\"3\":\"4692565\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q3\",\"3\":\"4615346\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2004 Q4\",\"3\":\"4683348\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q1\",\"3\":\"4567925\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q2\",\"3\":\"4804673\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q3\",\"3\":\"4720814\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2005 Q4\",\"3\":\"4835839\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q1\",\"3\":\"4840633\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q2\",\"3\":\"5029030\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q3\",\"3\":\"4959009\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2006 Q4\",\"3\":\"5010132\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q1\",\"3\":\"4936403\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q2\",\"3\":\"5127366\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q3\",\"3\":\"5066705\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2007 Q4\",\"3\":\"5120553\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q1\",\"3\":\"4975733\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q2\",\"3\":\"5249629\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q3\",\"3\":\"5123969\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2008 Q4\",\"3\":\"5092731\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q1\",\"3\":\"4634308\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q2\",\"3\":\"4706883\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q3\",\"3\":\"4823053\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2009 Q4\",\"3\":\"4990939\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q1\",\"3\":\"4843005\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q2\",\"3\":\"5045173\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q3\",\"3\":\"5050197\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2010 Q4\",\"3\":\"5169076\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q1\",\"3\":\"5022871\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q2\",\"3\":\"5170735\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q3\",\"3\":\"5237527\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2011 Q4\",\"3\":\"5368829\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q1\",\"3\":\"5270922\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q2\",\"3\":\"5380525\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q3\",\"3\":\"5369764\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2012 Q4\",\"3\":\"5517818\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q1\",\"3\":\"5256457\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q2\",\"3\":\"5473382\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q3\",\"3\":\"5425704\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2013 Q4\",\"3\":\"5567019\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q1\",\"3\":\"5386913\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q2\",\"3\":\"5580023\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q3\",\"3\":\"5564552\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2014 Q4\",\"3\":\"5734954\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q1\",\"3\":\"5542520\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q2\",\"3\":\"5710796\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q3\",\"3\":\"5752905\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2015 Q4\",\"3\":\"5861933\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q1\",\"3\":\"5633944\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q2\",\"3\":\"5839716\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q3\",\"3\":\"5803647\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2016 Q4\",\"3\":\"5996184\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q1\",\"3\":\"5827675\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q2\",\"3\":\"5928554\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q3\",\"3\":\"5872812\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2017 Q4\",\"3\":\"6080066\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q1\",\"3\":\"5887853\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q2\",\"3\":\"6095452\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q3\",\"3\":\"6034709\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2018 Q4\",\"3\":\"6158657\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q1\",\"3\":\"5953614\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q2\",\"3\":\"6053136\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q3\",\"3\":\"6013545\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2019 Q4\",\"3\":\"6095612\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q1\",\"3\":\"5860987\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q2\",\"3\":\"4800279\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q3\",\"3\":\"5507597\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"2020 Q4\",\"3\":\"5867153\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n:::{.callout-note}\nFor all our variables, it is strongly recommended to follow the same notation process, and write our code using [**snake_case**](https://en.wikipedia.org/wiki/Snake_case). Here, we called our data `gdp`, therefore, all the following variables will be called starting with **`gdp_`**[^notation], such as `gdp_train` for our training set.\n:::\n\n[^notation]: This will make it very convenient when calling your variables. RStudio will display all the options starting with `gdp_`. We will usually use the following suffixes:\n\n    * `_train`: training set\n    * `_fit`: the `mable` (table of models)\n    * `_aug`: the augmented table with fitted values and residuals\n    * `_dcmp`: for the `dable` (decomposition table), containing the components and the seasonally adjusted series of a TS decomposition.\n    * `_fc` or `_fcst`: for the `fable` (forecasts table) that has our forecasts.\n    ![](https://c.tenor.com/qjBICGJwxgIAAAAC/convenient-thats-convenient.gif){fig-aling=\"center\"}\n\n## Visualization and EDA\n\nWhen performing time series analysis/forecasting, one of the first things to do is to create a time series plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- gdp_train |> \n  autoplot(price) +\n  labs(\n    title = \"Time series plot of the Real GDP for Mexico\",\n    y = \"GDP\"\n  )\n \nggplotly(p, dynamicTicks = TRUE) |> \n  rangeslider()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-4c3d02e39414d903abee\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4c3d02e39414d903abee\">{\"x\":{\"data\":[{\"x\":[\"1997-01-01\",\"1997-04-01\",\"1997-07-01\",\"1997-10-01\",\"1998-01-01\",\"1998-04-01\",\"1998-07-01\",\"1998-10-01\",\"1999-01-01\",\"1999-04-01\",\"1999-07-01\",\"1999-10-01\",\"2000-01-01\",\"2000-04-01\",\"2000-07-01\",\"2000-10-01\",\"2001-01-01\",\"2001-04-01\",\"2001-07-01\",\"2001-10-01\",\"2002-01-01\",\"2002-04-01\",\"2002-07-01\",\"2002-10-01\",\"2003-01-01\",\"2003-04-01\",\"2003-07-01\",\"2003-10-01\",\"2004-01-01\",\"2004-04-01\",\"2004-07-01\",\"2004-10-01\",\"2005-01-01\",\"2005-04-01\",\"2005-07-01\",\"2005-10-01\",\"2006-01-01\",\"2006-04-01\",\"2006-07-01\",\"2006-10-01\",\"2007-01-01\",\"2007-04-01\",\"2007-07-01\",\"2007-10-01\",\"2008-01-01\",\"2008-04-01\",\"2008-07-01\",\"2008-10-01\",\"2009-01-01\",\"2009-04-01\",\"2009-07-01\",\"2009-10-01\",\"2010-01-01\",\"2010-04-01\",\"2010-07-01\",\"2010-10-01\",\"2011-01-01\",\"2011-04-01\",\"2011-07-01\",\"2011-10-01\",\"2012-01-01\",\"2012-04-01\",\"2012-07-01\",\"2012-10-01\",\"2013-01-01\",\"2013-04-01\",\"2013-07-01\",\"2013-10-01\",\"2014-01-01\",\"2014-04-01\",\"2014-07-01\",\"2014-10-01\",\"2015-01-01\",\"2015-04-01\",\"2015-07-01\",\"2015-10-01\",\"2016-01-01\",\"2016-04-01\",\"2016-07-01\",\"2016-10-01\",\"2017-01-01\",\"2017-04-01\",\"2017-07-01\",\"2017-10-01\",\"2018-01-01\",\"2018-04-01\",\"2018-07-01\",\"2018-10-01\",\"2019-01-01\",\"2019-04-01\",\"2019-07-01\",\"2019-10-01\",\"2020-01-01\",\"2020-04-01\",\"2020-07-01\",\"2020-10-01\"],\"y\":[3702399.5,3896080.3999999999,3906060.1000000001,4038363.2999999998,4084285,4134896.5,4138206.3999999999,4146856.2000000002,4176246.6000000001,4232281.5,4262619.7999999998,4287793.2000000002,4412429.2999999998,4465501.2999999998,4505218.7999999998,4428704.9000000004,4441056.7000000002,4468504.2999999998,4440265.7999999998,4381723.5999999996,4269794.2999999998,4504204.7999999998,4456999.5,4458601.0999999996,4402394,4520659,4464786.2999999998,4511478.5999999996,4546248.0999999996,4692565.4000000004,4615345.7999999998,4683348.2000000002,4567925.2999999998,4804673.0999999996,4720813.5,4835839.0999999996,4840632.7000000002,5029029.7999999998,4959009.2000000002,5010132.4000000004,4936402.7000000002,5127366.4000000004,5066705.0999999996,5120553.0999999996,4975733.0999999996,5249628.9000000004,5123968.7000000002,5092731,4634307.7000000002,4706882.7000000002,4823053.2999999998,4990939,4843004.7999999998,5045172.5,5050197.2000000002,5169076.4000000004,5022870.5,5170734.5999999996,5237527,5368828.5,5270921.5,5380524.5,5369763.5,5517817.5,5256456.5,5473382,5425703.5,5567019.4000000004,5386913.2999999998,5580023.0999999996,5564552.2000000002,5734954.2999999998,5542519.5999999996,5710796.4000000004,5752905.0999999996,5861933.2999999998,5633943.9000000004,5839716,5803647,5996183.7999999998,5827675.4000000004,5928553.7999999998,5872811.7000000002,6080066.4000000004,5887852.7999999998,6095451.9000000004,6034708.7000000002,6158656.9000000004,5953614.0999999996,6053135.7000000002,6013544.5,6095611.5,5860986.5999999996,4800279.0999999996,5507597.0999999996,5867153.2999999998],\"text\":[\"date: 1997 Q1<br />price: 3702400\",\"date: 1997 Q2<br />price: 3896080\",\"date: 1997 Q3<br />price: 3906060\",\"date: 1997 Q4<br />price: 4038363\",\"date: 1998 Q1<br />price: 4084285\",\"date: 1998 Q2<br />price: 4134897\",\"date: 1998 Q3<br />price: 4138206\",\"date: 1998 Q4<br />price: 4146856\",\"date: 1999 Q1<br />price: 4176247\",\"date: 1999 Q2<br />price: 4232282\",\"date: 1999 Q3<br />price: 4262620\",\"date: 1999 Q4<br />price: 4287793\",\"date: 2000 Q1<br />price: 4412429\",\"date: 2000 Q2<br />price: 4465501\",\"date: 2000 Q3<br />price: 4505219\",\"date: 2000 Q4<br />price: 4428705\",\"date: 2001 Q1<br />price: 4441057\",\"date: 2001 Q2<br />price: 4468504\",\"date: 2001 Q3<br />price: 4440266\",\"date: 2001 Q4<br />price: 4381724\",\"date: 2002 Q1<br />price: 4269794\",\"date: 2002 Q2<br />price: 4504205\",\"date: 2002 Q3<br />price: 4457000\",\"date: 2002 Q4<br />price: 4458601\",\"date: 2003 Q1<br />price: 4402394\",\"date: 2003 Q2<br />price: 4520659\",\"date: 2003 Q3<br />price: 4464786\",\"date: 2003 Q4<br />price: 4511479\",\"date: 2004 Q1<br />price: 4546248\",\"date: 2004 Q2<br />price: 4692565\",\"date: 2004 Q3<br />price: 4615346\",\"date: 2004 Q4<br />price: 4683348\",\"date: 2005 Q1<br />price: 4567925\",\"date: 2005 Q2<br />price: 4804673\",\"date: 2005 Q3<br />price: 4720814\",\"date: 2005 Q4<br />price: 4835839\",\"date: 2006 Q1<br />price: 4840633\",\"date: 2006 Q2<br />price: 5029030\",\"date: 2006 Q3<br />price: 4959009\",\"date: 2006 Q4<br />price: 5010132\",\"date: 2007 Q1<br />price: 4936403\",\"date: 2007 Q2<br />price: 5127366\",\"date: 2007 Q3<br />price: 5066705\",\"date: 2007 Q4<br />price: 5120553\",\"date: 2008 Q1<br />price: 4975733\",\"date: 2008 Q2<br />price: 5249629\",\"date: 2008 Q3<br />price: 5123969\",\"date: 2008 Q4<br />price: 5092731\",\"date: 2009 Q1<br />price: 4634308\",\"date: 2009 Q2<br />price: 4706883\",\"date: 2009 Q3<br />price: 4823053\",\"date: 2009 Q4<br />price: 4990939\",\"date: 2010 Q1<br />price: 4843005\",\"date: 2010 Q2<br />price: 5045173\",\"date: 2010 Q3<br />price: 5050197\",\"date: 2010 Q4<br />price: 5169076\",\"date: 2011 Q1<br />price: 5022871\",\"date: 2011 Q2<br />price: 5170735\",\"date: 2011 Q3<br />price: 5237527\",\"date: 2011 Q4<br />price: 5368829\",\"date: 2012 Q1<br />price: 5270922\",\"date: 2012 Q2<br />price: 5380525\",\"date: 2012 Q3<br />price: 5369764\",\"date: 2012 Q4<br />price: 5517818\",\"date: 2013 Q1<br />price: 5256457\",\"date: 2013 Q2<br />price: 5473382\",\"date: 2013 Q3<br />price: 5425704\",\"date: 2013 Q4<br />price: 5567019\",\"date: 2014 Q1<br />price: 5386913\",\"date: 2014 Q2<br />price: 5580023\",\"date: 2014 Q3<br />price: 5564552\",\"date: 2014 Q4<br />price: 5734954\",\"date: 2015 Q1<br />price: 5542520\",\"date: 2015 Q2<br />price: 5710796\",\"date: 2015 Q3<br />price: 5752905\",\"date: 2015 Q4<br />price: 5861933\",\"date: 2016 Q1<br />price: 5633944\",\"date: 2016 Q2<br />price: 5839716\",\"date: 2016 Q3<br />price: 5803647\",\"date: 2016 Q4<br />price: 5996184\",\"date: 2017 Q1<br />price: 5827675\",\"date: 2017 Q2<br />price: 5928554\",\"date: 2017 Q3<br />price: 5872812\",\"date: 2017 Q4<br />price: 6080066\",\"date: 2018 Q1<br />price: 5887853\",\"date: 2018 Q2<br />price: 6095452\",\"date: 2018 Q3<br />price: 6034709\",\"date: 2018 Q4<br />price: 6158657\",\"date: 2019 Q1<br />price: 5953614\",\"date: 2019 Q2<br />price: 6053136\",\"date: 2019 Q3<br />price: 6013545\",\"date: 2019 Q4<br />price: 6095612\",\"date: 2020 Q1<br />price: 5860987\",\"date: 2020 Q2<br />price: 4800279\",\"date: 2020 Q3<br />price: 5507597\",\"date: 2020 Q4<br />price: 5867153\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":66.484018264840202},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Time series plot of the Real GDP for Mexico\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"date\",\"autorange\":true,\"tickmode\":\"auto\",\"ticktext\":[\"2000 Q1\",\"2005 Q1\",\"2010 Q1\",\"2015 Q1\",\"2020 Q1\"],\"tickvals\":[10957,12784,14610,16436,18262],\"categoryorder\":\"array\",\"categoryarray\":[\"2000 Q1\",\"2005 Q1\",\"2010 Q1\",\"2015 Q1\",\"2020 Q1\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"date [1Q]\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\",\"rangeslider\":{\"visible\":true}},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":true,\"range\":[3579586.6299999999,6281469.7700000005],\"tickmode\":\"auto\",\"ticktext\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"tickvals\":[4000000,4500000,5000000,5500000,6000000],\"categoryorder\":\"array\",\"categoryarray\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"GDP\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"3b1050b545b9\":{\"x\":{},\"y\":{},\"type\":\"scatter\"}},\"cur_data\":\"3b1050b545b9\",\"visdat\":{\"3b1050b545b9\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n:::{.callout-important appearance=\"minimal\"}\n\nOur data exhibits an upward *linear trend* (with some economic cycles), and strong *yearly seasonality*.\n\n:::\n\nWe will explore it further with a season plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_train |> \n  gg_season(price) |> \n  ggplotly()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-77dd7ee2fe22d5d088e8\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-77dd7ee2fe22d5d088e8\">{\"x\":{\"data\":[{\"x\":[1096,1186,1277,1369],\"y\":[3702399.5,3896080.3999999999,3906060.1000000001,4038363.2999999998],\"text\":[\"date: 1973 Q1<br />price: 3702400<br />unclass(id):  1<br />id: 1997\",\"date: 1973 Q2<br />price: 3896080<br />unclass(id):  1<br />id: 1997\",\"date: 1973 Q3<br />price: 3906060<br />unclass(id):  1<br />id: 1997\",\"date: 1973 Q4<br />price: 4038363<br />unclass(id):  1<br />id: 1997\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4084285,4134896.5,4138206.3999999999,4146856.2000000002],\"text\":[\"date: 1973 Q1<br />price: 4084285<br />unclass(id):  2<br />id: 1998\",\"date: 1973 Q2<br />price: 4134897<br />unclass(id):  2<br />id: 1998\",\"date: 1973 Q3<br />price: 4138206<br />unclass(id):  2<br />id: 1998\",\"date: 1973 Q4<br />price: 4146856<br />unclass(id):  2<br />id: 1998\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(236,129,82,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4176246.6000000001,4232281.5,4262619.7999999998,4287793.2000000002],\"text\":[\"date: 1973 Q1<br />price: 4176247<br />unclass(id):  3<br />id: 1999\",\"date: 1973 Q2<br />price: 4232282<br />unclass(id):  3<br />id: 1999\",\"date: 1973 Q3<br />price: 4262620<br />unclass(id):  3<br />id: 1999\",\"date: 1973 Q4<br />price: 4287793<br />unclass(id):  3<br />id: 1999\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(223,139,51,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4412429.2999999998,4465501.2999999998,4505218.7999999998,4428704.9000000004],\"text\":[\"date: 1973 Q1<br />price: 4412429<br />unclass(id):  4<br />id: 2000\",\"date: 1973 Q2<br />price: 4465501<br />unclass(id):  4<br />id: 2000\",\"date: 1973 Q3<br />price: 4505219<br />unclass(id):  4<br />id: 2000\",\"date: 1973 Q4<br />price: 4428705<br />unclass(id):  4<br />id: 2000\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(208,147,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4441056.7000000002,4468504.2999999998,4440265.7999999998,4381723.5999999996],\"text\":[\"date: 1973 Q1<br />price: 4441057<br />unclass(id):  5<br />id: 2001\",\"date: 1973 Q2<br />price: 4468504<br />unclass(id):  5<br />id: 2001\",\"date: 1973 Q3<br />price: 4440266<br />unclass(id):  5<br />id: 2001\",\"date: 1973 Q4<br />price: 4381724<br />unclass(id):  5<br />id: 2001\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(188,157,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4269794.2999999998,4504204.7999999998,4456999.5,4458601.0999999996],\"text\":[\"date: 1973 Q1<br />price: 4269794<br />unclass(id):  6<br />id: 2002\",\"date: 1973 Q2<br />price: 4504205<br />unclass(id):  6<br />id: 2002\",\"date: 1973 Q3<br />price: 4457000<br />unclass(id):  6<br />id: 2002\",\"date: 1973 Q4<br />price: 4458601<br />unclass(id):  6<br />id: 2002\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(165,165,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4402394,4520659,4464786.2999999998,4511478.5999999996],\"text\":[\"date: 1973 Q1<br />price: 4402394<br />unclass(id):  7<br />id: 2003\",\"date: 1973 Q2<br />price: 4520659<br />unclass(id):  7<br />id: 2003\",\"date: 1973 Q3<br />price: 4464786<br />unclass(id):  7<br />id: 2003\",\"date: 1973 Q4<br />price: 4511479<br />unclass(id):  7<br />id: 2003\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(140,172,9,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4546248.0999999996,4692565.4000000004,4615345.7999999998,4683348.2000000002],\"text\":[\"date: 1973 Q1<br />price: 4546248<br />unclass(id):  8<br />id: 2004\",\"date: 1973 Q2<br />price: 4692565<br />unclass(id):  8<br />id: 2004\",\"date: 1973 Q3<br />price: 4615346<br />unclass(id):  8<br />id: 2004\",\"date: 1973 Q4<br />price: 4683348<br />unclass(id):  8<br />id: 2004\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(111,178,33,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4567925.2999999998,4804673.0999999996,4720813.5,4835839.0999999996],\"text\":[\"date: 1973 Q1<br />price: 4567925<br />unclass(id):  9<br />id: 2005\",\"date: 1973 Q2<br />price: 4804673<br />unclass(id):  9<br />id: 2005\",\"date: 1973 Q3<br />price: 4720814<br />unclass(id):  9<br />id: 2005\",\"date: 1973 Q4<br />price: 4835839<br />unclass(id):  9<br />id: 2005\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(69,183,48,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4840632.7000000002,5029029.7999999998,4959009.2000000002,5010132.4000000004],\"text\":[\"date: 1973 Q1<br />price: 4840633<br />unclass(id): 10<br />id: 2006\",\"date: 1973 Q2<br />price: 5029030<br />unclass(id): 10<br />id: 2006\",\"date: 1973 Q3<br />price: 4959009<br />unclass(id): 10<br />id: 2006\",\"date: 1973 Q4<br />price: 5010132<br />unclass(id): 10<br />id: 2006\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(15,187,72,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4936402.7000000002,5127366.4000000004,5066705.0999999996,5120553.0999999996],\"text\":[\"date: 1973 Q1<br />price: 4936403<br />unclass(id): 11<br />id: 2007\",\"date: 1973 Q2<br />price: 5127366<br />unclass(id): 11<br />id: 2007\",\"date: 1973 Q3<br />price: 5066705<br />unclass(id): 11<br />id: 2007\",\"date: 1973 Q4<br />price: 5120553<br />unclass(id): 11<br />id: 2007\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(28,189,108,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4975733.0999999996,5249628.9000000004,5123968.7000000002,5092731],\"text\":[\"date: 1973 Q1<br />price: 4975733<br />unclass(id): 12<br />id: 2008\",\"date: 1973 Q2<br />price: 5249629<br />unclass(id): 12<br />id: 2008\",\"date: 1973 Q3<br />price: 5123969<br />unclass(id): 12<br />id: 2008\",\"date: 1973 Q4<br />price: 5092731<br />unclass(id): 12<br />id: 2008\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(20,192,142,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4634307.7000000002,4706882.7000000002,4823053.2999999998,4990939],\"text\":[\"date: 1973 Q1<br />price: 4634308<br />unclass(id): 13<br />id: 2009\",\"date: 1973 Q2<br />price: 4706883<br />unclass(id): 13<br />id: 2009\",\"date: 1973 Q3<br />price: 4823053<br />unclass(id): 13<br />id: 2009\",\"date: 1973 Q4<br />price: 4990939<br />unclass(id): 13<br />id: 2009\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(14,192,171,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[4843004.7999999998,5045172.5,5050197.2000000002,5169076.4000000004],\"text\":[\"date: 1973 Q1<br />price: 4843005<br />unclass(id): 14<br />id: 2010\",\"date: 1973 Q2<br />price: 5045173<br />unclass(id): 14<br />id: 2010\",\"date: 1973 Q3<br />price: 5050197<br />unclass(id): 14<br />id: 2010\",\"date: 1973 Q4<br />price: 5169076<br />unclass(id): 14<br />id: 2010\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(22,189,194,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5022870.5,5170734.5999999996,5237527,5368828.5],\"text\":[\"date: 1973 Q1<br />price: 5022871<br />unclass(id): 15<br />id: 2011\",\"date: 1973 Q2<br />price: 5170735<br />unclass(id): 15<br />id: 2011\",\"date: 1973 Q3<br />price: 5237527<br />unclass(id): 15<br />id: 2011\",\"date: 1973 Q4<br />price: 5368829<br />unclass(id): 15<br />id: 2011\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(12,186,218,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5270921.5,5380524.5,5369763.5,5517817.5],\"text\":[\"date: 1973 Q1<br />price: 5270922<br />unclass(id): 16<br />id: 2012\",\"date: 1973 Q2<br />price: 5380525<br />unclass(id): 16<br />id: 2012\",\"date: 1973 Q3<br />price: 5369764<br />unclass(id): 16<br />id: 2012\",\"date: 1973 Q4<br />price: 5517818<br />unclass(id): 16<br />id: 2012\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(46,179,233,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5256456.5,5473382,5425703.5,5567019.4000000004],\"text\":[\"date: 1973 Q1<br />price: 5256457<br />unclass(id): 17<br />id: 2013\",\"date: 1973 Q2<br />price: 5473382<br />unclass(id): 17<br />id: 2013\",\"date: 1973 Q3<br />price: 5425704<br />unclass(id): 17<br />id: 2013\",\"date: 1973 Q4<br />price: 5567019<br />unclass(id): 17<br />id: 2013\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(75,169,243,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5386913.2999999998,5580023.0999999996,5564552.2000000002,5734954.2999999998],\"text\":[\"date: 1973 Q1<br />price: 5386913<br />unclass(id): 18<br />id: 2014\",\"date: 1973 Q2<br />price: 5580023<br />unclass(id): 18<br />id: 2014\",\"date: 1973 Q3<br />price: 5564552<br />unclass(id): 18<br />id: 2014\",\"date: 1973 Q4<br />price: 5734954<br />unclass(id): 18<br />id: 2014\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(93,159,253,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5542519.5999999996,5710796.4000000004,5752905.0999999996,5861933.2999999998],\"text\":[\"date: 1973 Q1<br />price: 5542520<br />unclass(id): 19<br />id: 2015\",\"date: 1973 Q2<br />price: 5710796<br />unclass(id): 19<br />id: 2015\",\"date: 1973 Q3<br />price: 5752905<br />unclass(id): 19<br />id: 2015\",\"date: 1973 Q4<br />price: 5861933<br />unclass(id): 19<br />id: 2015\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(139,148,254,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5633943.9000000004,5839716,5803647,5996183.7999999998],\"text\":[\"date: 1973 Q1<br />price: 5633944<br />unclass(id): 20<br />id: 2016\",\"date: 1973 Q2<br />price: 5839716<br />unclass(id): 20<br />id: 2016\",\"date: 1973 Q3<br />price: 5803647<br />unclass(id): 20<br />id: 2016\",\"date: 1973 Q4<br />price: 5996184<br />unclass(id): 20<br />id: 2016\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(180,134,253,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5827675.4000000004,5928553.7999999998,5872811.7000000002,6080066.4000000004],\"text\":[\"date: 1973 Q1<br />price: 5827675<br />unclass(id): 21<br />id: 2017\",\"date: 1973 Q2<br />price: 5928554<br />unclass(id): 21<br />id: 2017\",\"date: 1973 Q3<br />price: 5872812<br />unclass(id): 21<br />id: 2017\",\"date: 1973 Q4<br />price: 6080066<br />unclass(id): 21<br />id: 2017\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(215,117,251,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5887852.7999999998,6095451.9000000004,6034708.7000000002,6158656.9000000004],\"text\":[\"date: 1973 Q1<br />price: 5887853<br />unclass(id): 22<br />id: 2018\",\"date: 1973 Q2<br />price: 6095452<br />unclass(id): 22<br />id: 2018\",\"date: 1973 Q3<br />price: 6034709<br />unclass(id): 22<br />id: 2018\",\"date: 1973 Q4<br />price: 6158657<br />unclass(id): 22<br />id: 2018\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(232,109,234,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5953614.0999999996,6053135.7000000002,6013544.5,6095611.5],\"text\":[\"date: 1973 Q1<br />price: 5953614<br />unclass(id): 23<br />id: 2019\",\"date: 1973 Q2<br />price: 6053136<br />unclass(id): 23<br />id: 2019\",\"date: 1973 Q3<br />price: 6013545<br />unclass(id): 23<br />id: 2019\",\"date: 1973 Q4<br />price: 6095612<br />unclass(id): 23<br />id: 2019\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(244,103,214,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096,1186,1277,1369],\"y\":[5860986.5999999996,4800279.0999999996,5507597.0999999996,5867153.2999999998],\"text\":[\"date: 1973 Q1<br />price: 5860987<br />unclass(id): 24<br />id: 2020\",\"date: 1973 Q2<br />price: 4800279<br />unclass(id): 24<br />id: 2020\",\"date: 1973 Q3<br />price: 5507597<br />unclass(id): 24<br />id: 2020\",\"date: 1973 Q4<br />price: 5867153<br />unclass(id): 24<br />id: 2020\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,97,195,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1096],\"y\":[4000000],\"name\":\"99_5f9726d0d96965194f3e94e0acc36cba\",\"type\":\"scatter\",\"mode\":\"markers\",\"opacity\":0,\"hoverinfo\":\"skip\",\"showlegend\":false,\"marker\":{\"color\":[0,1],\"colorscale\":[[0,\"#F8766D\"],[0.0033444816053511683,\"#F7776B\"],[0.0066889632107023367,\"#F67869\"],[0.010033444816053515,\"#F57967\"],[0.013377926421404684,\"#F47A65\"],[0.016722408026755852,\"#F47A63\"],[0.020066889632107031,\"#F37B61\"],[0.023411371237458199,\"#F27C5F\"],[0.026755852842809368,\"#F17D5D\"],[0.030100334448160536,\"#F07E5B\"],[0.033444816053511704,\"#EF7F59\"],[0.03678929765886288,\"#EE7F56\"],[0.040133779264214048,\"#ED8054\"],[0.043478260869565216,\"#EC8152\"],[0.046822742474916398,\"#EB8250\"],[0.050167224080267574,\"#EA834E\"],[0.053511705685618735,\"#E9834C\"],[0.05685618729096989,\"#E88449\"],[0.060200668896321072,\"#E78547\"],[0.06354515050167224,\"#E68645\"],[0.066889632107023408,\"#E58642\"],[0.070234113712374577,\"#E48740\"],[0.073578595317725759,\"#E3883D\"],[0.076923076923076913,\"#E2883B\"],[0.080267558528428096,\"#E18938\"],[0.083612040133779278,\"#E08A36\"],[0.086956521739130432,\"#DF8B33\"],[0.090301003344481615,\"#DE8B30\"],[0.093645484949832797,\"#DD8C2D\"],[0.096989966555183951,\"#DC8D2A\"],[0.10033444816053513,\"#DB8D27\"],[0.10367892976588629,\"#DA8E24\"],[0.10702341137123747,\"#D98F20\"],[0.11036789297658864,\"#D88F1C\"],[0.11371237458193981,\"#D79017\"],[0.11705685618729098,\"#D69112\"],[0.12040133779264214,\"#D5910B\"],[0.12374581939799331,\"#D39203\"],[0.12709030100334448,\"#D29200\"],[0.13043478260869565,\"#D09300\"],[0.13377926421404682,\"#CF9400\"],[0.13712374581939801,\"#CD9500\"],[0.14046822742474915,\"#CC9600\"],[0.14381270903010038,\"#CA9600\"],[0.14715719063545152,\"#C99700\"],[0.15050167224080269,\"#C79800\"],[0.15384615384615383,\"#C59800\"],[0.157190635451505,\"#C49900\"],[0.16053511705685619,\"#C29A00\"],[0.16387959866220739,\"#C19B00\"],[0.16722408026755856,\"#BF9B00\"],[0.17056856187290972,\"#BD9C00\"],[0.17391304347826086,\"#BC9D00\"],[0.17725752508361206,\"#BA9D00\"],[0.18060200668896323,\"#B89E00\"],[0.1839464882943144,\"#B79F00\"],[0.18729096989966559,\"#B59F00\"],[0.19063545150501673,\"#B3A000\"],[0.1939799331103679,\"#B2A000\"],[0.19732441471571907,\"#B0A100\"],[0.20066889632107027,\"#AEA200\"],[0.20401337792642141,\"#ACA200\"],[0.20735785953177258,\"#ABA300\"],[0.21070234113712377,\"#A9A300\"],[0.21404682274247494,\"#A7A400\"],[0.21739130434782608,\"#A5A500\"],[0.22073578595317728,\"#A4A500\"],[0.22408026755852845,\"#A2A600\"],[0.22742474916387961,\"#A0A600\"],[0.23076923076923081,\"#9EA700\"],[0.23411371237458195,\"#9CA700\"],[0.23745819397993312,\"#9AA800\"],[0.24080267558528429,\"#98A900\"],[0.24414715719063548,\"#96A900\"],[0.24749163879598662,\"#94AA00\"],[0.25083612040133779,\"#93AA01\"],[0.25418060200668896,\"#91AB03\"],[0.25752508361204013,\"#8EAB06\"],[0.2608695652173913,\"#8CAC09\"],[0.26421404682274252,\"#8AAC0C\"],[0.26755852842809363,\"#88AD0E\"],[0.2709030100334448,\"#86AD10\"],[0.27424749163879603,\"#84AE12\"],[0.27759197324414719,\"#82AE14\"],[0.28093645484949831,\"#80AE16\"],[0.28428093645484953,\"#7DAF18\"],[0.2876254180602007,\"#7BAF19\"],[0.29096989966555187,\"#79B01B\"],[0.29431438127090304,\"#76B01C\"],[0.2976588628762542,\"#74B11E\"],[0.30100334448160537,\"#71B11F\"],[0.30434782608695654,\"#6FB221\"],[0.30769230769230765,\"#6CB222\"],[0.31103678929765882,\"#69B223\"],[0.31438127090300999,\"#67B324\"],[0.31772575250836121,\"#64B326\"],[0.32107023411371238,\"#61B427\"],[0.32441471571906355,\"#5EB428\"],[0.32775919732441477,\"#5BB529\"],[0.33110367892976594,\"#57B52A\"],[0.33444816053511711,\"#54B52B\"],[0.33779264214046828,\"#50B62D\"],[0.34113712374581945,\"#4DB62E\"],[0.34448160535117056,\"#49B72F\"],[0.34782608695652173,\"#45B730\"],[0.3511705685618729,\"#40B731\"],[0.35451505016722412,\"#3BB832\"],[0.35785953177257529,\"#36B833\"],[0.36120401337792646,\"#30B834\"],[0.36454849498327763,\"#29B935\"],[0.3678929765886288,\"#21B936\"],[0.37123745819397991,\"#16BA37\"],[0.37458193979933119,\"#03BA38\"],[0.3779264214046823,\"#03BA3B\"],[0.38127090301003347,\"#07BA3E\"],[0.38461538461538464,\"#0ABB42\"],[0.38795986622073581,\"#0DBB45\"],[0.39130434782608697,\"#0FBB48\"],[0.39464882943143814,\"#11BB4B\"],[0.39799331103678937,\"#13BB4E\"],[0.40133779264214053,\"#14BB51\"],[0.40468227424749165,\"#16BC54\"],[0.40802675585284282,\"#17BC56\"],[0.41137123745819398,\"#18BC59\"],[0.41471571906354515,\"#19BC5C\"],[0.41806020066889638,\"#1ABC5F\"],[0.42140468227424754,\"#1ABD62\"],[0.42474916387959871,\"#1BBD64\"],[0.42809364548494988,\"#1BBD67\"],[0.43143812709030099,\"#1BBD6A\"],[0.43478260869565216,\"#1CBD6C\"],[0.43812709030100333,\"#1CBD6F\"],[0.44147157190635455,\"#1CBE72\"],[0.44481605351170572,\"#1CBE74\"],[0.44816053511705689,\"#1CBE77\"],[0.45150501672240806,\"#1BBE7A\"],[0.45484949832775923,\"#1BBE7C\"],[0.45819397993311034,\"#1ABF7F\"],[0.46153846153846162,\"#1ABF81\"],[0.46488294314381273,\"#19BF84\"],[0.4682274247491639,\"#18BF87\"],[0.47157190635451507,\"#17BF89\"],[0.47491638795986624,\"#16C08C\"],[0.47826086956521741,\"#14C08E\"],[0.48160535117056857,\"#12C091\"],[0.4849498327759198,\"#10C093\"],[0.48829431438127097,\"#0EC096\"],[0.49163879598662208,\"#0AC199\"],[0.49498327759197325,\"#06C19B\"],[0.49832775919732442,\"#02C19E\"],[0.50167224080267558,\"#01C1A0\"],[0.50501672240802686,\"#04C1A2\"],[0.50836120401337792,\"#06C0A4\"],[0.51170568561872909,\"#09C0A5\"],[0.51505016722408026,\"#0BC0A7\"],[0.51839464882943143,\"#0DC0A9\"],[0.52173913043478259,\"#0EC0AB\"],[0.52508361204013387,\"#0FBFAD\"],[0.52842809364548504,\"#11BFAF\"],[0.53177257525083621,\"#12BFB0\"],[0.53511705685618727,\"#13BFB2\"],[0.53846153846153844,\"#13BFB4\"],[0.5418060200668896,\"#14BEB6\"],[0.54515050167224077,\"#15BEB8\"],[0.54849498327759205,\"#15BEB9\"],[0.55183946488294322,\"#15BEBB\"],[0.55518394648829439,\"#16BEBD\"],[0.55852842809364556,\"#16BDBF\"],[0.56187290969899661,\"#16BDC1\"],[0.56521739130434778,\"#16BDC2\"],[0.56856187290969906,\"#16BDC4\"],[0.57190635451505023,\"#16BCC6\"],[0.5752508361204014,\"#15BCC8\"],[0.57859531772575257,\"#15BCCA\"],[0.58193979933110374,\"#15BCCC\"],[0.5852842809364549,\"#14BCCD\"],[0.58862876254180607,\"#13BBCF\"],[0.59197324414715724,\"#13BBD1\"],[0.59531772575250841,\"#12BBD3\"],[0.59866220735785958,\"#11BBD5\"],[0.60200668896321075,\"#0FBBD6\"],[0.60535117056856191,\"#0EBAD8\"],[0.60869565217391308,\"#0CBADA\"],[0.61204013377926425,\"#0ABADC\"],[0.61538461538461542,\"#08BADE\"],[0.61872909698996659,\"#05B9E0\"],[0.62207357859531776,\"#03B9E1\"],[0.62541806020066892,\"#01B9E3\"],[0.62876254180602009,\"#0DB8E4\"],[0.63210702341137126,\"#15B7E5\"],[0.63545150501672243,\"#1BB7E5\"],[0.6387959866220736,\"#20B6E6\"],[0.64214046822742477,\"#24B5E7\"],[0.64548494983277593,\"#28B4E8\"],[0.6488294314381271,\"#2BB4E8\"],[0.65217391304347827,\"#2EB3E9\"],[0.65551839464882955,\"#31B2EA\"],[0.65886287625418061,\"#34B1EB\"],[0.66220735785953189,\"#37B1EB\"],[0.66555183946488294,\"#39B0EC\"],[0.66889632107023422,\"#3BAFED\"],[0.67224080267558517,\"#3EAEEE\"],[0.67558528428093656,\"#40AEEE\"],[0.67892976588628773,\"#42ADEF\"],[0.6822742474916389,\"#44ACF0\"],[0.68561872909698995,\"#46ABF1\"],[0.68896321070234112,\"#47ABF1\"],[0.69230769230769229,\"#49AAF2\"],[0.69565217391304346,\"#4BA9F3\"],[0.69899665551839463,\"#4CA8F4\"],[0.7023411371237458,\"#4EA8F4\"],[0.70568561872909696,\"#50A7F5\"],[0.70903010033444824,\"#51A6F6\"],[0.71237458193979941,\"#53A5F7\"],[0.71571906354515058,\"#54A4F7\"],[0.71906354515050175,\"#55A4F8\"],[0.72240802675585292,\"#57A3F9\"],[0.72575250836120409,\"#58A2FA\"],[0.72909698996655525,\"#59A1FA\"],[0.73244147157190642,\"#5BA0FB\"],[0.73578595317725759,\"#5CA0FC\"],[0.73913043478260865,\"#5D9FFD\"],[0.74247491638795982,\"#5E9EFD\"],[0.74581939799331098,\"#609DFE\"],[0.74916387959866237,\"#619CFF\"],[0.75250836120401343,\"#659BFF\"],[0.7558528428093646,\"#6A9BFF\"],[0.75919732441471577,\"#6F9AFF\"],[0.76254180602006694,\"#7399FF\"],[0.76588628762541811,\"#7798FE\"],[0.76923076923076927,\"#7C97FE\"],[0.77257525083612044,\"#8096FE\"],[0.77591973244147161,\"#8495FE\"],[0.77926421404682278,\"#8794FE\"],[0.78260869565217395,\"#8B94FE\"],[0.78595317725752512,\"#8F93FE\"],[0.78929765886287628,\"#9292FE\"],[0.79264214046822756,\"#9691FE\"],[0.79598662207357873,\"#9990FD\"],[0.7993311036789299,\"#9C8FFD\"],[0.80267558528428107,\"#9F8EFD\"],[0.80602006688963213,\"#A38DFD\"],[0.80936454849498329,\"#A68CFD\"],[0.81270903010033446,\"#A98AFD\"],[0.81605351170568563,\"#AC89FD\"],[0.8193979933110368,\"#AF88FD\"],[0.82274247491638797,\"#B287FD\"],[0.82608695652173914,\"#B486FD\"],[0.8294314381270903,\"#B785FC\"],[0.83277591973244147,\"#BA84FC\"],[0.83612040133779275,\"#BD82FC\"],[0.83946488294314392,\"#C081FC\"],[0.84280936454849509,\"#C280FC\"],[0.84615384615384626,\"#C57EFC\"],[0.84949832775919742,\"#C87DFC\"],[0.85284280936454859,\"#CA7CFC\"],[0.85618729096989976,\"#CD7AFC\"],[0.85953177257525082,\"#CF79FB\"],[0.86287625418060199,\"#D278FB\"],[0.86622073578595316,\"#D476FB\"],[0.86956521739130432,\"#D775FB\"],[0.87290969899665549,\"#D973FB\"],[0.87625418060200666,\"#DB72FA\"],[0.87959866220735794,\"#DD71F9\"],[0.88294314381270911,\"#DE71F7\"],[0.88628762541806028,\"#DF71F6\"],[0.88963210702341144,\"#E070F4\"],[0.89297658862876261,\"#E170F3\"],[0.89632107023411378,\"#E26FF1\"],[0.89966555183946495,\"#E36FF0\"],[0.90301003344481612,\"#E56EEE\"],[0.90635451505016729,\"#E66EED\"],[0.90969899665551845,\"#E76DEB\"],[0.91304347826086951,\"#E86DEA\"],[0.91638795986622068,\"#E96DE8\"],[0.91973244147157185,\"#EA6CE7\"],[0.92307692307692324,\"#EB6CE5\"],[0.92642140468227441,\"#EC6BE4\"],[0.92976588628762546,\"#ED6BE2\"],[0.93311036789297663,\"#EE6AE1\"],[0.9364548494983278,\"#EF6ADF\"],[0.93979933110367897,\"#F069DE\"],[0.94314381270903014,\"#F169DC\"],[0.94648829431438131,\"#F168DB\"],[0.94983277591973247,\"#F268D9\"],[0.95317725752508364,\"#F368D8\"],[0.95652173913043481,\"#F467D6\"],[0.95986622073578598,\"#F567D5\"],[0.96321070234113715,\"#F666D3\"],[0.96655518394648843,\"#F766D2\"],[0.9698996655518396,\"#F865D0\"],[0.97324414715719076,\"#F965CF\"],[0.97658862876254193,\"#F964CD\"],[0.9799331103678931,\"#FA64CC\"],[0.98327759197324416,\"#FB63CA\"],[0.98662207357859533,\"#FC63C9\"],[0.98996655518394649,\"#FD62C7\"],[0.99331103678929766,\"#FD62C6\"],[0.99665551839464883,\"#FE61C4\"],[1,\"#FF61C3\"]],\"colorbar\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"thickness\":23.039999999999996,\"title\":null,\"titlefont\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"tickmode\":\"array\",\"ticktext\":[\"2001\",\"2006\",\"2011\",\"2016\"],\"tickvals\":[0.17391304347826086,0.39130434782608697,0.60869565217391308,0.82608695652173914],\"tickfont\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"ticklen\":2,\"len\":0.5}},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283104,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":66.484018264840202},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[1082.3499999999999,1382.6500000000001],\"tickmode\":\"array\",\"ticktext\":[\"Q1\",\"Q2\",\"Q3\",\"Q4\"],\"tickvals\":[1096,1186,1277,1369],\"categoryorder\":\"array\",\"categoryarray\":[\"Q1\",\"Q2\",\"Q3\",\"Q4\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"date\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[3579586.6299999999,6281469.7700000005],\"tickmode\":\"array\",\"ticktext\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"tickvals\":[4000000,4500000,5000000,5500000,6000000],\"categoryorder\":\"array\",\"categoryarray\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"price\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"3b10e9b308c\":{\"x\":{},\"y\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"3b10e9b308c\",\"visdat\":{\"3b10e9b308c\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n### TS Decomposition\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_train |> \n  model(stl = STL(price, robust = TRUE)) |> \n  components() |> \n  autoplot() |> \n  ggplotly()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-7d613451c0369220e2c2\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7d613451c0369220e2c2\">{\"x\":{\"data\":[{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[3702399.5,3896080.3999999999,3906060.1000000001,4038363.2999999998,4084285,4134896.5,4138206.3999999999,4146856.2000000002,4176246.6000000001,4232281.5,4262619.7999999998,4287793.2000000002,4412429.2999999998,4465501.2999999998,4505218.7999999998,4428704.9000000004,4441056.7000000002,4468504.2999999998,4440265.7999999998,4381723.5999999996,4269794.2999999998,4504204.7999999998,4456999.5,4458601.0999999996,4402394,4520659,4464786.2999999998,4511478.5999999996,4546248.0999999996,4692565.4000000004,4615345.7999999998,4683348.2000000002,4567925.2999999998,4804673.0999999996,4720813.5,4835839.0999999996,4840632.7000000002,5029029.7999999998,4959009.2000000002,5010132.4000000004,4936402.7000000002,5127366.4000000004,5066705.0999999996,5120553.0999999996,4975733.0999999996,5249628.9000000004,5123968.7000000002,5092731,4634307.7000000002,4706882.7000000002,4823053.2999999998,4990939,4843004.7999999998,5045172.5,5050197.2000000002,5169076.4000000004,5022870.5,5170734.5999999996,5237527,5368828.5,5270921.5,5380524.5,5369763.5,5517817.5,5256456.5,5473382,5425703.5,5567019.4000000004,5386913.2999999998,5580023.0999999996,5564552.2000000002,5734954.2999999998,5542519.5999999996,5710796.4000000004,5752905.0999999996,5861933.2999999998,5633943.9000000004,5839716,5803647,5996183.7999999998,5827675.4000000004,5928553.7999999998,5872811.7000000002,6080066.4000000004,5887852.7999999998,6095451.9000000004,6034708.7000000002,6158656.9000000004,5953614.0999999996,6053135.7000000002,6013544.5,6095611.5,5860986.5999999996,4800279.0999999996,5507597.0999999996,5867153.2999999998],\"text\":[\"date: 1997 Q1<br />.val: 3702399.5000\",\"date: 1997 Q2<br />.val: 3896080.4000\",\"date: 1997 Q3<br />.val: 3906060.1000\",\"date: 1997 Q4<br />.val: 4038363.3000\",\"date: 1998 Q1<br />.val: 4084285.0000\",\"date: 1998 Q2<br />.val: 4134896.5000\",\"date: 1998 Q3<br />.val: 4138206.4000\",\"date: 1998 Q4<br />.val: 4146856.2000\",\"date: 1999 Q1<br />.val: 4176246.6000\",\"date: 1999 Q2<br />.val: 4232281.5000\",\"date: 1999 Q3<br />.val: 4262619.8000\",\"date: 1999 Q4<br />.val: 4287793.2000\",\"date: 2000 Q1<br />.val: 4412429.3000\",\"date: 2000 Q2<br />.val: 4465501.3000\",\"date: 2000 Q3<br />.val: 4505218.8000\",\"date: 2000 Q4<br />.val: 4428704.9000\",\"date: 2001 Q1<br />.val: 4441056.7000\",\"date: 2001 Q2<br />.val: 4468504.3000\",\"date: 2001 Q3<br />.val: 4440265.8000\",\"date: 2001 Q4<br />.val: 4381723.6000\",\"date: 2002 Q1<br />.val: 4269794.3000\",\"date: 2002 Q2<br />.val: 4504204.8000\",\"date: 2002 Q3<br />.val: 4456999.5000\",\"date: 2002 Q4<br />.val: 4458601.1000\",\"date: 2003 Q1<br />.val: 4402394.0000\",\"date: 2003 Q2<br />.val: 4520659.0000\",\"date: 2003 Q3<br />.val: 4464786.3000\",\"date: 2003 Q4<br />.val: 4511478.6000\",\"date: 2004 Q1<br />.val: 4546248.1000\",\"date: 2004 Q2<br />.val: 4692565.4000\",\"date: 2004 Q3<br />.val: 4615345.8000\",\"date: 2004 Q4<br />.val: 4683348.2000\",\"date: 2005 Q1<br />.val: 4567925.3000\",\"date: 2005 Q2<br />.val: 4804673.1000\",\"date: 2005 Q3<br />.val: 4720813.5000\",\"date: 2005 Q4<br />.val: 4835839.1000\",\"date: 2006 Q1<br />.val: 4840632.7000\",\"date: 2006 Q2<br />.val: 5029029.8000\",\"date: 2006 Q3<br />.val: 4959009.2000\",\"date: 2006 Q4<br />.val: 5010132.4000\",\"date: 2007 Q1<br />.val: 4936402.7000\",\"date: 2007 Q2<br />.val: 5127366.4000\",\"date: 2007 Q3<br />.val: 5066705.1000\",\"date: 2007 Q4<br />.val: 5120553.1000\",\"date: 2008 Q1<br />.val: 4975733.1000\",\"date: 2008 Q2<br />.val: 5249628.9000\",\"date: 2008 Q3<br />.val: 5123968.7000\",\"date: 2008 Q4<br />.val: 5092731.0000\",\"date: 2009 Q1<br />.val: 4634307.7000\",\"date: 2009 Q2<br />.val: 4706882.7000\",\"date: 2009 Q3<br />.val: 4823053.3000\",\"date: 2009 Q4<br />.val: 4990939.0000\",\"date: 2010 Q1<br />.val: 4843004.8000\",\"date: 2010 Q2<br />.val: 5045172.5000\",\"date: 2010 Q3<br />.val: 5050197.2000\",\"date: 2010 Q4<br />.val: 5169076.4000\",\"date: 2011 Q1<br />.val: 5022870.5000\",\"date: 2011 Q2<br />.val: 5170734.6000\",\"date: 2011 Q3<br />.val: 5237527.0000\",\"date: 2011 Q4<br />.val: 5368828.5000\",\"date: 2012 Q1<br />.val: 5270921.5000\",\"date: 2012 Q2<br />.val: 5380524.5000\",\"date: 2012 Q3<br />.val: 5369763.5000\",\"date: 2012 Q4<br />.val: 5517817.5000\",\"date: 2013 Q1<br />.val: 5256456.5000\",\"date: 2013 Q2<br />.val: 5473382.0000\",\"date: 2013 Q3<br />.val: 5425703.5000\",\"date: 2013 Q4<br />.val: 5567019.4000\",\"date: 2014 Q1<br />.val: 5386913.3000\",\"date: 2014 Q2<br />.val: 5580023.1000\",\"date: 2014 Q3<br />.val: 5564552.2000\",\"date: 2014 Q4<br />.val: 5734954.3000\",\"date: 2015 Q1<br />.val: 5542519.6000\",\"date: 2015 Q2<br />.val: 5710796.4000\",\"date: 2015 Q3<br />.val: 5752905.1000\",\"date: 2015 Q4<br />.val: 5861933.3000\",\"date: 2016 Q1<br />.val: 5633943.9000\",\"date: 2016 Q2<br />.val: 5839716.0000\",\"date: 2016 Q3<br />.val: 5803647.0000\",\"date: 2016 Q4<br />.val: 5996183.8000\",\"date: 2017 Q1<br />.val: 5827675.4000\",\"date: 2017 Q2<br />.val: 5928553.8000\",\"date: 2017 Q3<br />.val: 5872811.7000\",\"date: 2017 Q4<br />.val: 6080066.4000\",\"date: 2018 Q1<br />.val: 5887852.8000\",\"date: 2018 Q2<br />.val: 6095451.9000\",\"date: 2018 Q3<br />.val: 6034708.7000\",\"date: 2018 Q4<br />.val: 6158656.9000\",\"date: 2019 Q1<br />.val: 5953614.1000\",\"date: 2019 Q2<br />.val: 6053135.7000\",\"date: 2019 Q3<br />.val: 6013544.5000\",\"date: 2019 Q4<br />.val: 6095611.5000\",\"date: 2020 Q1<br />.val: 5860986.6000\",\"date: 2020 Q2<br />.val: 4800279.1000\",\"date: 2020 Q3<br />.val: 5507597.1000\",\"date: 2020 Q4<br />.val: 5867153.3000\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[3750137.6040395503,3826582.7701318511,3898279.4030310018,3963056.4341320535,4022097.6542195529,4081835.9505659863,4128049.4009300601,4170253.1150969062,4203932.0762851285,4237169.2106360942,4269971.4620720688,4310087.1564603653,4357796.4724453092,4393857.8197849924,4427265.7180128004,4442305.3650647439,4446016.8737507034,4438514.6531906547,4423094.2821690822,4424505.3742845031,4431696.9379636832,4442909.0068066185,4457933.5239256043,4458409.0553969452,4459576.851278876,4466263.6758646397,4490772.6440112088,4531980.2772215493,4574077.7009650245,4613357.3309947075,4645537.0563516952,4673703.8418388031,4701311.7889653239,4731912.5792173911,4770820.0941582909,4829691.2643987127,4889173.3060387513,4938914.034948308,4971745.3438968686,4995651.5729409046,5021479.7558934074,5048640.3223588662,5067689.0495973518,5074852.7441011053,5066368.8462432921,5058049.4336796962,5048792.6721797809,5040920.7183049573,4971068.0030688876,4919898.5965546211,4838357.5058574127,4899801.5848762915,4954433.3949644323,5003403.7057802035,5048526.1181517132,5092460.0763766654,5136260.8555192482,5184457.1228302661,5232189.1710194536,5275798.8151261648,5311644.2191528575,5345901.5024390351,5376896.7234949218,5395771.5964908553,5414100.7838657731,5426793.8982028421,5447003.5164707331,5474880.3829809185,5507432.1902824026,5546137.8012666916,5585561.6842939211,5622256.2318287157,5654978.1329827094,5685669.9183177734,5712374.0901796184,5739737.7518289713,5770123.600556978,5801055.2303915564,5838437.2468492957,5863772.2908527087,5882058.989902135,5899989.8468016079,5922645.0693696514,5963332.8991500633,6005307.497780662,6034536.1957789483,6051776.4595775548,6054477.7695008051,6046238.2322396496,6035542.3154051825,6015174.5082979929,5991301.1966469446,5822500.2916898038,5678889.5681301644,5535341.2053171163,5390495.4939370947],\"text\":[\"date: 1997 Q1<br />.val: 3750137.6040\",\"date: 1997 Q2<br />.val: 3826582.7701\",\"date: 1997 Q3<br />.val: 3898279.4030\",\"date: 1997 Q4<br />.val: 3963056.4341\",\"date: 1998 Q1<br />.val: 4022097.6542\",\"date: 1998 Q2<br />.val: 4081835.9506\",\"date: 1998 Q3<br />.val: 4128049.4009\",\"date: 1998 Q4<br />.val: 4170253.1151\",\"date: 1999 Q1<br />.val: 4203932.0763\",\"date: 1999 Q2<br />.val: 4237169.2106\",\"date: 1999 Q3<br />.val: 4269971.4621\",\"date: 1999 Q4<br />.val: 4310087.1565\",\"date: 2000 Q1<br />.val: 4357796.4724\",\"date: 2000 Q2<br />.val: 4393857.8198\",\"date: 2000 Q3<br />.val: 4427265.7180\",\"date: 2000 Q4<br />.val: 4442305.3651\",\"date: 2001 Q1<br />.val: 4446016.8738\",\"date: 2001 Q2<br />.val: 4438514.6532\",\"date: 2001 Q3<br />.val: 4423094.2822\",\"date: 2001 Q4<br />.val: 4424505.3743\",\"date: 2002 Q1<br />.val: 4431696.9380\",\"date: 2002 Q2<br />.val: 4442909.0068\",\"date: 2002 Q3<br />.val: 4457933.5239\",\"date: 2002 Q4<br />.val: 4458409.0554\",\"date: 2003 Q1<br />.val: 4459576.8513\",\"date: 2003 Q2<br />.val: 4466263.6759\",\"date: 2003 Q3<br />.val: 4490772.6440\",\"date: 2003 Q4<br />.val: 4531980.2772\",\"date: 2004 Q1<br />.val: 4574077.7010\",\"date: 2004 Q2<br />.val: 4613357.3310\",\"date: 2004 Q3<br />.val: 4645537.0564\",\"date: 2004 Q4<br />.val: 4673703.8418\",\"date: 2005 Q1<br />.val: 4701311.7890\",\"date: 2005 Q2<br />.val: 4731912.5792\",\"date: 2005 Q3<br />.val: 4770820.0942\",\"date: 2005 Q4<br />.val: 4829691.2644\",\"date: 2006 Q1<br />.val: 4889173.3060\",\"date: 2006 Q2<br />.val: 4938914.0349\",\"date: 2006 Q3<br />.val: 4971745.3439\",\"date: 2006 Q4<br />.val: 4995651.5729\",\"date: 2007 Q1<br />.val: 5021479.7559\",\"date: 2007 Q2<br />.val: 5048640.3224\",\"date: 2007 Q3<br />.val: 5067689.0496\",\"date: 2007 Q4<br />.val: 5074852.7441\",\"date: 2008 Q1<br />.val: 5066368.8462\",\"date: 2008 Q2<br />.val: 5058049.4337\",\"date: 2008 Q3<br />.val: 5048792.6722\",\"date: 2008 Q4<br />.val: 5040920.7183\",\"date: 2009 Q1<br />.val: 4971068.0031\",\"date: 2009 Q2<br />.val: 4919898.5966\",\"date: 2009 Q3<br />.val: 4838357.5059\",\"date: 2009 Q4<br />.val: 4899801.5849\",\"date: 2010 Q1<br />.val: 4954433.3950\",\"date: 2010 Q2<br />.val: 5003403.7058\",\"date: 2010 Q3<br />.val: 5048526.1182\",\"date: 2010 Q4<br />.val: 5092460.0764\",\"date: 2011 Q1<br />.val: 5136260.8555\",\"date: 2011 Q2<br />.val: 5184457.1228\",\"date: 2011 Q3<br />.val: 5232189.1710\",\"date: 2011 Q4<br />.val: 5275798.8151\",\"date: 2012 Q1<br />.val: 5311644.2192\",\"date: 2012 Q2<br />.val: 5345901.5024\",\"date: 2012 Q3<br />.val: 5376896.7235\",\"date: 2012 Q4<br />.val: 5395771.5965\",\"date: 2013 Q1<br />.val: 5414100.7839\",\"date: 2013 Q2<br />.val: 5426793.8982\",\"date: 2013 Q3<br />.val: 5447003.5165\",\"date: 2013 Q4<br />.val: 5474880.3830\",\"date: 2014 Q1<br />.val: 5507432.1903\",\"date: 2014 Q2<br />.val: 5546137.8013\",\"date: 2014 Q3<br />.val: 5585561.6843\",\"date: 2014 Q4<br />.val: 5622256.2318\",\"date: 2015 Q1<br />.val: 5654978.1330\",\"date: 2015 Q2<br />.val: 5685669.9183\",\"date: 2015 Q3<br />.val: 5712374.0902\",\"date: 2015 Q4<br />.val: 5739737.7518\",\"date: 2016 Q1<br />.val: 5770123.6006\",\"date: 2016 Q2<br />.val: 5801055.2304\",\"date: 2016 Q3<br />.val: 5838437.2468\",\"date: 2016 Q4<br />.val: 5863772.2909\",\"date: 2017 Q1<br />.val: 5882058.9899\",\"date: 2017 Q2<br />.val: 5899989.8468\",\"date: 2017 Q3<br />.val: 5922645.0694\",\"date: 2017 Q4<br />.val: 5963332.8992\",\"date: 2018 Q1<br />.val: 6005307.4978\",\"date: 2018 Q2<br />.val: 6034536.1958\",\"date: 2018 Q3<br />.val: 6051776.4596\",\"date: 2018 Q4<br />.val: 6054477.7695\",\"date: 2019 Q1<br />.val: 6046238.2322\",\"date: 2019 Q2<br />.val: 6035542.3154\",\"date: 2019 Q3<br />.val: 6015174.5083\",\"date: 2019 Q4<br />.val: 5991301.1966\",\"date: 2020 Q1<br />.val: 5822500.2917\",\"date: 2020 Q2<br />.val: 5678889.5681\",\"date: 2020 Q3<br />.val: 5535341.2053\",\"date: 2020 Q4<br />.val: 5390495.4939\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[-35287.875727797662,57615.652682540145,-2803.6601596073356,-19456.806658487887,-35219.139572909073,57784.765573736098,-3662.148770891451,-18823.886568023903,-35171.000622517073,57909.102163053445,-4581.296051020593,-18240.728361260222,-34465.166093721789,58187.548705061316,-6868.1088182689564,-16984.830440075966,-33630.154585646451,58662.06083723031,-8864.8691347968306,-15385.69826759685,-35754.267767006735,61494.060617195129,-13294.976504154889,-10619.747406008461,-38068.361792418022,64485.340342266492,-17149.957700242834,-5086.1141801026652,-47672.246731796542,68968.462536032021,-18892.118373221005,4358.5597853229492,-58437.09661837657,72607.504765265519,-21112.794401713098,13508.976779150169,-68224.573856704577,71930.186780655582,-20165.722999314101,24919.31452819156,-78786.349387830487,70974.445749419858,-18815.067634412451,37391.940850291998,-88803.479929432171,61497.936254881861,-13567.579926512633,51810.281695042991,-98724.088881448421,51934.468203701625,-8309.2725967531551,66574.287930148144,-107732.06183631429,44406.521449374275,-7663.3402954757148,79897.277636518716,-115694.07958867049,37058.896047476548,-7843.3077283947387,91563.47101650016,-119729.31371037755,35487.267015865436,-10787.196450725603,99200.832760675039,-123678.38766823652,34013.197804063493,-13881.747311614399,106490.12218856116,-124884.06135247544,34503.348097752707,-19316.62160871398,110670.92159129826,-125340.2427593031,35349.300978282801,-24952.36266150542,114142.17013531621,-123033.39764727019,34151.155797390304,-25199.061722342387,112960.8752489036,-120708.46672722774,33217.168589255118,-25057.035046039207,112208.81911984831,-120087.59354331087,32996.780440218601,-25291.191254884987,112095.88417508639,-119454.2902235659,32756.607495825643,-25543.590223038351,111973.81050944742,-118945.19089951197,32580.14538042578,-25621.51915692908,111732.38036371088],\"text\":[\"date: 1997 Q1<br />.val:  -35287.8757\",\"date: 1997 Q2<br />.val:   57615.6527\",\"date: 1997 Q3<br />.val:   -2803.6602\",\"date: 1997 Q4<br />.val:  -19456.8067\",\"date: 1998 Q1<br />.val:  -35219.1396\",\"date: 1998 Q2<br />.val:   57784.7656\",\"date: 1998 Q3<br />.val:   -3662.1488\",\"date: 1998 Q4<br />.val:  -18823.8866\",\"date: 1999 Q1<br />.val:  -35171.0006\",\"date: 1999 Q2<br />.val:   57909.1022\",\"date: 1999 Q3<br />.val:   -4581.2961\",\"date: 1999 Q4<br />.val:  -18240.7284\",\"date: 2000 Q1<br />.val:  -34465.1661\",\"date: 2000 Q2<br />.val:   58187.5487\",\"date: 2000 Q3<br />.val:   -6868.1088\",\"date: 2000 Q4<br />.val:  -16984.8304\",\"date: 2001 Q1<br />.val:  -33630.1546\",\"date: 2001 Q2<br />.val:   58662.0608\",\"date: 2001 Q3<br />.val:   -8864.8691\",\"date: 2001 Q4<br />.val:  -15385.6983\",\"date: 2002 Q1<br />.val:  -35754.2678\",\"date: 2002 Q2<br />.val:   61494.0606\",\"date: 2002 Q3<br />.val:  -13294.9765\",\"date: 2002 Q4<br />.val:  -10619.7474\",\"date: 2003 Q1<br />.val:  -38068.3618\",\"date: 2003 Q2<br />.val:   64485.3403\",\"date: 2003 Q3<br />.val:  -17149.9577\",\"date: 2003 Q4<br />.val:   -5086.1142\",\"date: 2004 Q1<br />.val:  -47672.2467\",\"date: 2004 Q2<br />.val:   68968.4625\",\"date: 2004 Q3<br />.val:  -18892.1184\",\"date: 2004 Q4<br />.val:    4358.5598\",\"date: 2005 Q1<br />.val:  -58437.0966\",\"date: 2005 Q2<br />.val:   72607.5048\",\"date: 2005 Q3<br />.val:  -21112.7944\",\"date: 2005 Q4<br />.val:   13508.9768\",\"date: 2006 Q1<br />.val:  -68224.5739\",\"date: 2006 Q2<br />.val:   71930.1868\",\"date: 2006 Q3<br />.val:  -20165.7230\",\"date: 2006 Q4<br />.val:   24919.3145\",\"date: 2007 Q1<br />.val:  -78786.3494\",\"date: 2007 Q2<br />.val:   70974.4457\",\"date: 2007 Q3<br />.val:  -18815.0676\",\"date: 2007 Q4<br />.val:   37391.9409\",\"date: 2008 Q1<br />.val:  -88803.4799\",\"date: 2008 Q2<br />.val:   61497.9363\",\"date: 2008 Q3<br />.val:  -13567.5799\",\"date: 2008 Q4<br />.val:   51810.2817\",\"date: 2009 Q1<br />.val:  -98724.0889\",\"date: 2009 Q2<br />.val:   51934.4682\",\"date: 2009 Q3<br />.val:   -8309.2726\",\"date: 2009 Q4<br />.val:   66574.2879\",\"date: 2010 Q1<br />.val: -107732.0618\",\"date: 2010 Q2<br />.val:   44406.5214\",\"date: 2010 Q3<br />.val:   -7663.3403\",\"date: 2010 Q4<br />.val:   79897.2776\",\"date: 2011 Q1<br />.val: -115694.0796\",\"date: 2011 Q2<br />.val:   37058.8960\",\"date: 2011 Q3<br />.val:   -7843.3077\",\"date: 2011 Q4<br />.val:   91563.4710\",\"date: 2012 Q1<br />.val: -119729.3137\",\"date: 2012 Q2<br />.val:   35487.2670\",\"date: 2012 Q3<br />.val:  -10787.1965\",\"date: 2012 Q4<br />.val:   99200.8328\",\"date: 2013 Q1<br />.val: -123678.3877\",\"date: 2013 Q2<br />.val:   34013.1978\",\"date: 2013 Q3<br />.val:  -13881.7473\",\"date: 2013 Q4<br />.val:  106490.1222\",\"date: 2014 Q1<br />.val: -124884.0614\",\"date: 2014 Q2<br />.val:   34503.3481\",\"date: 2014 Q3<br />.val:  -19316.6216\",\"date: 2014 Q4<br />.val:  110670.9216\",\"date: 2015 Q1<br />.val: -125340.2428\",\"date: 2015 Q2<br />.val:   35349.3010\",\"date: 2015 Q3<br />.val:  -24952.3627\",\"date: 2015 Q4<br />.val:  114142.1701\",\"date: 2016 Q1<br />.val: -123033.3976\",\"date: 2016 Q2<br />.val:   34151.1558\",\"date: 2016 Q3<br />.val:  -25199.0617\",\"date: 2016 Q4<br />.val:  112960.8752\",\"date: 2017 Q1<br />.val: -120708.4667\",\"date: 2017 Q2<br />.val:   33217.1686\",\"date: 2017 Q3<br />.val:  -25057.0350\",\"date: 2017 Q4<br />.val:  112208.8191\",\"date: 2018 Q1<br />.val: -120087.5935\",\"date: 2018 Q2<br />.val:   32996.7804\",\"date: 2018 Q3<br />.val:  -25291.1913\",\"date: 2018 Q4<br />.val:  112095.8842\",\"date: 2019 Q1<br />.val: -119454.2902\",\"date: 2019 Q2<br />.val:   32756.6075\",\"date: 2019 Q3<br />.val:  -25543.5902\",\"date: 2019 Q4<br />.val:  111973.8105\",\"date: 2020 Q1<br />.val: -118945.1909\",\"date: 2020 Q2<br />.val:   32580.1454\",\"date: 2020 Q3<br />.val:  -25621.5192\",\"date: 2020 Q4<br />.val:  111732.3804\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y3\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[-12450.228311752435,11881.977185608819,10584.357128605712,94763.672526434064,97406.485353356227,-4724.2161397226155,13819.147840831429,-4573.0285288821906,7485.5243373885751,-62796.812799147796,-2770.3660210482776,-4053.2280991049483,89097.993648412637,13455.931509946473,84821.190805468708,3384.3653753325343,28669.980834943242,-28672.414027885534,26036.386965714395,-27396.076016906649,-126148.37019667681,-198.26742381416261,12360.952578550205,10811.792009063065,-19114.48948645778,-10090.016206906177,-8836.3863109657541,-15415.56304144673,19842.645766771398,10239.606469260529,-11299.13797847461,5285.7983758738264,-74949.392346947454,153.01601734291762,-28893.79975657817,-7361.1411778628826,19683.967817953788,18185.578271036036,7429.5791024453938,-10438.487469095737,-6290.70650557708,7751.631891714409,17831.118037059903,8308.4150486020371,-1832.2663138601929,130081.53006542195,88743.60774673149,0,-238036.2141874386,-264950.36475832295,-6994.9332606596872,24563.127193560824,-3696.5331281181425,-2637.7272295774892,9334.4221437629312,-3280.954013183713,2303.7240694221109,-50781.418877743185,13181.136708941311,1466.2138573350385,79006.594557520002,-864.26945490017533,3653.9729558033869,22845.070748469792,-33965.89619753696,12574.90399309434,-7418.2691591186449,-14351.105169479735,4365.1710700727999,-618.04936444479972,-1692.8626852072775,2027.1465799855068,12881.709776593372,-10222.819296055473,65483.372481886297,8053.3780357120559,-13146.302909707651,4509.6138110533357,-9591.1851269537583,19450.633898387663,66324.876825093292,-4653.215390862897,-24776.334323612042,4524.6817300887778,2632.8957626484334,27918.923780833371,8223.4316773302853,-7916.7536758910865,26830.15798391588,-15163.222901008092,23913.581925045699,-7663.5071563916281,157431.4992097076,-911190.61351059098,-2122.5861601876095,364925.42569919396],\"text\":[\"date: 1997 Q1<br />.val:  -12450.2283\",\"date: 1997 Q2<br />.val:   11881.9772\",\"date: 1997 Q3<br />.val:   10584.3571\",\"date: 1997 Q4<br />.val:   94763.6725\",\"date: 1998 Q1<br />.val:   97406.4854\",\"date: 1998 Q2<br />.val:   -4724.2161\",\"date: 1998 Q3<br />.val:   13819.1478\",\"date: 1998 Q4<br />.val:   -4573.0285\",\"date: 1999 Q1<br />.val:    7485.5243\",\"date: 1999 Q2<br />.val:  -62796.8128\",\"date: 1999 Q3<br />.val:   -2770.3660\",\"date: 1999 Q4<br />.val:   -4053.2281\",\"date: 2000 Q1<br />.val:   89097.9936\",\"date: 2000 Q2<br />.val:   13455.9315\",\"date: 2000 Q3<br />.val:   84821.1908\",\"date: 2000 Q4<br />.val:    3384.3654\",\"date: 2001 Q1<br />.val:   28669.9808\",\"date: 2001 Q2<br />.val:  -28672.4140\",\"date: 2001 Q3<br />.val:   26036.3870\",\"date: 2001 Q4<br />.val:  -27396.0760\",\"date: 2002 Q1<br />.val: -126148.3702\",\"date: 2002 Q2<br />.val:    -198.2674\",\"date: 2002 Q3<br />.val:   12360.9526\",\"date: 2002 Q4<br />.val:   10811.7920\",\"date: 2003 Q1<br />.val:  -19114.4895\",\"date: 2003 Q2<br />.val:  -10090.0162\",\"date: 2003 Q3<br />.val:   -8836.3863\",\"date: 2003 Q4<br />.val:  -15415.5630\",\"date: 2004 Q1<br />.val:   19842.6458\",\"date: 2004 Q2<br />.val:   10239.6065\",\"date: 2004 Q3<br />.val:  -11299.1380\",\"date: 2004 Q4<br />.val:    5285.7984\",\"date: 2005 Q1<br />.val:  -74949.3923\",\"date: 2005 Q2<br />.val:     153.0160\",\"date: 2005 Q3<br />.val:  -28893.7998\",\"date: 2005 Q4<br />.val:   -7361.1412\",\"date: 2006 Q1<br />.val:   19683.9678\",\"date: 2006 Q2<br />.val:   18185.5783\",\"date: 2006 Q3<br />.val:    7429.5791\",\"date: 2006 Q4<br />.val:  -10438.4875\",\"date: 2007 Q1<br />.val:   -6290.7065\",\"date: 2007 Q2<br />.val:    7751.6319\",\"date: 2007 Q3<br />.val:   17831.1180\",\"date: 2007 Q4<br />.val:    8308.4150\",\"date: 2008 Q1<br />.val:   -1832.2663\",\"date: 2008 Q2<br />.val:  130081.5301\",\"date: 2008 Q3<br />.val:   88743.6077\",\"date: 2008 Q4<br />.val:       0.0000\",\"date: 2009 Q1<br />.val: -238036.2142\",\"date: 2009 Q2<br />.val: -264950.3648\",\"date: 2009 Q3<br />.val:   -6994.9333\",\"date: 2009 Q4<br />.val:   24563.1272\",\"date: 2010 Q1<br />.val:   -3696.5331\",\"date: 2010 Q2<br />.val:   -2637.7272\",\"date: 2010 Q3<br />.val:    9334.4221\",\"date: 2010 Q4<br />.val:   -3280.9540\",\"date: 2011 Q1<br />.val:    2303.7241\",\"date: 2011 Q2<br />.val:  -50781.4189\",\"date: 2011 Q3<br />.val:   13181.1367\",\"date: 2011 Q4<br />.val:    1466.2139\",\"date: 2012 Q1<br />.val:   79006.5946\",\"date: 2012 Q2<br />.val:    -864.2695\",\"date: 2012 Q3<br />.val:    3653.9730\",\"date: 2012 Q4<br />.val:   22845.0707\",\"date: 2013 Q1<br />.val:  -33965.8962\",\"date: 2013 Q2<br />.val:   12574.9040\",\"date: 2013 Q3<br />.val:   -7418.2692\",\"date: 2013 Q4<br />.val:  -14351.1052\",\"date: 2014 Q1<br />.val:    4365.1711\",\"date: 2014 Q2<br />.val:    -618.0494\",\"date: 2014 Q3<br />.val:   -1692.8627\",\"date: 2014 Q4<br />.val:    2027.1466\",\"date: 2015 Q1<br />.val:   12881.7098\",\"date: 2015 Q2<br />.val:  -10222.8193\",\"date: 2015 Q3<br />.val:   65483.3725\",\"date: 2015 Q4<br />.val:    8053.3780\",\"date: 2016 Q1<br />.val:  -13146.3029\",\"date: 2016 Q2<br />.val:    4509.6138\",\"date: 2016 Q3<br />.val:   -9591.1851\",\"date: 2016 Q4<br />.val:   19450.6339\",\"date: 2017 Q1<br />.val:   66324.8768\",\"date: 2017 Q2<br />.val:   -4653.2154\",\"date: 2017 Q3<br />.val:  -24776.3343\",\"date: 2017 Q4<br />.val:    4524.6817\",\"date: 2018 Q1<br />.val:    2632.8958\",\"date: 2018 Q2<br />.val:   27918.9238\",\"date: 2018 Q3<br />.val:    8223.4317\",\"date: 2018 Q4<br />.val:   -7916.7537\",\"date: 2019 Q1<br />.val:   26830.1580\",\"date: 2019 Q2<br />.val:  -15163.2229\",\"date: 2019 Q3<br />.val:   23913.5819\",\"date: 2019 Q4<br />.val:   -7663.5072\",\"date: 2020 Q1<br />.val:  157431.4992\",\"date: 2020 Q2<br />.val: -911190.6135\",\"date: 2020 Q3<br />.val:   -2122.5862\",\"date: 2020 Q4<br />.val:  364925.4257\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y4\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[4810786.9935526904,5050269.40644731,5050269.40644731,4810786.9935526904,4810786.9935526904],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[4782566.4803228676,5022048.8932174873,5022048.8932174873,4782566.4803228676,4782566.4803228676],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[-125340.2427593031,114142.17013531621,114142.17013531621,-125340.2427593031,-125340.2427593031],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y3\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[-392873.80035300815,-153391.38745838887,-153391.38745838887,-392873.80035300815,-392873.80035300815],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y4\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":55.452054794520549,\"r\":18.99543378995434,\"b\":40.182648401826491,\"l\":51.872146118721474},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"STL decomposition\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[9235.1000000000004,18978.900000000001],\"tickmode\":\"array\",\"ticktext\":[\"2000 Q1\",\"2005 Q1\",\"2010 Q1\",\"2015 Q1\",\"2020 Q1\"],\"tickvals\":[10957,12784,14610,16436,18262],\"categoryorder\":\"array\",\"categoryarray\":[\"2000 Q1\",\"2005 Q1\",\"2010 Q1\",\"2015 Q1\",\"2020 Q1\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y4\",\"title\":\"\",\"hoverformat\":\".2f\"},\"annotations\":[{\"text\":\"date\",\"x\":0.5,\"y\":0,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":-0,\"xanchor\":\"center\",\"yanchor\":\"top\",\"annotationType\":\"axis\",\"yshift\":-21.917808219178088},{\"text\":\"price\",\"x\":1,\"y\":0.87785388127853881,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"trend\",\"x\":1,\"y\":0.625,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"season_year\",\"x\":1,\"y\":0.375,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"remainder\",\"x\":1,\"y\":0.12214611872146118,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"}],\"yaxis\":{\"domain\":[0.75570776255707761,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[3579586.6299999999,6281469.7700000005],\"tickmode\":\"array\",\"ticktext\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"tickvals\":[4000000,4500000,5000000,5500000,6000000],\"categoryorder\":\"array\",\"categoryarray\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.75570776255707761,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.75570776255707761,\"y1\":1,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.50570776255707761,\"y1\":0.74429223744292239},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.50570776255707761,\"y1\":0.74429223744292239,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.25570776255707761,\"y1\":0.49429223744292239},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.25570776255707761,\"y1\":0.49429223744292239,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":0.24429223744292236},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0,\"y1\":0.24429223744292236,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"}],\"yaxis2\":{\"type\":\"linear\",\"autorange\":false,\"range\":[3634920.5957664875,6169694.7777738674],\"tickmode\":\"array\",\"ticktext\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"tickvals\":[4000000,4500000,5000000,5500000,6000000],\"categoryorder\":\"array\",\"categoryarray\":[\"4000000\",\"4500000\",\"5000000\",\"5500000\",\"6000000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"domain\":[0.50570776255707761,0.74429223744292239],\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis3\":{\"type\":\"linear\",\"autorange\":false,\"range\":[-137314.36340403405,126116.29078004717],\"tickmode\":\"array\",\"ticktext\":[\"-1e+05\",\"-5e+04\",\"0e+00\",\"5e+04\",\"1e+05\"],\"tickvals\":[-100000,-50000,0,50000,100000],\"categoryorder\":\"array\",\"categoryarray\":[\"-1e+05\",\"-5e+04\",\"0e+00\",\"5e+04\",\"1e+05\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"domain\":[0.25570776255707761,0.49429223744292239],\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis4\":{\"type\":\"linear\",\"autorange\":false,\"range\":[-974996.41547108022,428731.22765968321],\"tickmode\":\"array\",\"ticktext\":[\"-5e+05\",\"0e+00\"],\"tickvals\":[-500000,-1.1641532182693481e-10],\"categoryorder\":\"array\",\"categoryarray\":[\"-5e+05\",\"0e+00\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"domain\":[0,0.24429223744292236],\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"3b10d317f70\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"3b1057f079e9\":{\"ymin\":{},\"ymax\":{},\"xmin\":{},\"xmax\":{}}},\"cur_data\":\"3b10d317f70\",\"visdat\":{\"3b10d317f70\":[\"function (y) \",\"x\"],\"3b1057f079e9\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n:::{.callout-important appearance=\"minimal\"}\n\nThe STL decomposition shows that the variance of the seasonal component has been increasing. We could try using a **log transformation** to counter this.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_train |> \n  autoplot(log(price)) +\n  ggtitle(\"Log of the Real GDP of Mexico\")\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_train |> \n  model(stl = STL(log(price) ~ season(window = \"periodic\"), robust = TRUE)) |> \n  components() |> \n  autoplot() |> \n  ggplotly()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-1373722226d8187b5956\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-1373722226d8187b5956\">{\"x\":{\"data\":[{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[15.124491680933948,15.175481580081939,15.178039776885131,15.211350044090155,15.222657240356842,15.23497285589692,15.235773015212381,15.237861062958146,15.244923458525266,15.258251767321346,15.265394505750802,15.271282752957847,15.299935957432435,15.311892039226851,15.320747016102667,15.303617751649623,15.306402901587468,15.312564302094717,15.306224797481443,15.292952720927257,15.267076210742328,15.320521918460621,15.309986339745604,15.3103456200878,15.297659041833789,15.32416833764132,15.311731910005138,15.322135506971994,15.329812857356385,15.361489984479404,15.344897352689474,15.359523839448105,15.334569677294606,15.385099564773514,15.367491694405807,15.391565218864724,15.392555993289784,15.430737640767884,15.416716520682295,15.426972899857565,15.412147425518313,15.450102713006578,15.438201282645942,15.448773018524907,15.420083274502804,15.473667946355167,15.449439833471127,15.443324786879069,15.348997382287953,15.364536399741342,15.388917750202983,15.423134626377458,15.39304591250608,15.433942403454878,15.43493784999408,15.458204584490693,15.429512140994301,15.458525325365784,15.471359998330508,15.496120286260892,15.477715762916731,15.498296418092377,15.496294424546873,15.523492959635043,15.474967688495314,15.515407264876531,15.506658126402762,15.532370351980841,15.499483107232061,15.53470347413387,15.531927072248372,15.562090339900083,15.52795975677668,15.557869046512469,15.565215519968023,15.583990021819083,15.54432026996739,15.58019272348494,15.573997071012544,15.606633791503988,15.578128748109192,15.595290862647216,15.585844072012115,15.620526174935348,15.588401939078343,15.623053460889023,15.613038142914677,15.633369276022174,15.599509004886659,15.616086993257918,15.609524899722057,15.623079644002797,15.583828509156687,15.384184620021049,15.521638988007078,15.58488011676384],\"text\":[\"date: 1997 Q1<br />.val:  1.512449e+01\",\"date: 1997 Q2<br />.val:  1.517548e+01\",\"date: 1997 Q3<br />.val:  1.517804e+01\",\"date: 1997 Q4<br />.val:  1.521135e+01\",\"date: 1998 Q1<br />.val:  1.522266e+01\",\"date: 1998 Q2<br />.val:  1.523497e+01\",\"date: 1998 Q3<br />.val:  1.523577e+01\",\"date: 1998 Q4<br />.val:  1.523786e+01\",\"date: 1999 Q1<br />.val:  1.524492e+01\",\"date: 1999 Q2<br />.val:  1.525825e+01\",\"date: 1999 Q3<br />.val:  1.526539e+01\",\"date: 1999 Q4<br />.val:  1.527128e+01\",\"date: 2000 Q1<br />.val:  1.529994e+01\",\"date: 2000 Q2<br />.val:  1.531189e+01\",\"date: 2000 Q3<br />.val:  1.532075e+01\",\"date: 2000 Q4<br />.val:  1.530362e+01\",\"date: 2001 Q1<br />.val:  1.530640e+01\",\"date: 2001 Q2<br />.val:  1.531256e+01\",\"date: 2001 Q3<br />.val:  1.530622e+01\",\"date: 2001 Q4<br />.val:  1.529295e+01\",\"date: 2002 Q1<br />.val:  1.526708e+01\",\"date: 2002 Q2<br />.val:  1.532052e+01\",\"date: 2002 Q3<br />.val:  1.530999e+01\",\"date: 2002 Q4<br />.val:  1.531035e+01\",\"date: 2003 Q1<br />.val:  1.529766e+01\",\"date: 2003 Q2<br />.val:  1.532417e+01\",\"date: 2003 Q3<br />.val:  1.531173e+01\",\"date: 2003 Q4<br />.val:  1.532214e+01\",\"date: 2004 Q1<br />.val:  1.532981e+01\",\"date: 2004 Q2<br />.val:  1.536149e+01\",\"date: 2004 Q3<br />.val:  1.534490e+01\",\"date: 2004 Q4<br />.val:  1.535952e+01\",\"date: 2005 Q1<br />.val:  1.533457e+01\",\"date: 2005 Q2<br />.val:  1.538510e+01\",\"date: 2005 Q3<br />.val:  1.536749e+01\",\"date: 2005 Q4<br />.val:  1.539157e+01\",\"date: 2006 Q1<br />.val:  1.539256e+01\",\"date: 2006 Q2<br />.val:  1.543074e+01\",\"date: 2006 Q3<br />.val:  1.541672e+01\",\"date: 2006 Q4<br />.val:  1.542697e+01\",\"date: 2007 Q1<br />.val:  1.541215e+01\",\"date: 2007 Q2<br />.val:  1.545010e+01\",\"date: 2007 Q3<br />.val:  1.543820e+01\",\"date: 2007 Q4<br />.val:  1.544877e+01\",\"date: 2008 Q1<br />.val:  1.542008e+01\",\"date: 2008 Q2<br />.val:  1.547367e+01\",\"date: 2008 Q3<br />.val:  1.544944e+01\",\"date: 2008 Q4<br />.val:  1.544332e+01\",\"date: 2009 Q1<br />.val:  1.534900e+01\",\"date: 2009 Q2<br />.val:  1.536454e+01\",\"date: 2009 Q3<br />.val:  1.538892e+01\",\"date: 2009 Q4<br />.val:  1.542313e+01\",\"date: 2010 Q1<br />.val:  1.539305e+01\",\"date: 2010 Q2<br />.val:  1.543394e+01\",\"date: 2010 Q3<br />.val:  1.543494e+01\",\"date: 2010 Q4<br />.val:  1.545820e+01\",\"date: 2011 Q1<br />.val:  1.542951e+01\",\"date: 2011 Q2<br />.val:  1.545853e+01\",\"date: 2011 Q3<br />.val:  1.547136e+01\",\"date: 2011 Q4<br />.val:  1.549612e+01\",\"date: 2012 Q1<br />.val:  1.547772e+01\",\"date: 2012 Q2<br />.val:  1.549830e+01\",\"date: 2012 Q3<br />.val:  1.549629e+01\",\"date: 2012 Q4<br />.val:  1.552349e+01\",\"date: 2013 Q1<br />.val:  1.547497e+01\",\"date: 2013 Q2<br />.val:  1.551541e+01\",\"date: 2013 Q3<br />.val:  1.550666e+01\",\"date: 2013 Q4<br />.val:  1.553237e+01\",\"date: 2014 Q1<br />.val:  1.549948e+01\",\"date: 2014 Q2<br />.val:  1.553470e+01\",\"date: 2014 Q3<br />.val:  1.553193e+01\",\"date: 2014 Q4<br />.val:  1.556209e+01\",\"date: 2015 Q1<br />.val:  1.552796e+01\",\"date: 2015 Q2<br />.val:  1.555787e+01\",\"date: 2015 Q3<br />.val:  1.556522e+01\",\"date: 2015 Q4<br />.val:  1.558399e+01\",\"date: 2016 Q1<br />.val:  1.554432e+01\",\"date: 2016 Q2<br />.val:  1.558019e+01\",\"date: 2016 Q3<br />.val:  1.557400e+01\",\"date: 2016 Q4<br />.val:  1.560663e+01\",\"date: 2017 Q1<br />.val:  1.557813e+01\",\"date: 2017 Q2<br />.val:  1.559529e+01\",\"date: 2017 Q3<br />.val:  1.558584e+01\",\"date: 2017 Q4<br />.val:  1.562053e+01\",\"date: 2018 Q1<br />.val:  1.558840e+01\",\"date: 2018 Q2<br />.val:  1.562305e+01\",\"date: 2018 Q3<br />.val:  1.561304e+01\",\"date: 2018 Q4<br />.val:  1.563337e+01\",\"date: 2019 Q1<br />.val:  1.559951e+01\",\"date: 2019 Q2<br />.val:  1.561609e+01\",\"date: 2019 Q3<br />.val:  1.560952e+01\",\"date: 2019 Q4<br />.val:  1.562308e+01\",\"date: 2020 Q1<br />.val:  1.558383e+01\",\"date: 2020 Q2<br />.val:  1.538418e+01\",\"date: 2020 Q3<br />.val:  1.552164e+01\",\"date: 2020 Q4<br />.val:  1.558488e+01\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[15.143194116817673,15.162776983705802,15.18219186522081,15.200626798015556,15.214897374997749,15.226640469417335,15.233646944250086,15.240977573309481,15.247614237714712,15.255747232999237,15.261355646525439,15.27327271195489,15.28714071906491,15.300554526278452,15.308911570798623,15.310862871948345,15.309342878174281,15.306945793397905,15.299529376496338,15.295195878104064,15.296663253330449,15.300841175360533,15.306684374548349,15.30984113922241,15.310958122292655,15.313047280328089,15.317452085663785,15.326605019719461,15.336399293529524,15.34551355580632,15.349437601953344,15.352173536958389,15.358496641010444,15.365719876098902,15.376263776612447,15.388983696466131,15.402252578204923,15.413157430517936,15.419140552466658,15.423436552713586,15.429168634314404,15.435074852060927,15.438636675317305,15.440742810788157,15.444909389837044,15.446150042356052,15.445605258874116,15.434242525274751,15.419862598631685,15.409706137853352,15.393693208635574,15.404869913589966,15.415277158417613,15.425224233263762,15.434993881115952,15.442697353692356,15.449600713743292,15.458627545159912,15.470179072821479,15.481901407525111,15.489343700587003,15.494810578198702,15.498447472021214,15.500483762770761,15.503357105424936,15.50542651138997,15.510740863157796,15.516011287177403,15.521264235266942,15.527510966885181,15.535528787479054,15.542241693864618,15.548620260000966,15.555206610033164,15.561447004098046,15.566222818971129,15.56921059042693,15.572480742603219,15.580270442133374,15.58706116780386,15.590443512138185,15.592217020727048,15.59562355449809,15.601074982831827,15.607956117984639,15.612509833526769,15.616020075353886,15.616840832961195,15.615186083052635,15.612860934445189,15.610478854252046,15.608502766025541,15.586664157814127,15.557144238698799,15.527702712753701,15.496763396630485],\"text\":[\"date: 1997 Q1<br />.val:  1.514319e+01\",\"date: 1997 Q2<br />.val:  1.516278e+01\",\"date: 1997 Q3<br />.val:  1.518219e+01\",\"date: 1997 Q4<br />.val:  1.520063e+01\",\"date: 1998 Q1<br />.val:  1.521490e+01\",\"date: 1998 Q2<br />.val:  1.522664e+01\",\"date: 1998 Q3<br />.val:  1.523365e+01\",\"date: 1998 Q4<br />.val:  1.524098e+01\",\"date: 1999 Q1<br />.val:  1.524761e+01\",\"date: 1999 Q2<br />.val:  1.525575e+01\",\"date: 1999 Q3<br />.val:  1.526136e+01\",\"date: 1999 Q4<br />.val:  1.527327e+01\",\"date: 2000 Q1<br />.val:  1.528714e+01\",\"date: 2000 Q2<br />.val:  1.530055e+01\",\"date: 2000 Q3<br />.val:  1.530891e+01\",\"date: 2000 Q4<br />.val:  1.531086e+01\",\"date: 2001 Q1<br />.val:  1.530934e+01\",\"date: 2001 Q2<br />.val:  1.530695e+01\",\"date: 2001 Q3<br />.val:  1.529953e+01\",\"date: 2001 Q4<br />.val:  1.529520e+01\",\"date: 2002 Q1<br />.val:  1.529666e+01\",\"date: 2002 Q2<br />.val:  1.530084e+01\",\"date: 2002 Q3<br />.val:  1.530668e+01\",\"date: 2002 Q4<br />.val:  1.530984e+01\",\"date: 2003 Q1<br />.val:  1.531096e+01\",\"date: 2003 Q2<br />.val:  1.531305e+01\",\"date: 2003 Q3<br />.val:  1.531745e+01\",\"date: 2003 Q4<br />.val:  1.532661e+01\",\"date: 2004 Q1<br />.val:  1.533640e+01\",\"date: 2004 Q2<br />.val:  1.534551e+01\",\"date: 2004 Q3<br />.val:  1.534944e+01\",\"date: 2004 Q4<br />.val:  1.535217e+01\",\"date: 2005 Q1<br />.val:  1.535850e+01\",\"date: 2005 Q2<br />.val:  1.536572e+01\",\"date: 2005 Q3<br />.val:  1.537626e+01\",\"date: 2005 Q4<br />.val:  1.538898e+01\",\"date: 2006 Q1<br />.val:  1.540225e+01\",\"date: 2006 Q2<br />.val:  1.541316e+01\",\"date: 2006 Q3<br />.val:  1.541914e+01\",\"date: 2006 Q4<br />.val:  1.542344e+01\",\"date: 2007 Q1<br />.val:  1.542917e+01\",\"date: 2007 Q2<br />.val:  1.543507e+01\",\"date: 2007 Q3<br />.val:  1.543864e+01\",\"date: 2007 Q4<br />.val:  1.544074e+01\",\"date: 2008 Q1<br />.val:  1.544491e+01\",\"date: 2008 Q2<br />.val:  1.544615e+01\",\"date: 2008 Q3<br />.val:  1.544561e+01\",\"date: 2008 Q4<br />.val:  1.543424e+01\",\"date: 2009 Q1<br />.val:  1.541986e+01\",\"date: 2009 Q2<br />.val:  1.540971e+01\",\"date: 2009 Q3<br />.val:  1.539369e+01\",\"date: 2009 Q4<br />.val:  1.540487e+01\",\"date: 2010 Q1<br />.val:  1.541528e+01\",\"date: 2010 Q2<br />.val:  1.542522e+01\",\"date: 2010 Q3<br />.val:  1.543499e+01\",\"date: 2010 Q4<br />.val:  1.544270e+01\",\"date: 2011 Q1<br />.val:  1.544960e+01\",\"date: 2011 Q2<br />.val:  1.545863e+01\",\"date: 2011 Q3<br />.val:  1.547018e+01\",\"date: 2011 Q4<br />.val:  1.548190e+01\",\"date: 2012 Q1<br />.val:  1.548934e+01\",\"date: 2012 Q2<br />.val:  1.549481e+01\",\"date: 2012 Q3<br />.val:  1.549845e+01\",\"date: 2012 Q4<br />.val:  1.550048e+01\",\"date: 2013 Q1<br />.val:  1.550336e+01\",\"date: 2013 Q2<br />.val:  1.550543e+01\",\"date: 2013 Q3<br />.val:  1.551074e+01\",\"date: 2013 Q4<br />.val:  1.551601e+01\",\"date: 2014 Q1<br />.val:  1.552126e+01\",\"date: 2014 Q2<br />.val:  1.552751e+01\",\"date: 2014 Q3<br />.val:  1.553553e+01\",\"date: 2014 Q4<br />.val:  1.554224e+01\",\"date: 2015 Q1<br />.val:  1.554862e+01\",\"date: 2015 Q2<br />.val:  1.555521e+01\",\"date: 2015 Q3<br />.val:  1.556145e+01\",\"date: 2015 Q4<br />.val:  1.556622e+01\",\"date: 2016 Q1<br />.val:  1.556921e+01\",\"date: 2016 Q2<br />.val:  1.557248e+01\",\"date: 2016 Q3<br />.val:  1.558027e+01\",\"date: 2016 Q4<br />.val:  1.558706e+01\",\"date: 2017 Q1<br />.val:  1.559044e+01\",\"date: 2017 Q2<br />.val:  1.559222e+01\",\"date: 2017 Q3<br />.val:  1.559562e+01\",\"date: 2017 Q4<br />.val:  1.560107e+01\",\"date: 2018 Q1<br />.val:  1.560796e+01\",\"date: 2018 Q2<br />.val:  1.561251e+01\",\"date: 2018 Q3<br />.val:  1.561602e+01\",\"date: 2018 Q4<br />.val:  1.561684e+01\",\"date: 2019 Q1<br />.val:  1.561519e+01\",\"date: 2019 Q2<br />.val:  1.561286e+01\",\"date: 2019 Q3<br />.val:  1.561048e+01\",\"date: 2019 Q4<br />.val:  1.560850e+01\",\"date: 2020 Q1<br />.val:  1.558666e+01\",\"date: 2020 Q2<br />.val:  1.555714e+01\",\"date: 2020 Q3<br />.val:  1.552770e+01\",\"date: 2020 Q4<br />.val:  1.549676e+01\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213,-0.016962500554997179,0.0093090175122117202,-0.0018169366561509887,0.0094704418487096213],\"text\":[\"date: 1997 Q1<br />.val: -1.696250e-02\",\"date: 1997 Q2<br />.val:  9.309018e-03\",\"date: 1997 Q3<br />.val: -1.816937e-03\",\"date: 1997 Q4<br />.val:  9.470442e-03\",\"date: 1998 Q1<br />.val: -1.696250e-02\",\"date: 1998 Q2<br />.val:  9.309018e-03\",\"date: 1998 Q3<br />.val: -1.816937e-03\",\"date: 1998 Q4<br />.val:  9.470442e-03\",\"date: 1999 Q1<br />.val: -1.696250e-02\",\"date: 1999 Q2<br />.val:  9.309018e-03\",\"date: 1999 Q3<br />.val: -1.816937e-03\",\"date: 1999 Q4<br />.val:  9.470442e-03\",\"date: 2000 Q1<br />.val: -1.696250e-02\",\"date: 2000 Q2<br />.val:  9.309018e-03\",\"date: 2000 Q3<br />.val: -1.816937e-03\",\"date: 2000 Q4<br />.val:  9.470442e-03\",\"date: 2001 Q1<br />.val: -1.696250e-02\",\"date: 2001 Q2<br />.val:  9.309018e-03\",\"date: 2001 Q3<br />.val: -1.816937e-03\",\"date: 2001 Q4<br />.val:  9.470442e-03\",\"date: 2002 Q1<br />.val: -1.696250e-02\",\"date: 2002 Q2<br />.val:  9.309018e-03\",\"date: 2002 Q3<br />.val: -1.816937e-03\",\"date: 2002 Q4<br />.val:  9.470442e-03\",\"date: 2003 Q1<br />.val: -1.696250e-02\",\"date: 2003 Q2<br />.val:  9.309018e-03\",\"date: 2003 Q3<br />.val: -1.816937e-03\",\"date: 2003 Q4<br />.val:  9.470442e-03\",\"date: 2004 Q1<br />.val: -1.696250e-02\",\"date: 2004 Q2<br />.val:  9.309018e-03\",\"date: 2004 Q3<br />.val: -1.816937e-03\",\"date: 2004 Q4<br />.val:  9.470442e-03\",\"date: 2005 Q1<br />.val: -1.696250e-02\",\"date: 2005 Q2<br />.val:  9.309018e-03\",\"date: 2005 Q3<br />.val: -1.816937e-03\",\"date: 2005 Q4<br />.val:  9.470442e-03\",\"date: 2006 Q1<br />.val: -1.696250e-02\",\"date: 2006 Q2<br />.val:  9.309018e-03\",\"date: 2006 Q3<br />.val: -1.816937e-03\",\"date: 2006 Q4<br />.val:  9.470442e-03\",\"date: 2007 Q1<br />.val: -1.696250e-02\",\"date: 2007 Q2<br />.val:  9.309018e-03\",\"date: 2007 Q3<br />.val: -1.816937e-03\",\"date: 2007 Q4<br />.val:  9.470442e-03\",\"date: 2008 Q1<br />.val: -1.696250e-02\",\"date: 2008 Q2<br />.val:  9.309018e-03\",\"date: 2008 Q3<br />.val: -1.816937e-03\",\"date: 2008 Q4<br />.val:  9.470442e-03\",\"date: 2009 Q1<br />.val: -1.696250e-02\",\"date: 2009 Q2<br />.val:  9.309018e-03\",\"date: 2009 Q3<br />.val: -1.816937e-03\",\"date: 2009 Q4<br />.val:  9.470442e-03\",\"date: 2010 Q1<br />.val: -1.696250e-02\",\"date: 2010 Q2<br />.val:  9.309018e-03\",\"date: 2010 Q3<br />.val: -1.816937e-03\",\"date: 2010 Q4<br />.val:  9.470442e-03\",\"date: 2011 Q1<br />.val: -1.696250e-02\",\"date: 2011 Q2<br />.val:  9.309018e-03\",\"date: 2011 Q3<br />.val: -1.816937e-03\",\"date: 2011 Q4<br />.val:  9.470442e-03\",\"date: 2012 Q1<br />.val: -1.696250e-02\",\"date: 2012 Q2<br />.val:  9.309018e-03\",\"date: 2012 Q3<br />.val: -1.816937e-03\",\"date: 2012 Q4<br />.val:  9.470442e-03\",\"date: 2013 Q1<br />.val: -1.696250e-02\",\"date: 2013 Q2<br />.val:  9.309018e-03\",\"date: 2013 Q3<br />.val: -1.816937e-03\",\"date: 2013 Q4<br />.val:  9.470442e-03\",\"date: 2014 Q1<br />.val: -1.696250e-02\",\"date: 2014 Q2<br />.val:  9.309018e-03\",\"date: 2014 Q3<br />.val: -1.816937e-03\",\"date: 2014 Q4<br />.val:  9.470442e-03\",\"date: 2015 Q1<br />.val: -1.696250e-02\",\"date: 2015 Q2<br />.val:  9.309018e-03\",\"date: 2015 Q3<br />.val: -1.816937e-03\",\"date: 2015 Q4<br />.val:  9.470442e-03\",\"date: 2016 Q1<br />.val: -1.696250e-02\",\"date: 2016 Q2<br />.val:  9.309018e-03\",\"date: 2016 Q3<br />.val: -1.816937e-03\",\"date: 2016 Q4<br />.val:  9.470442e-03\",\"date: 2017 Q1<br />.val: -1.696250e-02\",\"date: 2017 Q2<br />.val:  9.309018e-03\",\"date: 2017 Q3<br />.val: -1.816937e-03\",\"date: 2017 Q4<br />.val:  9.470442e-03\",\"date: 2018 Q1<br />.val: -1.696250e-02\",\"date: 2018 Q2<br />.val:  9.309018e-03\",\"date: 2018 Q3<br />.val: -1.816937e-03\",\"date: 2018 Q4<br />.val:  9.470442e-03\",\"date: 2019 Q1<br />.val: -1.696250e-02\",\"date: 2019 Q2<br />.val:  9.309018e-03\",\"date: 2019 Q3<br />.val: -1.816937e-03\",\"date: 2019 Q4<br />.val:  9.470442e-03\",\"date: 2020 Q1<br />.val: -1.696250e-02\",\"date: 2020 Q2<br />.val:  9.309018e-03\",\"date: 2020 Q3<br />.val: -1.816937e-03\",\"date: 2020 Q4<br />.val:  9.470442e-03\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y3\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9862,9952,10043,10135,10227,10317,10408,10500,10592,10682,10773,10865,10957,11048,11139,11231,11323,11413,11504,11596,11688,11778,11869,11961,12053,12143,12234,12326,12418,12509,12600,12692,12784,12874,12965,13057,13149,13239,13330,13422,13514,13604,13695,13787,13879,13970,14061,14153,14245,14335,14426,14518,14610,14700,14791,14883,14975,15065,15156,15248,15340,15431,15522,15614,15706,15796,15887,15979,16071,16161,16252,16344,16436,16526,16617,16709,16801,16892,16983,17075,17167,17257,17348,17440,17532,17622,17713,17805,17897,17987,18078,18170,18262,18353,18444,18536],\"y\":[-0.0017399353287270714,0.0033955788639250528,-0.0023351516795280247,0.0012528042258903582,0.024722365914090716,-0.00097663103262668471,0.003943007618445904,-0.01258695220004391,0.014271721365551215,-0.0068044831901037384,0.0058557958815139699,-0.011460400845752616,0.029757738922523203,0.0020284954361873275,0.01365238196019547,-0.016715562147430418,0.014022523968185041,-0.0036905088153993404,0.0085123576412566848,-0.01171359902551572,-0.012624542033123021,0.010371725587875247,0.0051189018534074648,-0.0089659609833194764,0.003663420096131631,0.0018120398010186278,-0.0039032390024953401,-0.013939954596175141,0.010376064381858896,0.0066674111608708841,-0.002723312607718853,-0.0021201393589933559,-0.0069644631608394292,0.010070671162399236,-0.0069551455504885951,-0.0068889194501160489,0.0072659156398593439,0.0082711927377356886,-0.00060709512821155442,-0.0059340947047292758,-5.8708241093441416e-05,0.0057188434334385363,0.0013815439847881805,-0.0014402341119588158,-0.0078636147792412459,0.018208886486902998,0.0056515112531627665,-0.00038818024439102317,-0.053902715788733957,-0.05447875562422233,-0.0029585217764385163,0.0087942709387824891,-0.0052687453565347653,-0.00059084732109582205,0.0017609055342795443,0.0060367889496273364,-0.0031260721939929681,-0.0094112373063399701,0.0029978621651807202,0.0047484368870716054,0.0053345628847250026,-0.0058231776185380113,-0.00033611081818918365,0.013538755015572335,-0.011426916374624341,0.00067173597434866394,-0.0022658000988826643,0.0068886229547295841,-0.004818627479883375,-0.0021165102635229971,-0.001784778574529966,0.010378204186755724,-0.0036980026692887691,-0.0066465810329070507,0.0055854525261285204,0.0082967609992454783,-0.0079278199045429432,-0.0015970366304909334,-0.0044564344646786935,0.01010218185141909,0.0046477365260049197,-0.0062351755920442287,-0.0079625458298231422,0.00998075025481171,-0.0025916783512975883,0.001234609850042645,-0.0011649957830570656,0.0070580012122700708,0.001285422389022628,-0.0060829586994834983,0.00086298212616320313,0.0051064361285462212,0.014126851897557913,-0.1822686361899617,-0.0042467880904712985,0.078646278284645987],\"text\":[\"date: 1997 Q1<br />.val: -1.739935e-03\",\"date: 1997 Q2<br />.val:  3.395579e-03\",\"date: 1997 Q3<br />.val: -2.335152e-03\",\"date: 1997 Q4<br />.val:  1.252804e-03\",\"date: 1998 Q1<br />.val:  2.472237e-02\",\"date: 1998 Q2<br />.val: -9.766310e-04\",\"date: 1998 Q3<br />.val:  3.943008e-03\",\"date: 1998 Q4<br />.val: -1.258695e-02\",\"date: 1999 Q1<br />.val:  1.427172e-02\",\"date: 1999 Q2<br />.val: -6.804483e-03\",\"date: 1999 Q3<br />.val:  5.855796e-03\",\"date: 1999 Q4<br />.val: -1.146040e-02\",\"date: 2000 Q1<br />.val:  2.975774e-02\",\"date: 2000 Q2<br />.val:  2.028495e-03\",\"date: 2000 Q3<br />.val:  1.365238e-02\",\"date: 2000 Q4<br />.val: -1.671556e-02\",\"date: 2001 Q1<br />.val:  1.402252e-02\",\"date: 2001 Q2<br />.val: -3.690509e-03\",\"date: 2001 Q3<br />.val:  8.512358e-03\",\"date: 2001 Q4<br />.val: -1.171360e-02\",\"date: 2002 Q1<br />.val: -1.262454e-02\",\"date: 2002 Q2<br />.val:  1.037173e-02\",\"date: 2002 Q3<br />.val:  5.118902e-03\",\"date: 2002 Q4<br />.val: -8.965961e-03\",\"date: 2003 Q1<br />.val:  3.663420e-03\",\"date: 2003 Q2<br />.val:  1.812040e-03\",\"date: 2003 Q3<br />.val: -3.903239e-03\",\"date: 2003 Q4<br />.val: -1.393995e-02\",\"date: 2004 Q1<br />.val:  1.037606e-02\",\"date: 2004 Q2<br />.val:  6.667411e-03\",\"date: 2004 Q3<br />.val: -2.723313e-03\",\"date: 2004 Q4<br />.val: -2.120139e-03\",\"date: 2005 Q1<br />.val: -6.964463e-03\",\"date: 2005 Q2<br />.val:  1.007067e-02\",\"date: 2005 Q3<br />.val: -6.955146e-03\",\"date: 2005 Q4<br />.val: -6.888919e-03\",\"date: 2006 Q1<br />.val:  7.265916e-03\",\"date: 2006 Q2<br />.val:  8.271193e-03\",\"date: 2006 Q3<br />.val: -6.070951e-04\",\"date: 2006 Q4<br />.val: -5.934095e-03\",\"date: 2007 Q1<br />.val: -5.870824e-05\",\"date: 2007 Q2<br />.val:  5.718843e-03\",\"date: 2007 Q3<br />.val:  1.381544e-03\",\"date: 2007 Q4<br />.val: -1.440234e-03\",\"date: 2008 Q1<br />.val: -7.863615e-03\",\"date: 2008 Q2<br />.val:  1.820889e-02\",\"date: 2008 Q3<br />.val:  5.651511e-03\",\"date: 2008 Q4<br />.val: -3.881802e-04\",\"date: 2009 Q1<br />.val: -5.390272e-02\",\"date: 2009 Q2<br />.val: -5.447876e-02\",\"date: 2009 Q3<br />.val: -2.958522e-03\",\"date: 2009 Q4<br />.val:  8.794271e-03\",\"date: 2010 Q1<br />.val: -5.268745e-03\",\"date: 2010 Q2<br />.val: -5.908473e-04\",\"date: 2010 Q3<br />.val:  1.760906e-03\",\"date: 2010 Q4<br />.val:  6.036789e-03\",\"date: 2011 Q1<br />.val: -3.126072e-03\",\"date: 2011 Q2<br />.val: -9.411237e-03\",\"date: 2011 Q3<br />.val:  2.997862e-03\",\"date: 2011 Q4<br />.val:  4.748437e-03\",\"date: 2012 Q1<br />.val:  5.334563e-03\",\"date: 2012 Q2<br />.val: -5.823178e-03\",\"date: 2012 Q3<br />.val: -3.361108e-04\",\"date: 2012 Q4<br />.val:  1.353876e-02\",\"date: 2013 Q1<br />.val: -1.142692e-02\",\"date: 2013 Q2<br />.val:  6.717360e-04\",\"date: 2013 Q3<br />.val: -2.265800e-03\",\"date: 2013 Q4<br />.val:  6.888623e-03\",\"date: 2014 Q1<br />.val: -4.818627e-03\",\"date: 2014 Q2<br />.val: -2.116510e-03\",\"date: 2014 Q3<br />.val: -1.784779e-03\",\"date: 2014 Q4<br />.val:  1.037820e-02\",\"date: 2015 Q1<br />.val: -3.698003e-03\",\"date: 2015 Q2<br />.val: -6.646581e-03\",\"date: 2015 Q3<br />.val:  5.585453e-03\",\"date: 2015 Q4<br />.val:  8.296761e-03\",\"date: 2016 Q1<br />.val: -7.927820e-03\",\"date: 2016 Q2<br />.val: -1.597037e-03\",\"date: 2016 Q3<br />.val: -4.456434e-03\",\"date: 2016 Q4<br />.val:  1.010218e-02\",\"date: 2017 Q1<br />.val:  4.647737e-03\",\"date: 2017 Q2<br />.val: -6.235176e-03\",\"date: 2017 Q3<br />.val: -7.962546e-03\",\"date: 2017 Q4<br />.val:  9.980750e-03\",\"date: 2018 Q1<br />.val: -2.591678e-03\",\"date: 2018 Q2<br />.val:  1.234610e-03\",\"date: 2018 Q3<br />.val: -1.164996e-03\",\"date: 2018 Q4<br />.val:  7.058001e-03\",\"date: 2019 Q1<br />.val:  1.285422e-03\",\"date: 2019 Q2<br />.val: -6.082959e-03\",\"date: 2019 Q3<br />.val:  8.629821e-04\",\"date: 2019 Q4<br />.val:  5.106436e-03\",\"date: 2020 Q1<br />.val:  1.412685e-02\",\"date: 2020 Q2<br />.val: -1.822686e-01\",\"date: 2020 Q3<br />.val: -4.246788e-03\",\"date: 2020 Q4<br />.val:  7.864628e-02\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y4\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[15.365714007276209,15.392146949679914,15.392146949679914,15.365714007276209,15.365714007276209],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[15.366801003687582,15.393233946091287,15.393233946091287,15.366801003687582,15.366801003687582],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[-0.016962500554997179,0.0094704418487096195,0.0094704418487096195,-0.016962500554997179,-0.016962500554997179],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y3\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[9678,9678,9770,9770,9678],\"y\":[-0.065027650154511257,-0.038594707750804452,-0.038594707750804452,-0.065027650154511257,-0.065027650154511257],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.2598425196850394,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"fill\":\"toself\",\"fillcolor\":\"rgba(191,191,191,1)\",\"hoveron\":\"fills\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y4\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":55.452054794520549,\"r\":18.99543378995434,\"b\":40.182648401826491,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"STL decomposition\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[9235.1000000000004,18978.900000000001],\"tickmode\":\"array\",\"ticktext\":[\"2000 Q1\",\"2005 Q1\",\"2010 Q1\",\"2015 Q1\",\"2020 Q1\"],\"tickvals\":[10957,12784,14610,16436,18262],\"categoryorder\":\"array\",\"categoryarray\":[\"2000 Q1\",\"2005 Q1\",\"2010 Q1\",\"2015 Q1\",\"2020 Q1\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y4\",\"title\":\"\",\"hoverformat\":\".2f\"},\"annotations\":[{\"text\":\"date\",\"x\":0.5,\"y\":0,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":-0,\"xanchor\":\"center\",\"yanchor\":\"top\",\"annotationType\":\"axis\",\"yshift\":-21.917808219178088},{\"text\":\"log(price)\",\"x\":1,\"y\":0.87785388127853881,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"trend\",\"x\":1,\"y\":0.625,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"season_year\",\"x\":1,\"y\":0.375,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"remainder\",\"x\":1,\"y\":0.12214611872146118,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"}],\"yaxis\":{\"domain\":[0.75570776255707761,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[15.099047801179537,15.658813155776585],\"tickmode\":\"array\",\"ticktext\":[\"15.1\",\"15.2\",\"15.3\",\"15.4\",\"15.5\",\"15.6\"],\"tickvals\":[15.100000000000001,15.200000000000001,15.300000000000001,15.400000000000002,15.500000000000002,15.600000000000001],\"categoryorder\":\"array\",\"categoryarray\":[\"15.1\",\"15.2\",\"15.3\",\"15.4\",\"15.5\",\"15.6\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.75570776255707761,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.75570776255707761,\"y1\":1,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.50570776255707761,\"y1\":0.74429223744292239},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.50570776255707761,\"y1\":0.74429223744292239,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.25570776255707761,\"y1\":0.49429223744292239},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.25570776255707761,\"y1\":0.49429223744292239,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":0.24429223744292236},{\"type\":\"rect\",\"fillcolor\":\"rgba(217,217,217,1)\",\"line\":{\"color\":\"transparent\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0,\"y1\":0.24429223744292236,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"}],\"yaxis2\":{\"type\":\"linear\",\"autorange\":false,\"range\":[15.119511781010496,15.640523168768372],\"tickmode\":\"array\",\"ticktext\":[\"15.2\",\"15.3\",\"15.4\",\"15.5\",\"15.6\"],\"tickvals\":[15.200000000000001,15.300000000000001,15.400000000000002,15.500000000000002,15.600000000000001],\"categoryorder\":\"array\",\"categoryarray\":[\"15.2\",\"15.3\",\"15.4\",\"15.5\",\"15.6\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"domain\":[0.50570776255707761,0.74429223744292239],\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis3\":{\"type\":\"linear\",\"autorange\":false,\"range\":[-0.018284147675182518,0.010792088968894961],\"tickmode\":\"array\",\"ticktext\":[\"-0.01\",\"0.00\",\"0.01\"],\"tickvals\":[-0.01,0,0.0099999999999999985],\"categoryorder\":\"array\",\"categoryarray\":[\"-0.01\",\"0.00\",\"0.01\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"domain\":[0.25570776255707761,0.49429223744292239],\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis4\":{\"type\":\"linear\",\"autorange\":false,\"range\":[-0.19531438191369208,0.091692024008376366],\"tickmode\":\"array\",\"ticktext\":[\"-0.1\",\"0.0\"],\"tickvals\":[-0.099999999999999992,0],\"categoryorder\":\"array\",\"categoryarray\":[\"-0.1\",\"0.0\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"domain\":[0,0.24429223744292236],\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"3b10751d7254\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"3b107b03844\":{\"ymin\":{},\"ymax\":{},\"xmin\":{},\"xmax\":{}}},\"cur_data\":\"3b10751d7254\",\"visdat\":{\"3b10751d7254\":[\"function (y) \",\"x\"],\"3b107b03844\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Model Specification\n\nWe will **fit** two models to our time series: *Seasonal Naïve*, and the *Drift* model. We will also use the log transformation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit <- gdp_train |> \n  model(\n    snaive = SNAIVE(log(price)),\n    drift  = RW(log(price) ~ drift())\n  )\n```\n:::\n\n\n:::{.callout-tip collapse=\"true\"}\n## Benchmark models\nWe have four different benchmark models that we'll use to compare against the rest of  the more complex models:\n- Mean (`MEAN( <.y> )`)\n- Naïve (`NAIVE( <.y> )`)\n- Seasonal Naïve (`SNAIVE( <.y> )`)\n- Drift (`RW( <.y> ~ drift())`)\n\nwhere `<.y>` is just a placeholder for the variable to model.\n\nChoose wisely which of these to use in each case, according to the exploratory analysis performed.\n:::\n\n## Residuals Diagnostics\n\n### Visual analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit |> \n  select(snaive) |> \n  gg_tsresiduals() +\n  ggtitle(\"Residuals Diagnostics for the Seasonal Naïve Model\")\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngdp_fit |> \n  select(drift) |> \n  gg_tsresiduals() +\n  ggtitle(\"Residuals Diagnostics for the Drift Model\")\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-11-2.png){width=672}\n:::\n:::\n\n\n:::{.callout-tip collapse=\"true\"}\nHere we expect to see:\n\n- A time series with no apparent patterns (no trend and/or seasonality), with a mean close to zero.\n- In the **ACF**, we'd expect no lags with significant autocorrelation.\n- Normally distributed residuals.\n:::\n\n### Portmanteau tests of autocorrelation\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit |> \n  augment() |> \n  features(.innov, ljung_box, lag = 24, dof = 0)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"lb_stat\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"lb_pvalue\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"116.07682\",\"4\":\"4.818368e-14\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"61.60602\",\"4\":\"3.776697e-05\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n:::{.callout-caution}\n## Residuals interpretation\nBoth models produce sub optimal residuals:\n\n* The SNAIVE correctly detects the seasonality, however, its residuals are still autocorrelated. Moreover, the residuals are not normally distributed.\n\n* The drift model doesn't account for the seasonality, and their distribution is a little bit skewed.\n\n\nHence, we will perform our forecasts using the **bootstrapping** method.\n:::\n\nWe can compute some error metrics on the training set using the `accuracy()` function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_train_accu <- accuracy(gdp_fit) |> \n  arrange(MAPE)\ngdp_train_accu |> \n  select(symbol:.type, MAPE, RMSE, MAE, MASE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".type\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"MAPE\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RMSE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MAE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MASE\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"Training\",\"4\":\"2.461423\",\"5\":\"190126.2\",\"6\":\"126427.5\",\"7\":\"0.8231264\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"Training\",\"4\":\"3.094711\",\"5\":\"215407.6\",\"6\":\"153594.2\",\"7\":\"1.0000000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n:::{.callout-tip collapse=\"true\"}\n## The `accuracy()` function\n\nThe `accuracy()` function can be used to compute error metrics in the training data, or in the test set. What differs is the data that is given to it:\n\n* For the training metrics, you need to use the **`mable`** (the table of models, that we usually store in `_fit`).\n\n* For the forecasting error metrics, we need the **`fable`** (the forecasts table, usually stored as `_fc` or `_fcst`), and the **complete set of data** (both the training and test set together).\n\n![](https://media.tenor.com/dp_hQBGT0rIAAAAM/think-smart.gif){fig-align=\"center\"}\n:::\n\n:::{.callout-important appearance=\"minimal\"}\n\nFor this analysis, we are focusing on the **MAPE**[^mape] metric. The drift model **(2.46%)** seems to have a better fit with the training set than the snaive model **(3.09%)**.\n\n:::\n\n\n[^mape]: The Mean Absolute Percentage Error is a percentage error metric widely used in professional environments. \n\n    Let\n    \n    $$\n    e_t = y_t - \\hat{y}_t\n    $$ \n    \n    be the error or residual. \n  \n    Then the MAPE would be computed as \n    \n    $$\n    MAPE = \\frac{1}{T}\\sum_{t=1}^T|\\frac{e_t}{y_t}|\n    $$.\n    \n    ![](https://media.tenor.com/tqERWt8lBYEAAAAM/calculating-puzzled.gif){fig-align=\"center\"}\n\n\n## Modeling using decomposition\n\nWe will perform a forecast using decomposition, to see if we can improve our results so far.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit_dcmp <- gdp_train |> \n      model(\n        stlf = decomposition_model(\n          STL(log(price) ~ season(window = \"periodic\"), robust = TRUE),\n          RW(season_adjust ~ drift())\n        )\n      )\n\ngdp_fit_dcmp\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"stlf\"],\"name\":[2],\"type\":[\"lst_mdl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"<lst_mdl>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n:::{.callout-note collapse=\"true\"}\n## Note on `decomposition_model()`\n\nRemember, when using decomposition models, we need to do the following:\n\n1. Specify what type of decomposition we want to use and customize it as needed.\n\n2. Fit a model for the seasonally adjusted data; `season_adjust`.\n\n3. Fit a model for the seasonal component. **R** uses a `SNAIVE()` model by default to model the seasonality. If you wish to model it using a different model, you have specify it.\n\n* The name of the seasonal component depends on the type of seasonality present in the time series. If it has a yearly seasonality, the component is called `season_year`. It could also be called `season_week`, `season_day`, and so on.\n\n:::\n\nWe can join this new model with the models we trained before. This way we can have them all in the same `mable`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit <- gdp_fit |> \n  left_join(gdp_fit_dcmp)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(symbol)`\n```\n\n\n:::\n:::\n\n\n### Residuals diagnostics\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit |> \n  accuracy() |> \n  select(symbol:.type, MAPE, RMSE, MAE, MASE) |> \n  arrange(MAPE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".type\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"MAPE\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RMSE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MAE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MASE\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"Training\",\"4\":\"1.706904\",\"5\":\"173057.0\",\"6\":\"84805.94\",\"7\":\"0.5521427\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"Training\",\"4\":\"2.461423\",\"5\":\"190126.2\",\"6\":\"126427.47\",\"7\":\"0.8231264\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"Training\",\"4\":\"3.094711\",\"5\":\"215407.6\",\"6\":\"153594.23\",\"7\":\"1.0000000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit |> \n  select(stlf) |> \n  gg_tsresiduals()\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit |> \n  augment() |> \n  features(.innov, ljung_box)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"lb_stat\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"lb_pvalue\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"11.212158\",\"4\":\"8.126316e-04\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"36.239475\",\"4\":\"1.744999e-09\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"6.685891\",\"4\":\"9.717896e-03\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n:::{.callout-important appearance=\"minimal\"}\n\nThe MAPE seems to improve with this decomposition model. Also, the residual diagnostics do not show any seasonality present in them. However, the residuals are still autocorrelated, as the *Ljung-Box* test suggests.\n\n:::\n\n## Forecasting on the test set\n\nOnce we have our models, we can produce forecasts. We will forecast our test data and check our forecasts' performance.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fc <- gdp_fit |> \n  forecast(h = 6) \n\ngdp_fc\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"date\"],\"name\":[3],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"price\"],\"name\":[4],\"type\":[\"dist\"],\"align\":[\"right\"]},{\"label\":[\".mean\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"2021 Q1\",\"4\":\"<dist>\",\"5\":\"5866327\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"2021 Q2\",\"4\":\"<dist>\",\"5\":\"4804653\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"2021 Q3\",\"4\":\"<dist>\",\"5\":\"5512615\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"2021 Q4\",\"4\":\"<dist>\",\"5\":\"5872499\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"2022 Q1\",\"4\":\"<dist>\",\"5\":\"5871667\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"snaive\",\"3\":\"2022 Q2\",\"4\":\"<dist>\",\"5\":\"4809026\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"2021 Q1\",\"4\":\"<dist>\",\"5\":\"5899633\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"2021 Q2\",\"4\":\"<dist>\",\"5\":\"5932373\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"2021 Q3\",\"4\":\"<dist>\",\"5\":\"5965376\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"2021 Q4\",\"4\":\"<dist>\",\"5\":\"5998643\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"2022 Q1\",\"4\":\"<dist>\",\"5\":\"6032178\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"drift\",\"3\":\"2022 Q2\",\"4\":\"<dist>\",\"5\":\"6065981\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2021 Q1\",\"4\":\"<dist>\",\"5\":\"5743422\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2021 Q2\",\"4\":\"<dist>\",\"5\":\"5926635\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2021 Q3\",\"4\":\"<dist>\",\"5\":\"5891270\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2021 Q4\",\"4\":\"<dist>\",\"5\":\"5988920\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2022 Q1\",\"4\":\"<dist>\",\"5\":\"5862883\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2022 Q2\",\"4\":\"<dist>\",\"5\":\"6050175\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fc |> \n  autoplot(gdp) +\n  facet_wrap(~.model, ncol = 1)\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngdp_fc |> \n  filter(.model == \"stlf\") |> \n  autoplot(gdp)\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-21-2.png){width=672}\n:::\n:::\n\n\nWe now estimate the forecast errors:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fc |> \n  accuracy(gdp) |> \n  select(.model:.type, MAPE, RMSE, MAE, MASE) |> \n  arrange(MAPE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\".model\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"symbol\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".type\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"MAPE\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RMSE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MAE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MASE\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"stlf\",\"2\":\"NGDPRNSAXDCMXQ\",\"3\":\"Test\",\"4\":\"0.7581485\",\"5\":\"57422.13\",\"6\":\"43981.66\",\"7\":\"0.2863497\"},{\"1\":\"drift\",\"2\":\"NGDPRNSAXDCMXQ\",\"3\":\"Test\",\"4\":\"1.9983235\",\"5\":\"138867.51\",\"6\":\"115794.86\",\"7\":\"0.7539011\"},{\"1\":\"snaive\",\"2\":\"NGDPRNSAXDCMXQ\",\"3\":\"Test\",\"4\":\"8.0446106\",\"5\":\"675238.16\",\"6\":\"476172.82\",\"7\":\"3.1001999\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## Forecasting the future\n\nWe now refit our model using the whole dataset. We will only model the STL decomposition model, because the other two didn't get a strong fit.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fit2 <- gdp |> \n  model(\n    stlf = decomposition_model(\n          STL(log(price) ~ season(window = \"periodic\"), robust = TRUE),\n          RW(season_adjust ~ drift())\n        )\n  )\ngdp_fit2\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"stlf\"],\"name\":[2],\"type\":[\"lst_mdl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"<lst_mdl>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp_fc_fut <- gdp_fit2 |> \n  forecast(h = \"3 years\")\ngdp_fc_fut\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"date\"],\"name\":[3],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"price\"],\"name\":[4],\"type\":[\"dist\"],\"align\":[\"right\"]},{\"label\":[\".mean\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2024 Q1\",\"4\":\"<dist>\",\"5\":\"6218591\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2024 Q2\",\"4\":\"<dist>\",\"5\":\"6399950\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2024 Q3\",\"4\":\"<dist>\",\"5\":\"6375813\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2024 Q4\",\"4\":\"<dist>\",\"5\":\"6528562\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2025 Q1\",\"4\":\"<dist>\",\"5\":\"6352003\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2025 Q2\",\"4\":\"<dist>\",\"5\":\"6537482\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2025 Q3\",\"4\":\"<dist>\",\"5\":\"6513054\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2025 Q4\",\"4\":\"<dist>\",\"5\":\"6669324\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2026 Q1\",\"4\":\"<dist>\",\"5\":\"6489185\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2026 Q2\",\"4\":\"<dist>\",\"5\":\"6678901\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2026 Q3\",\"4\":\"<dist>\",\"5\":\"6654176\"},{\"1\":\"NGDPRNSAXDCMXQ\",\"2\":\"stlf\",\"3\":\"2026 Q4\",\"4\":\"<dist>\",\"5\":\"6814068\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ngdp_fc_fut |> \n  autoplot(gdp)\n```\n\n::: {.cell-output-display}\n![](forecasting_workflow_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# save(gdp_fc_fut, file = \"equipo1.RData\")\n```\n:::\n",
    "supporting": [
      "forecasting_workflow_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}